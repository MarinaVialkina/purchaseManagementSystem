{"version":3,"file":"useElementAtomEventListener.js","names":["useUpdate","useEffect","useRef","setRef","useElementAtomEventListener","elementAtom","type","listener","currentRef","ctx","element","current","removeEventListener","addEventListener"],"sources":["../../../../../../src/utils/state/useElementAtomEventListener/useElementAtomEventListener.ts"],"sourcesContent":["import { AtomMut } from '@reatom/framework';\nimport { useUpdate } from '@reatom/npm-react';\nimport { useEffect, useRef } from 'react';\n\nimport { setRef } from '##/utils/setRef';\n\nexport const useElementAtomEventListener = <T extends HTMLElement>(\n  elementAtom: AtomMut<T | null>,\n  type: keyof DocumentEventMap,\n  listener: EventListener,\n) => {\n  const currentRef = useRef<T | null>(null);\n  useUpdate(\n    (ctx, element, listener) => {\n      currentRef.current?.removeEventListener(type, listener);\n      element?.addEventListener(type, listener);\n\n      setRef(currentRef, element || null);\n    },\n    [elementAtom, listener],\n  );\n  useEffect(() => {\n    return () => {\n      currentRef.current?.removeEventListener(type, listener);\n    };\n  }, [type, listener]);\n};\n"],"mappings":"AACA,OAASA,SAAT,KAA0B,mBAA1B,CACA,OAASC,SAAT,CAAoBC,MAApB,KAAkC,OAAlC,CAEA,OAASC,MAAT,oBAEA,MAAO,IAAMC,4BAA2B,CAAG,SACzCC,CADyC,CAEzCC,CAFyC,CAGzCC,CAHyC,CAItC,CACH,GAAMC,EAAU,CAAGN,MAAM,CAAW,IAAX,CAAzB,CACAF,SAAS,CACP,SAACS,CAAD,CAAMC,CAAN,CAAeH,CAAf,CAA4B,iBAC1BC,CAAU,CAACG,OADe,qBAC1B,EAAoBC,mBAApB,CAAwCN,CAAxC,CAA8CC,CAA9C,CAD0B,QAE1BG,CAF0B,WAE1BA,CAF0B,QAE1BA,CAAO,CAAEG,gBAAT,CAA0BP,CAA1B,CAAgCC,CAAhC,CAF0B,CAI1BJ,MAAM,CAACK,CAAD,CAAaE,CAAO,EAAI,IAAxB,CACP,CANM,CAOP,CAACL,CAAD,CAAcE,CAAd,CAPO,CAFN,CAWHN,SAAS,CAAC,UAAM,CACd,MAAO,WAAM,iBACXO,CAAU,CAACG,OADA,qBACX,EAAoBC,mBAApB,CAAwCN,CAAxC,CAA8CC,CAA9C,CACD,CACF,CAJQ,CAIN,CAACD,CAAD,CAAOC,CAAP,CAJM,CAKV,CApBM"}