{"version":3,"file":"useClickOutside.js","names":["useAction","useEffect","useSendToAtom","useClickOutsideAtom","isActiveAtom","ignoreClicksElementsAtom","handler","handlerAtom","fn","ctx","e","isActive","get","ignoreClicksElements","length","every","el","contains","target","document","addEventListener","removeEventListener"],"sources":["../../../../../../src/utils/state/useClickOutsideAtom/useClickOutside.tsx"],"sourcesContent":["import { AtomMut } from '@reatom/core';\nimport { useAction } from '@reatom/npm-react';\nimport { useEffect } from 'react';\n\nimport { useSendToAtom } from '##/utils/state/useSendToAtom';\n\nexport type ClickOutsideHandler = (event: MouseEvent) => void;\n\ntype UseClickOutsideProps = {\n  isActiveAtom?: AtomMut<boolean>;\n  ignoreClicksElementsAtom?: AtomMut<(HTMLElement | null)[]>;\n  handler?: ClickOutsideHandler;\n};\n\nexport const useClickOutsideAtom = ({\n  isActiveAtom,\n  ignoreClicksElementsAtom,\n  handler,\n}: UseClickOutsideProps) => {\n  const handlerAtom = useSendToAtom([handler]);\n\n  const fn = useAction((ctx, e: MouseEvent) => {\n    const isActive = isActiveAtom && ctx.get(isActiveAtom);\n    const ignoreClicksElements =\n      ignoreClicksElementsAtom && ctx.get(ignoreClicksElementsAtom);\n    const handler = ctx.get(handlerAtom)[0];\n    isActive &&\n      handler &&\n      ignoreClicksElements?.length &&\n      ignoreClicksElements.every((el) => !el?.contains(e.target as Node)) &&\n      handler(e);\n  });\n\n  useEffect(() => {\n    document.addEventListener('mousedown', fn);\n\n    return () => {\n      document.removeEventListener('mousedown', fn);\n    };\n  }, []);\n};\n"],"mappings":"AACA,OAASA,SAAT,KAA0B,mBAA1B,CACA,OAASC,SAAT,KAA0B,OAA1B,CAEA,OAASC,aAAT,wBAUA,MAAO,IAAMC,oBAAmB,CAAG,WAIP,IAH1BC,EAG0B,GAH1BA,YAG0B,CAF1BC,CAE0B,GAF1BA,wBAE0B,CAD1BC,CAC0B,GAD1BA,OAC0B,CACpBC,CAAW,CAAGL,aAAa,CAAC,CAACI,CAAD,CAAD,CADP,CAGpBE,CAAE,CAAGR,SAAS,CAAC,SAACS,CAAD,CAAMC,CAAN,CAAwB,IACrCC,EAAQ,CAAGP,CAAY,EAAIK,CAAG,CAACG,GAAJ,CAAQR,CAAR,CADU,CAErCS,CAAoB,CACxBR,CAAwB,EAAII,CAAG,CAACG,GAAJ,CAAQP,CAAR,CAHa,CAIrCC,CAAO,CAAGG,CAAG,CAACG,GAAJ,CAAQL,CAAR,EAAqB,CAArB,CAJ2B,CAK3CI,CAAQ,EACNL,CADF,UAEEO,CAFF,WAEEA,CAFF,QAEEA,CAAoB,CAAEC,MAFxB,GAGED,CAAoB,CAACE,KAArB,CAA2B,SAACC,CAAD,QAAQ,SAACA,CAAD,WAACA,CAAD,EAACA,CAAE,CAAEC,QAAJ,CAAaP,CAAC,CAACQ,MAAf,CAAD,CAAR,CAA3B,CAHF,EAIEZ,CAAO,CAACI,CAAD,CACV,CAVmB,CAHM,CAe1BT,SAAS,CAAC,UAAM,CAGd,MAFAkB,SAAQ,CAACC,gBAAT,CAA0B,WAA1B,CAAuCZ,CAAvC,CAEA,CAAO,UAAM,CACXW,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,CAA0Cb,CAA1C,CACD,CACF,CANQ,CAMN,EANM,CAOV,CA1BM"}