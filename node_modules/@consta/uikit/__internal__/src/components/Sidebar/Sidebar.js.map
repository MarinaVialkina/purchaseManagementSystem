{"version":3,"file":"Sidebar.js","names":["React","forwardRef","Transition","useModal","PortalWithTheme","PortalWithThemeConsumer","useForkRef","cnMixScrollBar","cn","withCtx","useAnimateTimeout","cnSidebar","SidebarContent","className","children","rest","SidebarActions","Sidebar","props","ref","isOpen","onClose","onOpen","hasOverlay","onClickOutside","onEsc","position","size","container","window","document","body","style","rootClassName","afterClose","ignoreOutsideClicksRefsProp","ignoreOutsideClicksRefs","border","scrollContainerRefProp","scrollContainerRef","otherProps","shadowHeader","shadowFooter","scrollable","theme","portalRef","windowRef","contentRef","scrollRef","windowElAtom","animateTimeout","animate","zIndex","Actions","Content"],"sources":["../../../../../src/components/Sidebar/Sidebar.tsx"],"sourcesContent":["import './Sidebar.css';\n\nimport React, { forwardRef } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport { useModal } from '##/components/Modal/useModal';\nimport {\n  PortalWithTheme,\n  PortalWithThemeConsumer,\n} from '##/components/PortalWithTheme';\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { cnMixScrollBar } from '##/mixs/MixScrollBar';\nimport { cn } from '##/utils/bem';\nimport { withCtx } from '##/utils/state';\n\nimport {\n  SidebarActionsProps,\n  SidebarComponent,\n  SidebarContentProps,\n  SidebarProps,\n} from './types';\nimport { useAnimateTimeout } from './useAnimateTimeout';\n\nexport const cnSidebar = cn('Sidebar');\n\nconst SidebarContent: React.FC<SidebarContentProps> = ({\n  className,\n  children,\n  ...rest\n}) => (\n  <div\n    className={cnSidebar('Content', [className, cnMixScrollBar()])}\n    {...rest}\n  >\n    {children}\n  </div>\n);\n\nconst SidebarActions: React.FC<SidebarActionsProps> = ({\n  className,\n  children,\n  ...rest\n}) => (\n  <div className={cnSidebar('Actions', [className])} {...rest}>\n    {children}\n  </div>\n);\n\nexport const Sidebar = withCtx(\n  forwardRef<HTMLDivElement, SidebarProps>((props, ref) => {\n    const {\n      isOpen,\n      onClose,\n      onOpen,\n      hasOverlay = true,\n      onClickOutside,\n      onEsc,\n      position = 'right',\n      size = 'm',\n      className,\n      children,\n      container = window.document.body,\n      style,\n      rootClassName,\n      afterClose,\n      ignoreOutsideClicksRefs: ignoreOutsideClicksRefsProp,\n      border,\n      scrollContainerRef: scrollContainerRefProp,\n      ...otherProps\n    } = props;\n\n    const {\n      shadowHeader,\n      shadowFooter,\n      scrollable,\n      theme,\n      portalRef,\n      windowRef,\n      contentRef,\n      scrollRef,\n      ignoreOutsideClicksRefs,\n      windowElAtom,\n    } = useModal({\n      ref,\n      isOpen,\n      onEsc,\n      onOpen,\n      onClose,\n      ignoreOutsideClicksRefs: ignoreOutsideClicksRefsProp,\n    });\n\n    const animateTimeout = useAnimateTimeout(windowElAtom, position);\n    const scrollContainerRef = useForkRef([scrollContainerRefProp, scrollRef]);\n\n    return (\n      <Transition\n        in={isOpen}\n        unmountOnExit\n        timeout={animateTimeout}\n        nodeRef={portalRef}\n        onExiting={afterClose}\n      >\n        {(animate) => (\n          <PortalWithTheme\n            preset={theme}\n            ref={portalRef}\n            container={container}\n            className={cnSidebar({ position, hasOverlay }, [rootClassName])}\n            style={{\n              ...(style?.zIndex && {\n                zIndex: style.zIndex,\n              }),\n              ['--sidebar-animate-timeout' as string]: `${animateTimeout}ms`,\n              ...(shadowHeader && {\n                ['--modal-layout-header-color-shadow' as string]:\n                  'var(--color-shadow-group-2)',\n              }),\n              ...(shadowFooter && {\n                ['--modal-layout-footer-color-shadow' as string]:\n                  'var(--color-shadow-group-2)',\n              }),\n              ...(style?.zIndex && {\n                ['--modal-layout-z-index-for-fixed-slot' as string]:\n                  style.zIndex,\n              }),\n            }}\n          >\n            {hasOverlay && (\n              <div\n                className={cnSidebar('Overlay', { animate })}\n                aria-label=\"Overlay\"\n              />\n            )}\n            <div\n              {...otherProps}\n              style={{\n                ...style,\n                zIndex: undefined,\n              }}\n              className={cnSidebar(\n                'Window',\n                {\n                  size,\n                  position,\n                  animate,\n                  scrollable,\n                  border,\n                },\n                [className],\n              )}\n              ref={windowRef}\n            >\n              <div\n                className={cnSidebar('Scroll', cnMixScrollBar({ size: 's' }))}\n                ref={scrollContainerRef}\n              >\n                <div className={cnSidebar('Content')} ref={contentRef}>\n                  <PortalWithThemeConsumer\n                    onClickOutside={onClickOutside}\n                    ignoreClicksInsideRefs={ignoreOutsideClicksRefs}\n                  >\n                    {children}\n                  </PortalWithThemeConsumer>\n                </div>\n              </div>\n            </div>\n          </PortalWithTheme>\n        )}\n      </Transition>\n    );\n  }),\n) as SidebarComponent;\n/**\n * @deprecated use actions\n */\nSidebar.Actions = SidebarActions;\n\n/**\n * @deprecated use actions\n */\nSidebar.Content = SidebarContent;\n"],"mappings":"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"}