{"version":3,"file":"Attachment.js","names":["React","Button","File","Text","cnMixFlex","cn","isDefined","forwardRefWithAs","attachmentPropSizeDefault","cnAttachment","fileSizeMap","xs","s","m","textSizeMap","descriptionSizeMap","Attachment","props","ref","className","as","fileExtension","withPictogram","loading","fileName","errorText","loadingText","loadingProgress","fileDescription","size","onClick","actions","actionsProp","buttonTitle","buttonIcon","onButtonClick","withAction","otherProps","icon","title","filter","withActions","length","hoverEffect","cursor","error","flex","gap","direction","map","action","index"],"sources":["../../../../../src/components/Attachment/Attachment.tsx"],"sourcesContent":["import './Attachment.css';\n\nimport React from 'react';\n\nimport { Button } from '##/components/Button';\nimport { File } from '##/components/File';\nimport { Text, TextPropSize } from '##/components/Text';\nimport { FileIconPropSize } from '##/fileIcons/FileIcon/FileIcon';\nimport { cnMixFlex } from '##/mixs/MixFlex';\nimport { cn } from '##/utils/bem';\nimport { isDefined } from '##/utils/type-guards';\nimport { forwardRefWithAs } from '##/utils/types/PropsWithAsAttributes';\n\nimport {\n  AttachmentActions,\n  AttachmentProps,\n  AttachmentPropSize,\n  attachmentPropSizeDefault,\n} from './types';\n\nconst cnAttachment = cn('Attachment');\n\nconst fileSizeMap: Record<AttachmentPropSize, FileIconPropSize> = {\n  xs: 's',\n  s: 's',\n  m: 'm',\n};\n\nconst textSizeMap: Record<AttachmentPropSize, TextPropSize> = {\n  xs: 'xs',\n  s: 's',\n  m: 's',\n};\n\nconst descriptionSizeMap: Record<AttachmentPropSize, TextPropSize> = {\n  xs: 'xs',\n  s: 'xs',\n  m: 's',\n};\n\nconst Attachment = forwardRefWithAs<AttachmentProps>((props, ref) => {\n  const {\n    className,\n    as = 'div',\n    fileExtension,\n    withPictogram,\n    loading,\n    fileName,\n    errorText,\n    loadingText = 'Loading',\n    loadingProgress,\n    fileDescription,\n    size = attachmentPropSizeDefault,\n    onClick,\n    actions: actionsProp = [],\n    buttonTitle,\n    buttonIcon,\n    onButtonClick,\n    withAction,\n    ...otherProps\n  } = props;\n  const Tag = as as string;\n\n  const actions: AttachmentActions[] = [\n    onButtonClick && buttonIcon\n      ? {\n          onClick: onButtonClick,\n          icon: buttonIcon,\n          title: buttonTitle,\n        }\n      : undefined,\n    ...actionsProp,\n  ].filter(isDefined);\n\n  const withActions = Boolean(actions?.length);\n\n  return (\n    <Tag\n      {...otherProps}\n      onClick={onClick}\n      className={cnAttachment(\n        {\n          size,\n          hoverEffect: Boolean(actions?.length || onClick),\n          cursor: onClick ? 'pointer' : undefined,\n          withActions,\n          error: Boolean(errorText),\n        },\n        [cnMixFlex({ flex: 'flex', gap: 'xs' }), className],\n      )}\n      ref={ref}\n    >\n      {withPictogram && (\n        <File\n          className={cnAttachment('File')}\n          extension={fileExtension}\n          loading={loading}\n          loadingWithProgressSpin\n          loadingProgress={loadingProgress}\n          size={fileSizeMap[size]}\n        />\n      )}\n      <div\n        className={cnAttachment('Content', [\n          cnMixFlex({ flex: 'flex', direction: 'column', gap: '2xs' }),\n        ])}\n      >\n        {fileName && (\n          <Text\n            className={cnAttachment('FileName')}\n            size={textSizeMap[size]}\n            view=\"primary\"\n            lineHeight=\"xs\"\n          >\n            {fileName}\n          </Text>\n        )}\n        {fileDescription && !loading && (\n          <Text\n            className={cnAttachment('FileDescription')}\n            size={descriptionSizeMap[size]}\n            lineHeight=\"xs\"\n            view=\"ghost\"\n          >\n            {fileDescription}\n          </Text>\n        )}\n        {loadingText && loading && (\n          <Text\n            className={cnAttachment('LoadingText')}\n            size={descriptionSizeMap[size]}\n            lineHeight=\"xs\"\n            view=\"ghost\"\n          >\n            {loadingProgress\n              ? `${loadingText} ${loadingProgress}%`\n              : `${loadingText}...`}\n          </Text>\n        )}\n        {errorText && (\n          <Text\n            className={cnAttachment('ErrorText')}\n            size={descriptionSizeMap[size]}\n            lineHeight=\"xs\"\n            view=\"alert\"\n          >\n            {errorText}\n          </Text>\n        )}\n      </div>\n      {withActions && (\n        <div\n          className={cnAttachment('Actions', [\n            cnMixFlex({ flex: 'flex', gap: 'xs' }),\n          ])}\n        >\n          {actions.map((action, index) => (\n            <Button\n              key={action.title || index}\n              className={cnAttachment('Button')}\n              tabIndex={-1}\n              onlyIcon\n              iconLeft={action.icon}\n              onClick={action.onClick}\n              title={action.title}\n              ref={action.ref}\n              size=\"xs\"\n              view=\"clear\"\n            />\n          ))}\n        </div>\n      )}\n    </Tag>\n  );\n});\n\nexport { Attachment, cnAttachment };\n"],"mappings":"qYAAA,yBAEA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,MAAT,iBACA,OAASC,IAAT,eACA,OAASC,IAAT,eAEA,OAASC,SAAT,0BACA,OAASC,EAAT,uBACA,OAASC,SAAT,+BACA,OAASC,gBAAT,+CAEA,OAIEC,yBAJF,e,GAOMC,aAAY,CAAGJ,EAAE,CAAC,YAAD,C,CAEjBK,WAAyD,CAAG,CAChEC,EAAE,CAAE,GAD4D,CAEhEC,CAAC,CAAE,GAF6D,CAGhEC,CAAC,CAAE,GAH6D,C,CAM5DC,WAAqD,CAAG,CAC5DH,EAAE,CAAE,IADwD,CAE5DC,CAAC,CAAE,GAFyD,CAG5DC,CAAC,CAAE,GAHyD,C,CAMxDE,kBAA4D,CAAG,CACnEJ,EAAE,CAAE,IAD+D,CAEnEC,CAAC,CAAE,IAFgE,CAGnEC,CAAC,CAAE,GAHgE,C,CAM/DG,UAAU,CAAGT,gBAAgB,CAAkB,SAACU,CAAD,CAAQC,CAAR,CAAgB,IAEjEC,EAFiE,CAoB/DF,CApB+D,CAEjEE,SAFiE,GAoB/DF,CApB+D,CAGjEG,EAHiE,CAGjEA,CAHiE,YAG5D,KAH4D,GAIjEC,CAJiE,CAoB/DJ,CApB+D,CAIjEI,aAJiE,CAKjEC,CALiE,CAoB/DL,CApB+D,CAKjEK,aALiE,CAMjEC,CANiE,CAoB/DN,CApB+D,CAMjEM,OANiE,CAOjEC,CAPiE,CAoB/DP,CApB+D,CAOjEO,QAPiE,CAQjEC,CARiE,CAoB/DR,CApB+D,CAQjEQ,SARiE,GAoB/DR,CApB+D,CASjES,WATiE,CASjEA,CATiE,YASnD,SATmD,GAUjEC,CAViE,CAoB/DV,CApB+D,CAUjEU,eAViE,CAWjEC,CAXiE,CAoB/DX,CApB+D,CAWjEW,eAXiE,GAoB/DX,CApB+D,CAYjEY,IAZiE,CAYjEA,CAZiE,YAY1DrB,yBAZ0D,GAajEsB,CAbiE,CAoB/Db,CApB+D,CAajEa,OAbiE,GAoB/Db,CApB+D,CAcjEc,OAdiE,CAcxDC,CAdwD,YAc1C,EAd0C,GAejEC,CAfiE,CAoB/DhB,CApB+D,CAejEgB,WAfiE,CAgBjEC,CAhBiE,CAoB/DjB,CApB+D,CAgBjEiB,UAhBiE,CAiBjEC,CAjBiE,CAoB/DlB,CApB+D,CAiBjEkB,aAjBiE,CAkBjEC,CAlBiE,CAoB/DnB,CApB+D,CAkBjEmB,UAlBiE,CAmB9DC,CAnB8D,0BAoB/DpB,CApB+D,YAuB7Dc,CAA4B,CAAG,CACnCI,CAAa,EAAID,CAAjB,CACI,CACEJ,OAAO,CAAEK,CADX,CAEEG,IAAI,CAAEJ,CAFR,CAGEK,KAAK,CAAEN,CAHT,CADJ,OADmC,4BAQhCD,CARgC,GASnCQ,MATmC,CAS5BlC,SAT4B,CAvB8B,CAkC7DmC,CAAW,YAAWV,CAAX,WAAWA,CAAX,IAAWA,CAAO,CAAEW,MAApB,CAlCkD,CAoCnE,MACE,qBAhBUtB,CAgBV,kBACMiB,CADN,EAEE,OAAO,CAAEP,CAFX,CAGE,SAAS,CAAErB,YAAY,CACrB,CACEoB,IAAI,CAAJA,CADF,CAEEc,WAAW,IAAU,QAAAZ,CAAO,WAAPA,CAAA,QAAAA,CAAO,CAAEW,MAAT,GAAmBZ,CAA7B,CAFb,CAGEc,MAAM,CAAEd,CAAO,CAAG,SAAH,OAHjB,CAIEW,WAAW,CAAXA,CAJF,CAKEI,KAAK,GAAUpB,CALjB,CADqB,CAQrB,CAACrB,SAAS,CAAC,CAAE0C,IAAI,CAAE,MAAR,CAAgBC,GAAG,CAAE,IAArB,CAAD,CAAV,CAAyC5B,CAAzC,CARqB,CAHzB,CAaE,GAAG,CAAED,CAbP,GAeGI,CAAa,EACZ,oBAAC,IAAD,EACE,SAAS,CAAEb,YAAY,CAAC,MAAD,CADzB,CAEE,SAAS,CAAEY,CAFb,CAGE,OAAO,CAAEE,CAHX,CAIE,uBAAuB,GAJzB,CAKE,eAAe,CAAEI,CALnB,CAME,IAAI,CAAEjB,WAAW,CAACmB,CAAD,CANnB,EAhBJ,CAyBE,2BACE,SAAS,CAAEpB,YAAY,CAAC,SAAD,CAAY,CACjCL,SAAS,CAAC,CAAE0C,IAAI,CAAE,MAAR,CAAgBE,SAAS,CAAE,QAA3B,CAAqCD,GAAG,CAAE,KAA1C,CAAD,CADwB,CAAZ,CADzB,EAKGvB,CAAQ,EACP,oBAAC,IAAD,EACE,SAAS,CAAEf,YAAY,CAAC,UAAD,CADzB,CAEE,IAAI,CAAEK,WAAW,CAACe,CAAD,CAFnB,CAGE,IAAI,CAAC,SAHP,CAIE,UAAU,CAAC,IAJb,EAMGL,CANH,CANJ,CAeGI,CAAe,EAAI,CAACL,CAApB,EACC,oBAAC,IAAD,EACE,SAAS,CAAEd,YAAY,CAAC,iBAAD,CADzB,CAEE,IAAI,CAAEM,kBAAkB,CAACc,CAAD,CAF1B,CAGE,UAAU,CAAC,IAHb,CAIE,IAAI,CAAC,OAJP,EAMGD,CANH,CAhBJ,CAyBGF,CAAW,EAAIH,CAAf,EACC,oBAAC,IAAD,EACE,SAAS,CAAEd,YAAY,CAAC,aAAD,CADzB,CAEE,IAAI,CAAEM,kBAAkB,CAACc,CAAD,CAF1B,CAGE,UAAU,CAAC,IAHb,CAIE,IAAI,CAAC,OAJP,EAMGF,CAAe,WACTD,CADS,aACMC,CADN,gBAETD,CAFS,OANlB,CA1BJ,CAqCGD,CAAS,EACR,oBAAC,IAAD,EACE,SAAS,CAAEhB,YAAY,CAAC,WAAD,CADzB,CAEE,IAAI,CAAEM,kBAAkB,CAACc,CAAD,CAF1B,CAGE,UAAU,CAAC,IAHb,CAIE,IAAI,CAAC,OAJP,EAMGJ,CANH,CAtCJ,CAzBF,CAyEGgB,CAAW,EACV,2BACE,SAAS,CAAEhC,YAAY,CAAC,SAAD,CAAY,CACjCL,SAAS,CAAC,CAAE0C,IAAI,CAAE,MAAR,CAAgBC,GAAG,CAAE,IAArB,CAAD,CADwB,CAAZ,CADzB,EAKGhB,CAAO,CAACkB,GAAR,CAAY,SAACC,CAAD,CAASC,CAAT,QACX,qBAAC,MAAD,EACE,GAAG,CAAED,CAAM,CAACX,KAAP,EAAgBY,CADvB,CAEE,SAAS,CAAE1C,YAAY,CAAC,QAAD,CAFzB,CAGE,QAAQ,CAAE,CAAC,CAHb,CAIE,QAAQ,GAJV,CAKE,QAAQ,CAAEyC,CAAM,CAACZ,IALnB,CAME,OAAO,CAAEY,CAAM,CAACpB,OANlB,CAOE,KAAK,CAAEoB,CAAM,CAACX,KAPhB,CAQE,GAAG,CAAEW,CAAM,CAAChC,GARd,CASE,IAAI,CAAC,IATP,CAUE,IAAI,CAAC,OAVP,EADW,CAAZ,CALH,CA1EJ,CAiGH,CAtIkC,C,CAwInC,OAASF,UAAT,CAAqBP,YAArB"}