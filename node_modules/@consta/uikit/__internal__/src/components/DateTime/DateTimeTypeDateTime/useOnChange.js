import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import{getHours,getMinutes,getSeconds,set,startOfDay,startOfToday}from"date-fns";import{useCallback,useEffect}from"react";import{useMutableRef}from"../../../hooks/useMutableRef/useMutableRef";import{getFirstValidDateTime}from"../DateTimeTypeTime/helpers";import{getDisableDatesKey}from"../helpers/getDisableDatesKey";import{getTimeOptionsKey}from"../helpers/getTimeOptionsKey";var getTime=function(a){return a?[getHours(a),getMinutes(a),getSeconds(a)]:[0,0,0]};export var useOnChange=function(a,b,c,d,e,f,g,h){var i=void 0!==c&&Array.isArray(c),j=i?c["start"===d?0:1]:c,k=useMutableRef(i?j:void 0),l=useMutableRef(a),m=useMutableRef(b),n=useCallback(function(a){var b=startOfDay(a||startOfToday()),c=getFirstValidDateTime(b,e,f,g,h);return c},[getTimeOptionsKey(e),null===f||void 0===f?void 0:f.getTime(),null===g||void 0===g?void 0:g.getTime(),getDisableDatesKey(h)]),o=function(a,b){if(!b)return a;var c=getTime(b),d=_slicedToArray(c,3),e=d[0],f=d[1],g=d[2],h=_slicedToArray(a,2),i=h[0],j=h[1],k=i?set(i,{hours:e,minutes:f,seconds:g}):i,l=j?set(j,{hours:e,minutes:f,seconds:g}):j;return[k,l]},p=useCallback(function(a,b){var c,d=b.e,e=n(a);null===(c=l.current)||void 0===c?void 0:c.call(l,e,{e:d})},[n]),q=useCallback(function(a,b){var c,f=b.e,e=a,g="start"===d?e[0]:e[1],h=k.current||void 0,i=(null===g||void 0===g?void 0:g.getTime())!==(null===h||void 0===h?void 0:h.getTime()),j=i?n(g):g,l=o(e,j);null===(c=m.current)||void 0===c?void 0:c.call(m,l,{e:f})},[d,n]),r=useCallback(function(a,b){var c,d=b.e;null===(c=l.current)||void 0===c?void 0:c.call(l,a,{e:d})},[]);return useEffect(function(){k.current=i?j:void 0},[i,null===j||void 0===j?void 0:j.getTime()]),[p,q,r,j]};
//# sourceMappingURL=useOnChange.js.map