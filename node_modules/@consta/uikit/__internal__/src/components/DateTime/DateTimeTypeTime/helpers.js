import _slicedToArray from"@babel/runtime/helpers/slicedToArray";function _createForOfIteratorHelper(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){throw a}),f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=c.call(a)},n:function n(){var a=c.next();return g=a.done,a},e:function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){h=!0,f=a}),f:function f(){try{g||null==c["return"]||c["return"]()}finally{if(h)throw f}}}}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}import{addHours,addMinutes,addSeconds,endOfHour,endOfMinute,endOfSecond,set,startOfDay,startOfHour,startOfMinute,startOfSecond,startOfToday}from"date-fns";import{useMemo}from"react";import{useMutableRef}from"../../../hooks/useMutableRef/useMutableRef";import{isDisableDate,isInMinMaxDate}from"../../../utils/date";import{getLabelHours,getLabelMinutes,getLabelSeconds,getTimeNumbers}from"../helpers";import{getTimeOptionsKey}from"../helpers/getTimeOptionsKey";export var dateTimeTimePropLocaleDefault={hours:"\u0427\u0430\u0441",minutes:"\u041C\u0438\u043D",seconds:"\u0421\u0435\u043A"};var getItemData=function(a,b,c,d,e,f,g,h,i,j,k){var l=getTimeNumbers(a,g);if(0===l.length)return[];var m=b(h||startOfToday());return l.map(function(b){var g=e(m,b),l=f(g),n=!!h&&f(g)===f(h),o=!isInMinMaxDate(g,i,j,c,d)||isDisableDate({date:g,disableDates:k,mode:"time",timeType:a});return{label:l,date:g,selected:n,disabled:o}})},buildUnitItems=function(a,b,c,d,e,f){return"hours"===a?getItemData("hours",startOfDay,startOfHour,endOfHour,addHours,getLabelHours,c,b,d,e,f):"minutes"===a?getItemData("minutes",startOfHour,startOfMinute,endOfMinute,addMinutes,getLabelMinutes,c,b,d,e,f):"seconds"===a?getItemData("seconds",startOfMinute,startOfSecond,endOfSecond,addSeconds,getLabelSeconds,c,b,d,e,f):void 0},validateUnit=function(a,b,c,d,e,f){var g,h=buildUnitItems(b,a,f,c,d,e);"hours"===b?g=a.getHours():"minutes"===b?g=a.getMinutes():"seconds"===b?g=a.getSeconds():void 0;var i=h.find(function(a){return parseInt(a.label,10)===g&&!a.disabled});if(i)return i;var j=h.find(function(a){return!a.disabled});return j||null};export var getValidDate=function(a,b,c,d,e){var f=new Date(a),g=validateUnit(f,"hours",c,d,e,null===b||void 0===b?void 0:b.hours);g&&f.setHours(parseInt(g.label,10));var h=validateUnit(f,"minutes",c,d,e,null===b||void 0===b?void 0:b.minutes);h&&f.setMinutes(parseInt(h.label,10));var i=validateUnit(f,"seconds",c,d,e,null===b||void 0===b?void 0:b.seconds);return i&&f.setSeconds(parseInt(i.label,10)),f};export var getFirstValidDateTime=function(a,b,c,d,e){var f=startOfDay(a),g=function(a){return void 0!==a&&(Array.isArray(a)?0===a.length:0===(null===a||void 0===a?void 0:a.step))},h=g(null===b||void 0===b?void 0:b.hours),i=h?[0]:buildUnitItems("hours",f,null===b||void 0===b?void 0:b.hours,c,d,e).filter(function(a){return!a.disabled}).map(function(a){return parseInt(a.label,10)});if(!h&&0===i.length)return f;var j,k=_createForOfIteratorHelper(i);try{for(k.s();!(j=k.n()).done;){var l=j.value,m=set(f,{hours:l}),n=g(null===b||void 0===b?void 0:b.minutes),o=n?[0]:buildUnitItems("minutes",m,null===b||void 0===b?void 0:b.minutes,c,d,e).filter(function(a){return!a.disabled}).map(function(a){return parseInt(a.label,10)});if(n||0!==o.length){var p,q=_createForOfIteratorHelper(o);try{for(q.s();!(p=q.n()).done;){var r=p.value,s=set(m,{minutes:r}),t=g(null===b||void 0===b?void 0:b.seconds),u=t?[0]:buildUnitItems("seconds",s,null===b||void 0===b?void 0:b.seconds,c,d,e).filter(function(a){return!a.disabled}).map(function(a){return parseInt(a.label,10)});if(t||0!==u.length)return set(s,{seconds:u[0]})}}catch(a){q.e(a)}finally{q.f()}}}}catch(a){k.e(a)}finally{k.f()}return f};export var useTimeItems=function(a,b,c,d,f,g){var h=useMutableRef(c),i=useMemo(function(){var c=buildUnitItems("hours",a,null===b||void 0===b?void 0:b.hours,d,f,g),e=buildUnitItems("minutes",a,null===b||void 0===b?void 0:b.minutes,d,f,g),i=buildUnitItems("seconds",a,null===b||void 0===b?void 0:b.seconds,d,f,g),j=function(a){a.disabled||(a.onClick=function(c){var e,i=getValidDate(a.date,b,d,f,g);null===(e=h.current)||void 0===e?void 0:e.call(h,i,{e:c})})};return c.forEach(j),e.forEach(j),i.forEach(j),[c,e,i]},[null===a||void 0===a?void 0:a.getTime(),null===d||void 0===d?void 0:d.getTime(),null===f||void 0===f?void 0:f.getTime(),getTimeOptionsKey(b),g]),j=_slicedToArray(i,3),k=j[0],l=j[1],m=j[2];return[k,l,m]};
//# sourceMappingURL=helpers.js.map