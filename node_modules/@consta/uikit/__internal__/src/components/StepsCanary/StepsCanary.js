import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["size","items","value","getItemLabel","getItemDisabled","getItemIcon","getItemStatus","getItemDescription","onChange","className","style","withNumber","labelWordWrap","fitMode"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./Steps.css";import{IconArrowLeft}from"@consta/icons/IconArrowLeft";import React,{forwardRef,useCallback,useEffect,useRef}from"react";import{Button}from"../Button";import{useChoiceGroup}from"../../hooks/useChoiceGroup/useChoiceGroup";import{useMutableRef}from"../../hooks/useMutableRef";import{useOverflow}from"../../hooks/useOverflow/useOverflow";import{useScrollElements}from"../../hooks/useScrollElements/useScrollElements";import{cnMixScrollBar}from"../../mixs/MixScrollBar";import{cnCanary}from"../../utils/bem";import{withDefaultGetters}from"./helper";import{StepsStep}from"./StepsItem";export var cnSteps=cnCanary("Steps");var StepsRender=function(a,b){var c=withDefaultGetters(a),d=c.size,e=void 0===d?"m":d,f=c.items,g=c.value,h=c.getItemLabel,i=c.getItemDisabled,j=c.getItemIcon,k=c.getItemStatus,l=c.getItemDescription,m=c.onChange,n=c.className,o=c.style,p=c.withNumber,q=c.labelWordWrap,r=c.fitMode,s=void 0===r?"scroll":r,t=_objectWithoutProperties(c,_excluded),u=useRef(null),v=useScrollElements(f,u),w=v.refs,x=v.scrollTo,y=useChoiceGroup({value:g,getKey:h,callBack:m,multiple:!1}),z=y.getOnChange,A=y.getChecked,B=f.findIndex(A),C=useMutableRef([B,z,i]),D=useOverflow({currentRef:u})&&"scrollWithButtons"===s,E=useCallback(function(a){var b=_slicedToArray(C.current,3),c=b[0],d=b[1],e=b[2],g=c-1;0<=g&&!e(f[g])&&(null===d||void 0===d?void 0:d(f[g])(a))},[]),F=useCallback(function(a){var b=_slicedToArray(C.current,3),c=b[0],d=b[1],e=b[2],g=c+1;g<=f.length-1&&!e(f[g])&&(null===d||void 0===d?void 0:d(f[g])(a))},[]);return useEffect(function(){x(B)},[B]),React.createElement("div",Object.assign({},t,{ref:b,className:cnSteps({size:e},[n]),style:_objectSpread(_objectSpread({},o),{},_defineProperty({},"--steps-items-length",f.length))}),D&&React.createElement(Button,{className:cnSteps("ScrollButton",{position:"left"}),iconLeft:IconArrowLeft,view:"clear",onlyIcon:!0,size:"xs",type:"button",onClick:E}),React.createElement("div",{ref:u,className:cnSteps("List",[cnMixScrollBar({invisible:!0})])},f.map(function(a,b){return React.createElement(StepsStep,{key:b,ref:w[b],className:cnSteps("Item"),label:h(a),number:b+1,withNumber:p,size:e,active:B===b,onChange:z(a),disabled:i(a),status:k(a),description:l(a),labelWordWrap:q,icon:j(a)})})),D&&React.createElement(Button,{className:cnSteps("ScrollButton",{position:"right"}),iconLeft:IconArrowLeft,view:"clear",onlyIcon:!0,size:"xs",type:"button",onClick:F}))};export var Steps=forwardRef(StepsRender);export*from"./types";
//# sourceMappingURL=StepsCanary.js.map