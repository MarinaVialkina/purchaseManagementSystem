import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import{useAction,useAtom,useUpdate}from"@reatom/npm-react";import{useEffect,useRef}from"react";import{useTheme}from"../Theme";import{useForkRef}from"../../hooks/useForkRef";import{useGlobalKeys}from"../../hooks/useGlobalKeys";import{getElementHeight}from"../../hooks/useResizeObserved";import{useCreateAtom}from"../../utils/state/useCreateAtom";import{useElementAtomEventListener}from"../../utils/state/useElementAtomEventListener";import{useRefAtom}from"../../utils/state/useRefAtom";import{useResizeObservedAtom}from"../../utils/state/useResizeObservedAtom";export var useModal=function(a){var b=a.ref,c=a.isOpen,d=a.onEsc,e=a.onOpen,f=a.onClose,g=a.ignoreOutsideClicksRefs,h=useRef(null),i=useRef(null),j=useRefAtom(),k=_slicedToArray(j,2),l=k[0],m=k[1],n=useRefAtom(),o=_slicedToArray(n,2),p=o[0],q=o[1],r=useRefAtom(),s=_slicedToArray(r,2),t=s[0],u=s[1],v=useForkRef([h,m,b]),w=useTheme(),x=w.theme,y=useCreateAtom(0),z=useAction(function(a){var b;return y(a,(null===(b=a.get(t))||void 0===b?void 0:b.scrollTop)||0)}),A=useAtom(function(a){return 0<a.spy(y)}),B=_slicedToArray(A,1),C=B[0],D=useResizeObservedAtom(useCreateAtom(function(a){return[a.spy(t)]}),function(a){return[(null===a||void 0===a?void 0:a.scrollHeight)||0,(null===a||void 0===a?void 0:a.clientHeight)||0]}),E=useAtom(function(a){var b=a.spy(y),c=a.spy(D),d=_slicedToArray(c,1),e=d[0];e=void 0===e?[0,0]:e;var f=_slicedToArray(e,2),g=f[0],h=f[1];return b<g-h}),F=_slicedToArray(E,1),G=F[0],H=useResizeObservedAtom(useCreateAtom(function(a){return[a.spy(l),a.spy(p)]}),getElementHeight),I=useAtom(function(a){var b=a.spy(H),c=_slicedToArray(b,2),d=c[0],e=void 0===d?0:d,f=c[1],g=void 0===f?0:f;return e<g}),J=_slicedToArray(I,1),K=J[0];return useElementAtomEventListener(t,"scroll",z),useUpdate(z,[t]),useEffect(function(){c?null===e||void 0===e?void 0:e():null===f||void 0===f?void 0:f()},[c]),useGlobalKeys({Escape:function Escape(a){return c&&d&&d(a)}}),{shadowHeader:C,shadowFooter:G,scrollable:K,theme:x,portalRef:i,windowRef:v,contentRef:q,scrollRef:u,windowElAtom:l,ignoreOutsideClicksRefs:[].concat(_toConsumableArray(g||[]),[h])}};
//# sourceMappingURL=useModal.js.map