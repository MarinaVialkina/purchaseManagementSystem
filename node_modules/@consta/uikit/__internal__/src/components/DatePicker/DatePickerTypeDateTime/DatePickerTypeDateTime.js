import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["events","dateTimeView","locale","dropdownForm","dropdownClassName","dropdownRef","currentVisibleDate","onChangeCurrentVisibleDate","timeOptions","renderAdditionalControls","onDropdownOpen","dropdownOpen","ignoreOutsideClicksRefs","disabled","inputRef","disableDates","dropdownViewportRef"];import addMonths from"date-fns/addMonths";import startOfMonth from"date-fns/startOfMonth";import React,{forwardRef,useEffect,useRef}from"react";import{useClickOutside}from"../../../hooks/useClickOutside/useClickOutside";import{useForkRef}from"../../../hooks/useForkRef";import{setRef}from"../../../utils/setRef";import{DatePickerDropdown}from"../DatePickerDropdown/DatePickerDropdown";import{DatePickerFieldTypeDateTime}from"../DatePickerFieldTypeDateTime/DatePickerFieldTypeDateTime";import{datePickerPropFormatTypeDateTime,getDropdownZIndex,getTimeOptionsByFormat}from"../helpers";import{useCalendarVisible}from"../useCalendarVisible";import{useCurrentVisibleDate}from"../useCurrentVisibleDate";export var DatePickerTypeDateTime=forwardRef(function(a,b){var c=a.events,d=a.dateTimeView,e=a.locale,f=a.dropdownForm,g=a.dropdownClassName,h=a.dropdownRef,i=a.currentVisibleDate,j=a.onChangeCurrentVisibleDate,k=a.timeOptions,l=a.renderAdditionalControls,m=a.onDropdownOpen,n=a.dropdownOpen,o=a.ignoreOutsideClicksRefs,p=a.disabled,q=a.inputRef,r=a.disableDates,s=a.dropdownViewportRef,t=_objectWithoutProperties(a,_excluded),u=getTimeOptionsByFormat(t.format||datePickerPropFormatTypeDateTime,k),v=useRef(null),w=useRef(null),x=useRef(null),y=useCalendarVisible({dropdownOpen:n,onDropdownOpen:m,disabled:p,startRef:x}),z=_slicedToArray(y,2),A=z[0],B=z[1],C=useCurrentVisibleDate({currentVisibleDate:i,maxDate:a.maxDate,minDate:a.minDate,value:a.value,startOfUnit:startOfMonth,onChangeCurrentVisibleDate:j,calendarVisible:A}),D=_slicedToArray(C,2),E=D[0],F=D[1];return useEffect(function(){b&&setRef(b,v.current)},[b,v]),useEffect(function(){if(a.value&&"classic"===d&&E){var b=startOfMonth(a.value);return void(b.getTime()!==E.getTime()&&F(b))}if(a.value&&"classic"!==d&&E){var c=startOfMonth(a.value);c.getTime()!==E.getTime()&&c.getTime()!==addMonths(E,1).getTime()&&F(c)}},[a.value]),useClickOutside({isActive:A,ignoreClicksInsideRefs:[v,w].concat(_toConsumableArray(null!==o&&void 0!==o?o:[])),handler:B.off}),React.createElement(React.Fragment,null,React.createElement(DatePickerFieldTypeDateTime,Object.assign({},t,{ref:v,inputRef:useForkRef([x,q]),onClick:B.on,timeOptions:u,disabled:p})),React.createElement(DatePickerDropdown,{ref:useForkRef([h,w]),viewportRef:s,anchorRef:v,isOpen:A,value:a.value||void 0,type:"date-time",view:"classic",events:c,className:g,locale:e,minDate:a.minDate,maxDate:a.maxDate,currentVisibleDate:E,form:f,onChange:a.onChange,renderAdditionalControls:l,onChangeCurrentVisibleDate:F,timeOptions:u,zIndex:getDropdownZIndex(a.style),disableDates:r}))});
//# sourceMappingURL=DatePickerTypeDateTime.js.map