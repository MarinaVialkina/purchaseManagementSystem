{"version":3,"file":"Tooltip.js","names":["React","forwardRef","useMemo","useRef","useState","Transition","useForkRef","animateTimeout","cnMixPopoverAnimate","cnMixPopoverArrow","cn","Popover","Text","generateDeps","generateThemeClassNames","ThemeContext","useTheme","tooltipPropSizesDefault","cnTooltip","ARROW_SIZE","ARROW_OFFSET","Tooltip","props","ref","isOpen","size","status","onSetDirectionProp","onSetDirection","offset","style","className","children","viewportRef","container","otherProps","contentRef","contentForkedRef","theme","direction","setDirection","value","tooltipTheme","color","primary","accent","invert","themeClassNames","animate"],"sources":["../../../../../src/components/Tooltip/Tooltip.tsx"],"sourcesContent":["import './Tooltip.css';\n\nimport React, { forwardRef, useMemo, useRef, useState } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { animateTimeout, cnMixPopoverAnimate } from '##/mixs/MixPopoverAnimate';\nimport { cnMixPopoverArrow } from '##/mixs/MixPopoverArrow/MixPopoverArrow';\nimport { cn } from '##/utils/bem';\n\nimport { Direction, Popover } from '../Popover';\nimport { Text } from '../Text';\nimport {\n  generateDeps,\n  generateThemeClassNames,\n  ThemeContext,\n  useTheme,\n} from '../Theme';\nimport { TooltipProps, tooltipPropSizesDefault } from './types';\n\nconst cnTooltip = cn('Tooltip');\n\nconst ARROW_SIZE = 6;\nconst ARROW_OFFSET = 8;\n\nexport const Tooltip = forwardRef<HTMLDivElement, TooltipProps>(\n  (props, ref) => {\n    const {\n      isOpen,\n      size = tooltipPropSizesDefault,\n      status,\n      onSetDirection: onSetDirectionProp,\n      offset = 0,\n      style,\n      className,\n      children,\n      viewportRef,\n      container,\n      ...otherProps\n    } = props;\n\n    const contentRef = useRef(null);\n    const contentForkedRef = useForkRef([contentRef, ref]);\n\n    const { theme } = useTheme();\n\n    const [direction, setDirection] = useState<Direction | undefined>();\n\n    const onSetDirection = (direction: Direction) => {\n      onSetDirectionProp?.(direction);\n      setDirection(direction);\n    };\n\n    const value = useMemo(() => {\n      const tooltipTheme = {\n        ...theme,\n        color: {\n          primary: status ? theme.color.accent : theme.color.invert,\n          accent: theme.color.accent,\n          invert: theme.color.primary,\n        },\n      };\n      return {\n        theme: tooltipTheme,\n        themeClassNames: generateThemeClassNames(tooltipTheme),\n      };\n    }, [generateDeps(theme), status]);\n\n    return (\n      <Transition\n        in={isOpen}\n        unmountOnExit\n        timeout={animateTimeout}\n        nodeRef={contentRef}\n      >\n        {(animate) => (\n          <ThemeContext.Provider value={value}>\n            <Popover\n              {...otherProps}\n              arrowOffset={ARROW_OFFSET + ARROW_SIZE}\n              offset={ARROW_SIZE + ARROW_OFFSET / 2 + offset}\n              onSetDirection={onSetDirection}\n              ref={contentForkedRef}\n              viewportRef={viewportRef}\n              container={container}\n              className={cnTooltip({ status }, [\n                className,\n                cnMixPopoverAnimate({ animate }),\n              ])}\n              style={{\n                ['--popover-arrow-size' as string]: `${ARROW_SIZE}px`,\n                ['--popover-arrow-offset' as string]: `${ARROW_OFFSET}px`,\n                ...style,\n              }}\n            >\n              <div className={cnTooltip('Background')} />\n              <div\n                className={cnTooltip('Arrow', [\n                  cnMixPopoverArrow({ direction }),\n                ])}\n              />\n              <div className={cnTooltip('Content', { size })}>\n                {typeof children === 'string' ||\n                typeof children === 'number' ? (\n                  <Text view=\"primary\" size=\"m\" lineHeight=\"m\">\n                    {children}\n                  </Text>\n                ) : (\n                  children\n                )}\n              </div>\n            </Popover>\n          </ThemeContext.Provider>\n        )}\n      </Transition>\n    );\n  },\n);\n"],"mappings":"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"}