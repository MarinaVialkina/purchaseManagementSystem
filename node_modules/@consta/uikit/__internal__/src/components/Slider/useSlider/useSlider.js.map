{"version":3,"file":"useSlider.js","names":["useCallback","useEffect","useMemo","useRef","useState","useClickOutside","useComponentSize","useMutableRef","getActiveValue","getNewValue","getValidValue","getValueByPosition","isNotRangeParams","isRangeParams","trackPosition","valueToString","COUNT_STEPS","useSlider","props","disabled","range","value","min","max","step","onChange","onAfterChange","sliderRef","containerRef","buttonRefs","minValue","maxValue","dragStepValue","Array","isArray","val","Math","abs","currentValue","setCurrentValue","leftPopover","setLeftPopover","rightPopover","setRightPopover","currentButton","setCurrentButton","activeButton","sizeSlider","currentValueRef","onChangeRef","onAfterChangeRef","isActive","ignoreClicksInsideRefs","handler","current","controlListeners","type","method","document","handleRelease","handleTouchMove","setTooltipPosition","newValue","targetValue","onKeyPress","event","typeButton","stepIncrement","validKeyCode","changedValue","key","preventDefault","stopPropagation","forEach","stepPoint","index","e","position","button","getBoundingClientRect","x","width","newPosition","y","offsetTop","offsetHeight","changePosition","positionValue","oldValue","copyValues","sort","a","b","handlePress","onFocus","onSliderClick","pageX","pageY","popoverPosition"],"sources":["../../../../../../src/components/Slider/useSlider/useSlider.ts"],"sourcesContent":["import React, {\n  MutableRefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { useClickOutside } from '##/hooks/useClickOutside';\nimport { useComponentSize } from '##/hooks/useComponentSize/useComponentSize';\nimport { useMutableRef } from '##/hooks/useMutableRef/useMutableRef';\n\nimport { SliderValue, TrackPosition } from '../helper';\nimport {\n  ActiveButton,\n  getActiveValue,\n  getNewValue,\n  getValidValue,\n  getValueByPosition,\n  isNotRangeParams,\n  isRangeParams,\n  trackPosition,\n  UseSliderProps,\n  UseSliderValues,\n  valueToString,\n} from './helper';\n\nexport const COUNT_STEPS = 250;\n\nexport function useSlider<RANGE extends boolean>(\n  props: UseSliderProps<RANGE>,\n): UseSliderValues {\n  const {\n    disabled,\n    range,\n    value,\n    min,\n    max,\n    step = 1,\n    onChange,\n    onAfterChange,\n    sliderRef,\n    containerRef,\n    buttonRefs,\n  } = props;\n\n  const minValue = max > min ? min : 0;\n  const maxValue = max > min ? max : 100;\n\n  const dragStepValue = useMemo(() => {\n    if (!Array.isArray(step)) {\n      if (step >= 1) {\n        const val = Math.abs((maxValue - minValue) / COUNT_STEPS);\n        if (val > step) {\n          return val - (val % step);\n        }\n        return Math.max(val, step);\n      }\n    }\n    return step;\n  }, [max, min, step]);\n\n  const [currentValue, setCurrentValue] = useState<number | [number, number]>(\n    value,\n  );\n  const [leftPopover, setLeftPopover] = useState<TrackPosition>(null);\n  const [rightPopover, setRightPopover] = useState<TrackPosition>(null);\n  const [currentButton, setCurrentButton] = useState<ActiveButton | null>(null);\n\n  const activeButton: MutableRefObject<ActiveButton | null> = useRef(null);\n\n  const sizeSlider = useComponentSize(sliderRef);\n\n  const currentValueRef = useMutableRef(currentValue);\n  const onChangeRef = useMutableRef(onChange);\n  const onAfterChangeRef = useMutableRef(onAfterChange);\n\n  useClickOutside({\n    isActive: true,\n    ignoreClicksInsideRefs: [containerRef],\n    handler: () => {\n      setCurrentButton(null);\n      activeButton.current = null;\n    },\n  });\n\n  useEffect(() => {\n    if (disabled) {\n      controlListeners('remove');\n    }\n  }, [disabled]);\n\n  const controlListeners = (type: 'add' | 'remove') => {\n    const method = type === 'add' ? 'addEventListener' : 'removeEventListener';\n    document[method]('mouseup', handleRelease);\n    document[method]('touchend', handleRelease);\n    document[method]('mousemove', handleTouchMove);\n    document[method]('touchmove', handleTouchMove);\n  };\n\n  useEffect(() => {\n    if (Array.isArray(currentValue)) {\n      setTooltipPosition(currentValue[0], 0);\n      setTooltipPosition(currentValue[1], 1);\n    } else {\n      setTooltipPosition(currentValue, 0);\n    }\n  }, [currentValue]);\n\n  useEffect(() => {\n    if (valueToString(value) !== valueToString(currentValue)) {\n      setCurrentValue(value);\n      setTooltipPosition(getActiveValue(value, activeButton.current), 0);\n      setCurrentButton(null);\n      activeButton.current = null;\n    }\n  }, [value]);\n\n  useEffect(() => {\n    const newValue = Array.isArray(currentValue)\n      ? ([\n          getNewValue(currentValue[0], currentValue[0], step, min, max, 0),\n          getNewValue(currentValue[1], currentValue[1], step, min, max, 1),\n        ] as SliderValue<RANGE>)\n      : (getNewValue(\n          currentValue,\n          currentValue,\n          step,\n          min,\n          max,\n          0,\n        ) as SliderValue<RANGE>);\n    if (valueToString(newValue) !== valueToString(currentValue)) {\n      onChangeRef.current?.(newValue, {});\n    }\n  }, [step]);\n\n  useEffect(() => {\n    if (typeof value !== 'undefined') {\n      const targetValue = isRangeParams(props)\n        ? ([\n            getValidValue(props.value[0], min, max, step),\n            getValidValue(props.value[1], min, max, step),\n          ] as [number, number])\n        : getValidValue(props.value as number, min, max, step);\n\n      setCurrentValue(targetValue);\n    }\n  }, [range, typeof value]);\n\n  useEffect(() => {\n    if (isRangeParams(props) && props.value[0] > props.value[1]) {\n      const newValue: SliderValue<true> = [props.value[1], props.value[1]];\n      onChangeRef.current?.(newValue as SliderValue<RANGE>, {});\n    }\n  }, []);\n\n  const onSliderClick = (e: React.MouseEvent) => {\n    if (isNotRangeParams(props) && !disabled) {\n      const positionValue = getValueByPosition(\n        { x: e.pageX, y: e.pageY },\n        sliderRef,\n        minValue,\n        maxValue,\n        step,\n      );\n      const newValue = getNewValue(\n        positionValue,\n        currentValue,\n        dragStepValue,\n        min,\n        max,\n        activeButton.current,\n      ) as SliderValue<RANGE>;\n      if (newValue !== value) {\n        setCurrentValue(newValue);\n        setTooltipPosition(getActiveValue(newValue, 0), 0);\n        onChangeRef.current?.(newValue, {\n          e,\n        });\n      }\n    }\n  };\n\n  const onKeyPress = useCallback(\n    (event: React.KeyboardEvent, typeButton: ActiveButton) => {\n      if (\n        !disabled &&\n        typeof typeButton === 'number' &&\n        typeof currentValue !== 'undefined'\n      ) {\n        let stepIncrement = !Array.isArray(step) ? step || 1 : 1;\n        let validKeyCode = false;\n        const changedValue = getActiveValue(currentValue, typeButton);\n        switch (event.key) {\n          case 'ArrowUp':\n          case 'ArrowRight':\n          case '+':\n            validKeyCode = true;\n            break;\n          case 'ArrowLeft':\n          case 'ArrowDown':\n          case '-':\n            validKeyCode = true;\n            stepIncrement *= -1;\n            break;\n          default:\n            break;\n        }\n        if (validKeyCode) {\n          event.preventDefault();\n          event.stopPropagation();\n          if (Array.isArray(step)) {\n            step.forEach((stepPoint, index) => {\n              if (\n                typeof typeButton === 'number' &&\n                changedValue === stepPoint\n              ) {\n                if (stepIncrement >= 0) {\n                  if (index === 0) {\n                    stepIncrement = step[1] - minValue;\n                  } else {\n                    stepIncrement =\n                      (typeof step[index + 1] !== 'undefined'\n                        ? step[index + 1]\n                        : maxValue) - stepPoint;\n                  }\n                } else if (index === 0) {\n                  stepIncrement = minValue - step[1];\n                } else {\n                  stepIncrement =\n                    (typeof step[index - 1] !== 'undefined'\n                      ? step[index - 1]\n                      : minValue) - stepPoint;\n                }\n              }\n            });\n          }\n          const newValue = getNewValue(\n            changedValue + stepIncrement,\n            currentValue,\n            step,\n            min,\n            max,\n            typeButton,\n          ) as SliderValue<RANGE>;\n\n          setCurrentValue(newValue);\n          setTooltipPosition(getActiveValue(newValue, typeButton), typeButton);\n          onChangeRef.current?.(newValue, {\n            e: event,\n          });\n        }\n      }\n    },\n    [currentValue, step, min, max],\n  );\n\n  const setTooltipPosition = (value: number, position: ActiveButton) => {\n    if (sliderRef.current && typeof position === 'number') {\n      const button = buttonRefs[position].current || sliderRef.current;\n      const { x, width } = sliderRef.current.getBoundingClientRect();\n      const newPosition = {\n        y: button.offsetTop + button.offsetHeight + 50,\n        x: x + Math.abs((value - minValue) / (maxValue - minValue)) * width,\n      };\n      if (position === 0) {\n        setLeftPopover(newPosition);\n      } else {\n        setRightPopover(newPosition);\n      }\n    }\n  };\n\n  const changePosition = (event: Event) => {\n    const nativeEvent = event as MouseEvent | TouchEvent;\n    if (typeof activeButton.current !== 'number') {\n      return value;\n    }\n    const position = trackPosition(nativeEvent);\n    const positionValue = getValueByPosition(\n      position,\n      sliderRef,\n      minValue,\n      maxValue,\n      step,\n    );\n    return getNewValue(\n      positionValue,\n      currentValue,\n      dragStepValue,\n      min,\n      max,\n      activeButton.current,\n    );\n  };\n\n  const onFocus = (\n    e: React.FocusEvent | React.MouseEvent,\n    button: ActiveButton,\n  ) => {\n    setCurrentButton(button);\n    activeButton.current = button;\n  };\n\n  const handleTouchMove = (\n    event: MouseEvent | TouchEvent | Event,\n    typeButton?: ActiveButton,\n  ) => {\n    const button = typeButton || activeButton.current;\n    if (typeof button === 'number') {\n      const position = changePosition(event) as SliderValue<RANGE>;\n      const oldValue: number = getActiveValue(currentValue, button);\n      const newValue: number = getActiveValue(position, button);\n      setCurrentValue(position);\n      if (valueToString(oldValue) !== valueToString(newValue)) {\n        onAfterChangeRef.current?.(position, { e: event });\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (isRangeParams(props)) {\n      props.value?.forEach((val, index) => {\n        setTooltipPosition(\n          getActiveValue(val, activeButton.current),\n          index === 0 ? 0 : 1,\n        );\n      });\n    }\n    if (isNotRangeParams(props)) {\n      setTooltipPosition(getActiveValue(value, activeButton.current), 0);\n    }\n    activeButton.current = null;\n  }, [sizeSlider, typeof value]);\n\n  const handleRelease = useCallback(\n    (e: MouseEvent | TouchEvent | Event) => {\n      controlListeners('remove');\n      if (isRangeParams(props) && Array.isArray(currentValueRef.current)) {\n        const copyValues = [...currentValueRef.current].sort(\n          (a, b) => Number(a) - Number(b),\n        ) as SliderValue<true>;\n        onChangeRef.current?.(copyValues as SliderValue<RANGE>, { e });\n      }\n      if (\n        isNotRangeParams(props) &&\n        typeof currentValueRef.current === 'number'\n      ) {\n        onChangeRef.current?.(currentValueRef.current as SliderValue<RANGE>, {\n          e,\n        });\n      }\n      setCurrentButton(null);\n      activeButton.current = null;\n    },\n    [value, handleTouchMove],\n  );\n\n  const handlePress = useCallback(\n    (typeButton: ActiveButton) => {\n      if (!disabled) {\n        setCurrentButton(typeButton);\n        activeButton.current = typeButton;\n        controlListeners('add');\n      }\n    },\n    [currentValue, value, handleTouchMove, disabled],\n  );\n\n  return {\n    onKeyPress,\n    onFocus,\n    handlePress,\n    onSliderClick,\n    activeButton: currentButton,\n    popoverPosition: [leftPopover, rightPopover],\n    currentValue: Array.isArray(currentValue) ? currentValue : [currentValue],\n  };\n}\n"],"mappings":"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"}