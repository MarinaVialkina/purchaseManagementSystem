{"version":3,"file":"PortalWithTheme.js","names":["React","useEffect","useRef","useState","ReactDOM","useForkRef","Theme","PortalWithThemeProvider","usePortalContext","getZIndex","contextZIndex","propZIndex","isRef","ref","getElement","current","PortalWithTheme","forwardRef","children","container","window","document","body","styleProp","style","rest","addRefs","zIndexContext","zIndex","portalContainer","setPortalContainer","themeRef","themeRefForked","createPortal"],"sources":["../../../../../src/components/PortalWithTheme/PortalWithTheme.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { useForkRef } from '../../hooks/useForkRef/useForkRef';\nimport { Theme, ThemeProps } from '../Theme/Theme';\nimport {\n  PortalWithThemeProvider,\n  usePortalContext,\n} from './PortalWithThemeContext/PortalWithThemeContext';\n\nexport { usePortalContext };\n\ntype Props = {\n  container?: Element | React.RefObject<HTMLElement>;\n} & ThemeProps;\n\nconst getZIndex = (contextZIndex?: number, propZIndex?: number | string) => {\n  if (typeof propZIndex === 'number') {\n    return propZIndex;\n  }\n\n  if (contextZIndex) {\n    return contextZIndex + 1;\n  }\n\n  return undefined;\n};\n\nconst isRef = (\n  ref: React.RefObject<HTMLElement> | Element | undefined,\n): ref is React.RefObject<HTMLElement> => !!ref && 'current' in ref;\n\nconst getElement = (ref: React.RefObject<HTMLElement> | Element) =>\n  isRef(ref) ? ref.current : ref;\n\nexport const PortalWithTheme = React.forwardRef<HTMLDivElement, Props>(\n  (\n    { children, container = window.document.body, style: styleProp, ...rest },\n    ref,\n  ) => {\n    const { addRefs, zIndex: zIndexContext } = usePortalContext();\n    const [portalContainer, setPortalContainer] = useState<Element | null>(\n      getElement(container),\n    );\n\n    const themeRef = useRef(null);\n\n    const zIndex = getZIndex(zIndexContext, styleProp?.zIndex);\n\n    const themeRefForked = useForkRef([themeRef, ref]);\n\n    useEffect(() => {\n      addRefs && addRefs([themeRef]);\n    }, [themeRef]);\n\n    useEffect(() => {\n      setPortalContainer(getElement(container));\n    }, [getElement(container)]);\n\n    if (!portalContainer) {\n      return null;\n    }\n\n    return ReactDOM.createPortal(\n      <PortalWithThemeProvider zIndex={zIndex}>\n        <Theme\n          {...rest}\n          ref={themeRefForked}\n          style={{\n            ...styleProp,\n            zIndex,\n          }}\n        >\n          {children}\n        </Theme>\n      </PortalWithThemeProvider>,\n      portalContainer,\n    );\n  },\n);\n"],"mappings":"02BAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,MAAOC,SAAP,KAAqB,WAArB,CAEA,OAASC,UAAT,yCACA,OAASC,KAAT,sBACA,OACEC,uBADF,CAEEC,gBAFF,uDAKA,OAASA,gBAAT,E,GAMMC,UAAS,CAAG,SAACC,CAAD,CAAyBC,CAAzB,CAA0D,OAChD,QAAtB,QAAOA,EAD+D,CAEjEA,CAFiE,CAKtED,CALsE,CAMjEA,CAAa,CAAG,CANiD,OAU3E,C,CAEKE,KAAK,CAAG,SACZC,CADY,QAE4B,CAAC,CAACA,CAAF,EAAS,WAAaA,EAFlD,C,CAIRC,UAAU,CAAG,SAACD,CAAD,QACjBD,MAAK,CAACC,CAAD,CAAL,CAAaA,CAAG,CAACE,OAAjB,CAA2BF,CADV,C,CAGnB,MAAO,IAAMG,gBAAe,CAAGhB,KAAK,CAACiB,UAAN,CAC7B,WAEEJ,CAFF,CAGK,IAFDK,EAEC,GAFDA,QAEC,KAFSC,SAET,CAFSA,CAET,YAFqBC,MAAM,CAACC,QAAP,CAAgBC,IAErC,GAFkDC,CAElD,GAF2CC,KAE3C,CAFgEC,CAEhE,yCACwCjB,gBAAgB,EADxD,CACKkB,CADL,GACKA,OADL,CACsBC,CADtB,GACcC,MADd,GAE2CzB,QAAQ,CACpDW,UAAU,CAACK,CAAD,CAD0C,CAFnD,uBAEIU,CAFJ,MAEqBC,CAFrB,MAMGC,CAAQ,CAAG7B,MAAM,CAAC,IAAD,CANpB,CAQG0B,CAAM,CAAGnB,SAAS,CAACkB,CAAD,QAAgBJ,CAAhB,WAAgBA,CAAhB,QAAgBA,CAAS,CAAEK,MAA3B,CARrB,CAUGI,CAAc,CAAG3B,UAAU,CAAC,CAAC0B,CAAD,CAAWlB,CAAX,CAAD,CAV9B,OAYHZ,UAAS,CAAC,UAAM,CACdyB,CAAO,EAAIA,CAAO,CAAC,CAACK,CAAD,CAAD,CACnB,CAFQ,CAEN,CAACA,CAAD,CAFM,CAZN,CAgBH9B,SAAS,CAAC,UAAM,CACd6B,CAAkB,CAAChB,UAAU,CAACK,CAAD,CAAX,CACnB,CAFQ,CAEN,CAACL,UAAU,CAACK,CAAD,CAAX,CAFM,CAhBN,CAoBEU,CApBF,CAwBIzB,QAAQ,CAAC6B,YAAT,CACL,oBAAC,uBAAD,EAAyB,MAAM,CAAEL,CAAjC,EACE,oBAAC,KAAD,kBACMH,CADN,EAEE,GAAG,CAAEO,CAFP,CAGE,KAAK,gCACAT,CADA,MAEHK,MAAM,CAANA,CAFG,EAHP,GAQGV,CARH,CADF,CADK,CAaLW,CAbK,CAxBJ,CAqBM,IAkBV,CA3C4B,CAAxB"}