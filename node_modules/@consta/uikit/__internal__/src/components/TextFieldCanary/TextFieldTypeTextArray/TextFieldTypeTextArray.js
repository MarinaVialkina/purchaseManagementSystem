import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["className","value","defaultValue","onChange","id","name","inputRef","maxLength","minLength","disabled","size","view","form","status","onBlur","onFocus","autoFocus","placeholder","leftSide","rightSide","autoComplete","clearButton","readOnly","type","tabIndex","ariaLabel","iconSize","onClick","style","inputValue","renderValueItem","onInputChange","onKeyDown","onKeyDownCapture","onKeyUp","onKeyUpCapture","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onClear","onWheel","iconClear"];import React,{forwardRef,useCallback,useEffect,useMemo,useRef}from"react";import{FieldArrayValueInlineControl,FieldArrayValueItem,FieldClearButton,FieldControlLayout,renderSide}from"../../FieldComponents";import{useComponentSize}from"../../../hooks/useComponentSize";import{useForkRef}from"../../../hooks/useForkRef";import{useKeys}from"../../../hooks/useKeys";import{useMutableRef}from"../../../hooks/useMutableRef";import{cnMixScrollBar}from"../../../mixs/MixScrollBar";import{useTextField}from"../useTextField";import{cnTextFieldTypeTextArray}from"./cnTextFieldTypeTextArray";var defaultRenderValueItem=function(a){var b=a.item,c=a.index,d=a.size,e=a.disabled,f=a.onRemove;return React.createElement(FieldArrayValueItem,{key:c,size:d,label:b,disabled:e,onRemove:f})};export var TextFieldTypeTextArray=forwardRef(function(a,b){var c=a.className,d=a.value,e=a.defaultValue,f=a.onChange,g=a.id,h=a.name,i=a.inputRef,j=a.maxLength,k=a.minLength,l=a.disabled,m=a.size,n=void 0===m?"m":m,o=a.view,p=void 0===o?"default":o,q=a.form,r=a.status,s=a.onBlur,t=a.onFocus,u=a.autoFocus,v=a.placeholder,w=a.leftSide,x=a.rightSide,y=a.autoComplete,z=a.clearButton,A=a.readOnly,B=a.type,C=a.tabIndex,D=a.ariaLabel,E=a.iconSize,F=a.onClick,G=a.style,H=a.inputValue,I=a.renderValueItem,J=void 0===I?defaultRenderValueItem:I,K=a.onInputChange,L=a.onKeyDown,M=a.onKeyDownCapture,N=a.onKeyUp,O=a.onKeyUpCapture,P=a.onCopy,Q=a.onCopyCapture,R=a.onCut,S=a.onCutCapture,T=a.onPaste,U=a.onPasteCapture,V=a.onClear,W=a.onWheel,X=a.iconClear,Y=_objectWithoutProperties(a,_excluded),Z=useTextField({onClick:F,onChange:K,onBlur:s,onFocus:t,disabled:l,onClear:void 0}),$=Z.handleBlur,_=Z.handleChange,aa=Z.handleClear,ba=Z.handleFocus,ca=Z.focused,da=Z.withValue,ea=Z.ref,fa=Z.inputRef,ga=Z.handleClick,ha=da||!!(null!==d&&void 0!==d&&d.length),ia=useRef(null),ja=useRef(null),ka=useMutableRef([f,aa,d]),la=function(a){return function(b){if(null!==d&&void 0!==d&&d.length){var c=_toConsumableArray(d);c.splice(a,1),null===f||void 0===f?void 0:f(c.length?c:null,{e:b})}}},ma=useCallback(function(a){var b;if(ka.current[1](a),null!==(b=ka.current[2])&&void 0!==b&&b.length){var c,d;null===(c=(d=ka.current)[0])||void 0===c?void 0:c.call(d,null,{e:a})}},[]),na=useMemo(function(){return{Enter:function Enter(a){var b,c=null===(b=fa.current)||void 0===b?void 0:b.value;if(c){var d,e;null===(d=(e=ka.current)[0])||void 0===d?void 0:d.call(e,[].concat(_toConsumableArray(ka.current[2]||[]),[c]),{e:a}),ia.current&&"function"==typeof ia.current.scrollTo&&ia.current.scrollTo({top:ia.current.scrollHeight})}},Backspace:function Backspace(a){var b,c=null===(b=fa.current)||void 0===b?void 0:b.value,d=ka.current[2];if(!c&&null!==d&&void 0!==d&&d.length){var e,f;a.preventDefault();var g=_toConsumableArray(d);g.pop(),null===(e=(f=ka.current)[0])||void 0===e?void 0:e.call(f,g,{e:a})}}}},[]),oa=useKeys({isActive:!!f,keys:na,onEvent:L}),pa=useComponentSize(ia);return useEffect(function(){ia.current&&ja.current&&ca&&ja.current.scrollTo({top:pa.height})},[pa.height]),useEffect(function(){fa.current&&fa.current.value!==H&&(fa.current.value=H||"")},[H,fa.current]),React.createElement(FieldControlLayout,Object.assign({},Y,{className:cnTextFieldTypeTextArray({withValue:ha},[c]),form:q,status:r,size:n,leftSide:renderSide(w,n,E),rightSide:[z&&!l&&ha&&React.createElement(FieldClearButton,{size:n,onClick:V||ma,icon:X}),renderSide(x,n,E)],focused:ca,view:p,ref:useForkRef([b,ea]),disabled:l,onClick:ga,style:G}),React.createElement("div",{ref:ja,className:cnTextFieldTypeTextArray("ScrollWrapper",[cnMixScrollBar({size:"xs"})])},React.createElement(FieldArrayValueInlineControl,{size:n,inputRef:useForkRef([fa,i]),value:null!==d&&void 0!==d?d:void 0,onFocus:ba,onBlur:$,onChange:_,autoFocus:u,onKeyDown:oa,ref:ia,placeholder:v,renderValue:function renderValue(a){return a.map(function(a,b){return J({item:a,index:b,size:n,disabled:l,onRemove:la(b)})})},onCopy:P,onCopyCapture:Q,onCut:R,onCutCapture:S,onPaste:T,onPasteCapture:U,inputTabIndex:C,onKeyDownCapture:M,onKeyUp:N,onKeyUpCapture:O,onWheel:W,disabled:l,inputValue:H||"",inputMaxLength:j,inputMinLength:k})))});
//# sourceMappingURL=TextFieldTypeTextArray.js.map