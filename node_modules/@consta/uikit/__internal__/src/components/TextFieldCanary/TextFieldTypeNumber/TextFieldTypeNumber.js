import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["className","value","defaultValue","onChange","id","name","inputRef","maxLength","minLength","disabled","size","view","form","status","onBlur","onFocus","autoFocus","placeholder","leftSide","rightSide","autoComplete","clearButton","readOnly","type","tabIndex","ariaLabel","iconSize","onClick","incrementButtons","max","min","step","onKeyDown","onKeyDownCapture","onKeyUp","onKeyUpCapture","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onClear","onWheel","iconClear"];import React,{forwardRef,useCallback,useMemo}from"react";import{FieldClearButton,FieldControlLayout,FieldCounter,FieldInput,renderSide}from"../../FieldComponents";import{useForkRef}from"../../../hooks/useForkRef";import{useKeys}from"../../../hooks/useKeys";import{useMutableRef}from"../../../hooks/useMutableRef/useMutableRef";import{useSortSteps}from"../../../hooks/useSortSteps";import{useTextField}from"../useTextField";import{cnTextFieldTypeNumber}from"./cnTextFieldTypeNumber";import{getValueByStep,stepIsActive}from"./helpers";export var TextFieldTypeNumber=forwardRef(function(a,b){var c=a.className,d=a.value,e=a.defaultValue,f=a.onChange,g=a.id,h=a.name,i=a.inputRef,j=a.maxLength,k=a.minLength,l=a.disabled,m=a.size,n=void 0===m?"m":m,o=a.view,p=void 0===o?"default":o,q=a.form,r=a.status,s=a.onBlur,t=a.onFocus,u=a.autoFocus,v=a.placeholder,w=a.leftSide,x=a.rightSide,y=a.autoComplete,z=a.clearButton,A=a.readOnly,B=a.type,C=a.tabIndex,D=a.ariaLabel,E=a.iconSize,F=a.onClick,G=a.incrementButtons,H=a.max,I=a.min,J=a.step,K=a.onKeyDown,L=a.onKeyDownCapture,M=a.onKeyUp,N=a.onKeyUpCapture,O=a.onCopy,P=a.onCopyCapture,Q=a.onCut,R=a.onCutCapture,S=a.onPaste,T=a.onPasteCapture,U=a.onClear,V=a.onWheel,W=a.iconClear,X=_objectWithoutProperties(a,_excluded),Y=useTextField({onClick:F,onChange:f,onBlur:s,onFocus:t,disabled:l,onClear:U}),Z=Y.handleBlur,$=Y.handleChange,_=Y.handleClear,aa=Y.handleFocus,ba=Y.focused,ca=Y.withValue,da=Y.ref,ea=Y.inputRef,fa=Y.handleClick,ga=Y.mutableRefs,ha=Y.setWithValue,ia=useSortSteps({step:J,min:I,max:H}),ja=useMutableRef([ia,I,H,K,stepIsActive(ia,l),V]),ka=useCallback(function(a,b){var c,d;if(ea.current&&!ga.current[4]){var e=getValueByStep(ja.current[0],ea.current.value,b,ja.current[1],ja.current[2]);null===(c=(d=ga.current)[0])||void 0===c?void 0:c.call(d,e,{e:a}),ea.current.value=e,ha.on()}},[]),la=useCallback(function(a){return ka(a,!0)},[]),ma=useCallback(function(a){return ka(a,!1)},[]),na=useKeys(useMemo(function(){return{isActive:!0,keys:{ArrowUp:function ArrowUp(a){a.preventDefault(),ja.current[4]&&ka(a,!0)},ArrowDown:function ArrowDown(a){a.preventDefault(),ja.current[4]&&ka(a,!1)}},onEvent:ja.current[3]}},[])),oa=useCallback(function(a){if(ja.current[5])ja.current[5](a);else{var b;null===(b=ea.current)||void 0===b?void 0:b.blur()}},[]);return React.createElement(FieldControlLayout,Object.assign({},X,{className:cnTextFieldTypeNumber({incrementButtons:G},[c]),form:q,status:r,size:n,leftSide:renderSide(w,n,E),rightSide:[z&&!l&&ca&&!G&&React.createElement(FieldClearButton,{size:n,onClick:_,icon:W}),G&&ja.current[4]&&React.createElement(FieldCounter,{onIncrementClick:la,onIncrementFocus:aa,onDecrementClick:ma,onDecrementFocus:aa})],focused:ba,view:p,ref:useForkRef([b,da]),disabled:l,onClick:fa}),React.createElement(FieldInput,{className:cnTextFieldTypeNumber("Input"),placeholder:v,autoFocus:u,autoComplete:y,onBlur:Z,onChange:$,onFocus:aa,defaultValue:e||void 0,value:null===d?"":d,ref:useForkRef([i,ea]),readOnly:A,tabIndex:C,"aria-label":D,onKeyDown:na,onKeyDownCapture:L,onKeyUp:M,onKeyUpCapture:N,onWheel:oa,maxLength:j,minLength:k,disabled:l,type:B,max:H,min:I,id:g,name:h,onCopy:O,onCopyCapture:P,onCut:Q,onCutCapture:R,onPaste:S,onPasteCapture:T}))});
//# sourceMappingURL=TextFieldTypeNumber.js.map