{"version":3,"file":"Select.js","names":["IconSelect","React","forwardRef","useRef","usePropsHandler","cnSelect","COMPONENT_NAME","defaultLabelForEmptyItems","SelectContainer","SelectDropdown","SelectItem","defaultPropForm","defaultPropSize","defaultPropView","useSelect","useForkRef","isNotNil","iconSizeMap","withDefaultGetters","SelectRender","props","ref","defaultDropdownRef","controlRef","placeholder","onBlur","onFocus","items","onChange","value","required","disabled","ariaLabel","id","dropdownRef","form","view","size","dropdownClassName","name","groups","getItemLabel","labelForEmptyItems","getItemKey","getItemGroupKey","getItemDisabled","getGroupKey","getGroupLabel","renderItem","isLoading","renderValueProp","renderValue","inputRefProp","inputRef","style","dropdownForm","onDropdownOpen","onScrollToBottom","virtualScroll","dropdownOpen","ignoreOutsideClicksRefs","dropdownViewportRef","restProps","multiple","getKeyProps","getOptionProps","isOpen","visibleItems","isFocused","handleInputFocus","handleInputBlur","handleToggleDropdown","handleInputClick","notFound","hasItems","optionsRefs","inputId","renderValueDefault","label","item","renderItemDefault","active","hovered","onClick","onMouseEnter","zIndex","Select"],"sources":["../../../../../src/components/Select/Select.tsx"],"sourcesContent":["import '##/components/SelectComponents/Select.css';\n\nimport { IconSelect } from '@consta/icons/IconSelect';\nimport React, { forwardRef, useRef } from 'react';\n\nimport { usePropsHandler } from '##/components/EventInterceptor/usePropsHandler';\nimport {\n  cnSelect,\n  COMPONENT_NAME,\n} from '##/components/SelectComponents/cnSelect';\nimport { defaultLabelForEmptyItems } from '##/components/SelectComponents/helpers';\nimport { SelectContainer } from '##/components/SelectComponents/SelectContainer';\nimport { SelectDropdown } from '##/components/SelectComponents/SelectDropdown';\nimport { SelectItem } from '##/components/SelectComponents/SelectItem';\nimport {\n  defaultPropForm,\n  defaultPropSize,\n  defaultPropView,\n} from '##/components/SelectComponents/types';\nimport { useSelect } from '##/components/SelectComponents/useSelect';\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { isNotNil } from '##/utils/type-guards';\n\nimport {\n  iconSizeMap,\n  PropRenderItem,\n  PropRenderValue,\n  SelectComponent,\n  SelectGroupDefault,\n  SelectItemDefault,\n  SelectProps,\n  withDefaultGetters,\n} from './helpers';\n\nconst SelectRender = <ITEM = SelectItemDefault, GROUP = SelectGroupDefault>(\n  props: SelectProps<ITEM, GROUP>,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const defaultDropdownRef = useRef<HTMLDivElement>(null);\n  const controlRef = useRef<HTMLDivElement | null>(null);\n\n  const {\n    placeholder,\n    onBlur,\n    onFocus,\n    items,\n    onChange,\n    value,\n    required,\n    disabled,\n    ariaLabel,\n    id,\n    dropdownRef,\n    form = defaultPropForm,\n    view = defaultPropView,\n    size = defaultPropSize,\n    dropdownClassName,\n    name,\n    groups = [],\n    getItemLabel,\n    labelForEmptyItems = defaultLabelForEmptyItems,\n    getItemKey,\n    getItemGroupKey,\n    getItemDisabled,\n    getGroupKey,\n    getGroupLabel,\n    renderItem,\n    isLoading,\n    renderValue: renderValueProp,\n    inputRef: inputRefProp,\n    style,\n    dropdownForm = 'default',\n    onDropdownOpen,\n    onScrollToBottom,\n    virtualScroll,\n    dropdownOpen,\n    ignoreOutsideClicksRefs,\n    dropdownViewportRef,\n    ...restProps\n  } = usePropsHandler(COMPONENT_NAME, withDefaultGetters(props), controlRef);\n\n  const {\n    getKeyProps,\n    getOptionProps,\n    isOpen,\n    visibleItems,\n    isFocused,\n    handleInputFocus,\n    handleInputBlur,\n    handleToggleDropdown,\n    inputRef,\n    handleInputClick,\n    notFound,\n    hasItems,\n    optionsRefs,\n  } = useSelect<ITEM, GROUP, false>({\n    items,\n    groups,\n    value,\n    onChange,\n    dropdownRef: defaultDropdownRef,\n    controlRef,\n    disabled,\n    getItemLabel,\n    getItemKey,\n    getGroupKey,\n    getItemGroupKey,\n    getItemDisabled,\n    multiple: false,\n    onBlur,\n    onFocus,\n    onDropdownOpen,\n    dropdownOpen,\n    ignoreOutsideClicksRefs,\n  });\n\n  const inputId = id ? `${id}-input` : id;\n\n  const renderItemDefault: PropRenderItem<ITEM> = (props) => {\n    const { item, active, hovered, onClick, onMouseEnter, ref } = props;\n\n    return (\n      <SelectItem\n        label={getItemLabel(item)}\n        active={active}\n        hovered={hovered}\n        multiple={false}\n        size={size}\n        indent={dropdownForm === 'round' ? 'increased' : 'normal'}\n        onClick={onClick}\n        onMouseEnter={onMouseEnter}\n        disabled={getItemDisabled(item)}\n        ref={ref}\n      />\n    );\n  };\n\n  const renderValueDefault: PropRenderValue<ITEM> = (props) => {\n    const label = getItemLabel(props.item);\n\n    return (\n      <span className={cnSelect('ControlValue')} title={label}>\n        {label}\n      </span>\n    );\n  };\n\n  const renderValue = renderValueProp || renderValueDefault;\n\n  return (\n    <>\n      <SelectContainer\n        focused={isFocused}\n        disabled={disabled}\n        size={size}\n        view={view}\n        form={form}\n        required={required}\n        ref={ref}\n        style={style}\n        id={inputId}\n        {...restProps}\n      >\n        <div\n          className={cnSelect('Control')}\n          ref={controlRef}\n          aria-expanded={isOpen}\n          aria-haspopup=\"listbox\"\n          id={id}\n        >\n          <div className={cnSelect('ControlInner')}>\n            <div className={cnSelect('ControlValueContainer')}>\n              <input\n                {...getKeyProps()}\n                className={cnSelect('FakeField')}\n                type=\"text\"\n                name={name}\n                id={inputId}\n                onFocus={handleInputFocus}\n                onBlur={handleInputBlur}\n                aria-label={ariaLabel}\n                onClick={handleInputClick}\n                ref={useForkRef([inputRef, inputRefProp])}\n                readOnly\n              />\n              {isNotNil(value) && renderValue({ item: value })}\n              {!isNotNil(value) && placeholder && (\n                <span className={cnSelect('Placeholder')} title=\"placeholder\">\n                  {placeholder}\n                </span>\n              )}\n            </div>\n          </div>\n          <span className={cnSelect('Indicators')}>\n            <button\n              type=\"button\"\n              className={cnSelect('IndicatorsDropdown')}\n              tabIndex={-1}\n              onClick={handleToggleDropdown}\n            >\n              <IconSelect\n                size={iconSizeMap[size]}\n                className={cnSelect('DropdownIndicatorIcon')}\n              />\n            </button>\n          </span>\n        </div>\n      </SelectContainer>\n      <SelectDropdown\n        isOpen={isOpen}\n        size={size}\n        controlRef={controlRef}\n        getOptionProps={getOptionProps}\n        dropdownRef={useForkRef([dropdownRef, defaultDropdownRef])}\n        form={dropdownForm}\n        className={dropdownClassName}\n        renderItem={renderItem || renderItemDefault}\n        getGroupLabel={getGroupLabel}\n        visibleItems={visibleItems}\n        notFound={notFound}\n        isLoading={isLoading}\n        labelForEmptyItems={labelForEmptyItems}\n        hasItems={hasItems}\n        itemsRefs={optionsRefs}\n        virtualScroll={virtualScroll}\n        onScrollToBottom={onScrollToBottom}\n        viewportRef={dropdownViewportRef}\n        style={\n          typeof style?.zIndex === 'number'\n            ? { zIndex: style.zIndex + 1 }\n            : undefined\n        }\n      />\n    </>\n  );\n};\n\nexport const Select = forwardRef(SelectRender) as SelectComponent;\n\nexport * from './helpers';\n"],"mappings":"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"}