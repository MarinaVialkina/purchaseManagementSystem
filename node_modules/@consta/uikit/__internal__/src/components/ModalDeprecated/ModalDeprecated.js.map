{"version":3,"file":"ModalDeprecated.js","names":["React","useEffect","useRef","Transition","PortalWithTheme","PortalWithThemeConsumer","useTheme","useGlobalKeys","animateTimeout","cnMixPopoverAnimate","cnMixScrollBar","cnDeprecated","cn","modalPropWidth","modalPropWidthDefault","modalPropPosition","modalPropPositionDefault","cnModal","Modal","props","isOpen","onClose","onOpen","hasOverlay","onOverlayClick","onClickOutside","onEsc","className","width","position","children","container","window","document","body","refsForExcludeClickOutside","rootClassName","afterClose","style","otherProps","ref","portalRef","theme","Escape","e","animate","zIndex"],"sources":["../../../../../src/components/ModalDeprecated/ModalDeprecated.tsx"],"sourcesContent":["import './ModalDeprecated.css';\n\nimport React, { useEffect, useRef } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport {\n  PortalWithTheme,\n  PortalWithThemeConsumer,\n} from '##/components/PortalWithTheme';\nimport { useTheme } from '##/components/Theme/Theme';\nimport { useGlobalKeys } from '##/hooks/useGlobalKeys';\nimport { animateTimeout, cnMixPopoverAnimate } from '##/mixs/MixPopoverAnimate';\nimport { cnMixScrollBar } from '##/mixs/MixScrollBar';\nimport { cnDeprecated as cn } from '##/utils/bem';\nimport { PropsWithHTMLAttributes } from '##/utils/types/PropsWithHTMLAttributes';\n\nconst modalPropWidth = ['auto'] as const;\ntype ModalPropWidth = typeof modalPropWidth[number];\nconst modalPropWidthDefault: ModalPropWidth = modalPropWidth[0];\n\nconst modalPropPosition = ['center', 'top'] as const;\ntype ModalPropPosition = typeof modalPropPosition[number];\nconst modalPropPositionDefault: ModalPropPosition = modalPropPosition[0];\n\ntype ModalProps = PropsWithHTMLAttributes<\n  {\n    isOpen?: boolean;\n    onClose?: () => void;\n    onOpen?: () => void;\n    hasOverlay?: boolean;\n    /** @deprecated use onClickOutside */\n    onOverlayClick?: (event: MouseEvent) => void;\n    onClickOutside?: (event: MouseEvent) => void;\n    onEsc?: (event: KeyboardEvent) => void;\n    rootClassName?: string;\n    width?: ModalPropWidth;\n    position?: ModalPropPosition;\n    children?: React.ReactNode;\n    container?: HTMLDivElement | undefined;\n    afterClose?: () => void;\n    refsForExcludeClickOutside?: React.RefObject<HTMLElement>[];\n  },\n  HTMLDivElement\n>;\n\nexport const cnModal = cn('Modal');\n\nexport const Modal: React.FC<ModalProps> = (props) => {\n  const {\n    isOpen,\n    onClose,\n    onOpen,\n    hasOverlay = true,\n    onOverlayClick,\n    onClickOutside,\n    onEsc,\n    className,\n    width = modalPropWidthDefault,\n    position = modalPropPositionDefault,\n    children,\n    container = window.document.body,\n    refsForExcludeClickOutside,\n    rootClassName,\n    afterClose,\n    style,\n    ...otherProps\n  } = props;\n\n  const ref = useRef<HTMLDivElement | null>(null);\n  const portalRef = useRef<HTMLDivElement | null>(null);\n  const { theme } = useTheme();\n\n  useEffect(() => {\n    if (isOpen) {\n      onOpen?.();\n    } else {\n      onClose?.();\n    }\n  }, [isOpen]);\n\n  useGlobalKeys({\n    Escape: (e: KeyboardEvent) => isOpen && onEsc && onEsc(e),\n  });\n\n  return (\n    <Transition\n      in={isOpen}\n      unmountOnExit\n      nodeRef={portalRef}\n      timeout={animateTimeout}\n      onExited={afterClose}\n    >\n      {(animate) => (\n        <PortalWithTheme\n          preset={theme}\n          container={container}\n          className={cnModal({ hasOverlay }, [rootClassName])}\n          ref={portalRef}\n          style={\n            typeof style?.zIndex === 'number'\n              ? { zIndex: style.zIndex }\n              : undefined\n          }\n        >\n          {hasOverlay && (\n            <div\n              className={cnModal('Overlay', { animate })}\n              aria-label=\"Overlay\"\n            />\n          )}\n          <div\n            {...otherProps}\n            style={{\n              ...style,\n              zIndex: undefined,\n            }}\n            className={cnModal('Window', { width, position }, [\n              cnMixPopoverAnimate({ animate }),\n              className,\n              cnMixScrollBar(),\n            ])}\n            ref={ref}\n          >\n            <PortalWithThemeConsumer\n              onClickOutside={onClickOutside || onOverlayClick}\n              ignoreClicksInsideRefs={[\n                ...(refsForExcludeClickOutside || []),\n                ref,\n              ]}\n            >\n              {children}\n            </PortalWithThemeConsumer>\n          </div>\n        </PortalWithTheme>\n      )}\n    </Transition>\n  );\n};\n"],"mappings":"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"}