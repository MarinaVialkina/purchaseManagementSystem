{"version":3,"file":"SelectPopover.js","names":["classnames","reatomComponent","React","useCallback","useRef","Transition","cnListBox","Popover","animateTimeout","cnMixPopoverAnimate","SelectPopoverForm","defaultSelectPopoverPropForm","SelectPopover","props","ctx","size","className","openAtom","offset","offsetProp","controlRef","form","anchorRef","children","onMount","otherProps","popoverRef","spy","animate","border","shadow"],"sources":["../../../../../../src/components/SelectCanary/SelectPopover/SelectPopover.tsx"],"sourcesContent":["import { classnames } from '@bem-react/classnames';\nimport { AtomMut } from '@reatom/framework';\nimport { reatomComponent } from '@reatom/npm-react';\nimport React, { useCallback, useRef } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport { FieldPropSize } from '##/components/FieldComponents';\nimport { cnListBox } from '##/components/ListCanary';\nimport { Popover, PopoverPropOffset } from '##/components/Popover';\nimport {\n  animateTimeout,\n  cnMixPopoverAnimate,\n} from '##/mixs/MixPopoverAnimate/MixPopoverAnimate';\nimport { PropsWithJsxAttributes } from '##/utils/types/PropsWithJsxAttributes';\n\nexport const SelectPopoverForm = ['default', 'brick', 'round'] as const;\nexport type SelectPopoverPropForm = typeof SelectPopoverForm[number];\nexport const defaultSelectPopoverPropForm = SelectPopoverForm[0];\n\ntype Props = PropsWithJsxAttributes<{\n  controlRef: React.MutableRefObject<HTMLDivElement | null>;\n  form: SelectPopoverPropForm;\n  openAtom: AtomMut<boolean>;\n  size: FieldPropSize;\n  offset?: PopoverPropOffset | 'none';\n  anchorRef: React.RefObject<HTMLElement> | undefined;\n  children: React.ReactNode;\n  onMount: (isMount: boolean) => void;\n  viewportRef?: React.RefObject<HTMLElement>;\n}>;\n\nexport const SelectPopover = reatomComponent<Props>((props) => {\n  const {\n    ctx,\n    size,\n    className,\n    openAtom,\n    offset: offsetProp = 'none',\n    controlRef,\n    form,\n    anchorRef,\n    children,\n    onMount,\n    ...otherProps\n  } = props;\n\n  const offset = offsetProp === 'none' ? undefined : offsetProp;\n\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <Transition\n      in={ctx.spy(openAtom)}\n      nodeRef={popoverRef}\n      timeout={animateTimeout}\n      unmountOnExit\n      onEntering={useCallback(() => onMount(true), [])}\n      onExited={useCallback(() => onMount(false), [])}\n    >\n      {(animate) => {\n        return (\n          <Popover\n            {...otherProps}\n            anchorRef={anchorRef}\n            direction=\"downStartLeft\"\n            possibleDirections={[\n              'downStartLeft',\n              'upStartLeft',\n              'downStartRight',\n              'upStartRight',\n            ]}\n            offset={offset}\n            ref={popoverRef}\n            role=\"listbox\"\n            className={classnames(\n              className,\n              cnListBox({ size, form, border: true, shadow: true }),\n              cnMixPopoverAnimate({ animate }),\n            )}\n            equalAnchorWidth\n          >\n            {children}\n          </Popover>\n        );\n      }}\n    </Transition>\n  );\n});\n"],"mappings":"uMAAA,OAASA,UAAT,KAA2B,uBAA3B,CAEA,OAASC,eAAT,KAAgC,mBAAhC,CACA,MAAOC,MAAP,EAAgBC,WAAhB,CAA6BC,MAA7B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,wBAA3B,CAGA,OAASC,SAAT,wBACA,OAASC,OAAT,qBACA,OACEC,cADF,CAEEC,mBAFF,yDAMA,MAAO,IAAMC,kBAAiB,CAAG,CAAC,SAAD,CAAY,OAAZ,CAAqB,OAArB,CAA1B,CAEP,MAAO,IAAMC,6BAA4B,CAAGD,iBAAiB,CAAC,CAAD,CAAtD,CAcP,MAAO,IAAME,cAAa,CAAGX,eAAe,CAAQ,SAACY,CAAD,CAAW,IAE3DC,EAF2D,CAazDD,CAbyD,CAE3DC,GAF2D,CAG3DC,CAH2D,CAazDF,CAbyD,CAG3DE,IAH2D,CAI3DC,CAJ2D,CAazDH,CAbyD,CAI3DG,SAJ2D,CAK3DC,CAL2D,CAazDJ,CAbyD,CAK3DI,QAL2D,GAazDJ,CAbyD,CAM3DK,MAN2D,CAMnDC,CANmD,YAMtC,MANsC,GAO3DC,CAP2D,CAazDP,CAbyD,CAO3DO,UAP2D,CAQ3DC,CAR2D,CAazDR,CAbyD,CAQ3DQ,IAR2D,CAS3DC,CAT2D,CAazDT,CAbyD,CAS3DS,SAT2D,CAU3DC,CAV2D,CAazDV,CAbyD,CAU3DU,QAV2D,CAW3DC,CAX2D,CAazDX,CAbyD,CAW3DW,OAX2D,CAYxDC,CAZwD,0BAazDZ,CAbyD,YAevDK,CAAM,CAAkB,MAAf,GAAAC,CAAU,QAA0BA,CAfU,CAiBvDO,CAAU,CAAGtB,MAAM,CAAiB,IAAjB,CAjBoC,CAmB7D,MACE,qBAAC,UAAD,EACE,GAAIU,CAAG,CAACa,GAAJ,CAAQV,CAAR,CADN,CAEE,OAAO,CAAES,CAFX,CAGE,OAAO,CAAElB,cAHX,CAIE,aAAa,GAJf,CAKE,UAAU,CAAEL,WAAW,CAAC,iBAAMqB,EAAO,IAAb,CAAD,CAAsB,EAAtB,CALzB,CAME,QAAQ,CAAErB,WAAW,CAAC,iBAAMqB,EAAO,IAAb,CAAD,CAAuB,EAAvB,CANvB,EAQG,SAACI,CAAD,CAAa,CACZ,MACE,qBAAC,OAAD,kBACMH,CADN,EAEE,SAAS,CAAEH,CAFb,CAGE,SAAS,CAAC,eAHZ,CAIE,kBAAkB,CAAE,CAClB,eADkB,CAElB,aAFkB,CAGlB,gBAHkB,CAIlB,cAJkB,CAJtB,CAUE,MAAM,CAAEJ,CAVV,CAWE,GAAG,CAAEQ,CAXP,CAYE,IAAI,CAAC,SAZP,CAaE,SAAS,CAAE1B,UAAU,CACnBgB,CADmB,CAEnBV,SAAS,CAAC,CAAES,IAAI,CAAJA,CAAF,CAAQM,IAAI,CAAJA,CAAR,CAAcQ,MAAM,GAApB,CAA4BC,MAAM,GAAlC,CAAD,CAFU,CAGnBrB,mBAAmB,CAAC,CAAEmB,OAAO,CAAPA,CAAF,CAAD,CAHA,CAbvB,CAkBE,gBAAgB,GAlBlB,GAoBGL,CApBH,CAuBH,CAjCH,CAoCH,CAxD2C,CAArC"}