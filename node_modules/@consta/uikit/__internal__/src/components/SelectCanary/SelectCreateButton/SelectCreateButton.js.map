{"version":3,"file":"SelectCreateButton.js","names":["useAtom","React","forwardRef","ListAddItem","cnCanary","cn","cnSelectCreateButton","labelForCreateDefault","label","SelectCreateButton","props","ref","className","labelForCreate","inputValueAtom","index","size","indent","highlightedIndexAtom","highlightIndex","otherProps","ctx","highlightedIndex","spy","hovered","inputValue"],"sources":["../../../../../../src/components/SelectCanary/SelectCreateButton/SelectCreateButton.tsx"],"sourcesContent":["import './SelectCreateButton.css';\n\nimport { AtomMut } from '@reatom/framework';\nimport { useAtom } from '@reatom/npm-react';\nimport React, { forwardRef } from 'react';\n\nimport { FieldPropSize } from '##/components/FieldComponents';\nimport { ListAddItem } from '##/components/ListCanary';\nimport { cnCanary as cn } from '##/utils/bem';\nimport { PropsWithHTMLAttributesAndRef } from '##/utils/types/PropsWithHTMLAttributes';\n\ntype LabelForCreate =\n  | ((label: string | undefined) => React.ReactNode)\n  | React.ReactNode;\n\ntype SelectCreateButtonProps = PropsWithHTMLAttributesAndRef<\n  {\n    labelForCreate?: LabelForCreate;\n    inputValueAtom: AtomMut<string>;\n    size: FieldPropSize;\n    indent: 'normal' | 'increased';\n    index: number;\n    highlightIndex: (index: number) => void;\n    highlightedIndexAtom: AtomMut<number>;\n  },\n  HTMLDivElement\n>;\n\nexport const cnSelectCreateButton = cn('SelectCreateButton');\n\nconst labelForCreateDefault: LabelForCreate = (label) => (\n  <span className={cnSelectCreateButton('CreateLabel')}>\n    {label ? (\n      <>\n        Добавить <b>«{label}»</b>\n      </>\n    ) : (\n      'Добавить элемент'\n    )}\n  </span>\n);\n\ntype SelectCreateButtonComponent = (\n  props: SelectCreateButtonProps,\n) => React.ReactNode | null;\n\nexport const SelectCreateButton: SelectCreateButtonComponent = forwardRef(\n  (props, ref) => {\n    const {\n      className,\n      labelForCreate = labelForCreateDefault,\n      inputValueAtom,\n      index,\n      size,\n      indent,\n      highlightedIndexAtom,\n      highlightIndex,\n      ...otherProps\n    } = props;\n\n    const [hovered] = useAtom((ctx) => {\n      const highlightedIndex = ctx.spy(highlightedIndexAtom);\n      return index === highlightedIndex;\n    });\n\n    const [inputValue] = useAtom(inputValueAtom);\n\n    return (\n      <ListAddItem\n        {...otherProps}\n        ref={ref}\n        className={cnSelectCreateButton(null, [className])}\n        role=\"option\"\n        active={hovered}\n        size={size}\n        innerOffset={indent}\n        label={\n          typeof labelForCreate === 'function'\n            ? labelForCreate(inputValue)\n            : labelForCreate\n        }\n        onMouseEnter={() => {\n          highlightIndex(index);\n        }}\n        underLine\n      />\n    );\n  },\n);\n"],"mappings":"oRAAA,iCAGA,OAASA,OAAT,KAAwB,mBAAxB,CACA,MAAOC,MAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CAGA,OAASC,WAAT,wBACA,OAASC,QAAQ,GAAIC,GAArB,0BAoBA,MAAO,IAAMC,qBAAoB,CAAGD,EAAE,CAAC,oBAAD,CAA/B,CAEP,GAAME,sBAAqC,CAAG,SAACC,CAAD,QAC5C,6BAAM,SAAS,CAAEF,oBAAoB,CAAC,aAAD,CAArC,EACGE,CAAK,CACJ,4FACW,oCAAKA,CAAL,QADX,CADI,CAKJ,6FANJ,CAD4C,CAA9C,CAgBA,MAAO,IAAMC,mBAA+C,CAAGP,UAAU,CACvE,SAACQ,CAAD,CAAQC,CAAR,CAAgB,IAEZC,EAFY,CAWVF,CAXU,CAEZE,SAFY,GAWVF,CAXU,CAGZG,cAHY,CAGZA,CAHY,YAGKN,qBAHL,GAIZO,CAJY,CAWVJ,CAXU,CAIZI,cAJY,CAKZC,CALY,CAWVL,CAXU,CAKZK,KALY,CAMZC,CANY,CAWVN,CAXU,CAMZM,IANY,CAOZC,CAPY,CAWVP,CAXU,CAOZO,MAPY,CAQZC,CARY,CAWVR,CAXU,CAQZQ,oBARY,CASZC,CATY,CAWVT,CAXU,CASZS,cATY,CAUTC,CAVS,0BAWVV,CAXU,cAaIV,OAAO,CAAC,SAACqB,CAAD,CAAS,CACjC,GAAMC,EAAgB,CAAGD,CAAG,CAACE,GAAJ,CAAQL,CAAR,CAAzB,CACA,MAAOH,EAAK,GAAKO,CAClB,CAHwB,CAbX,uBAaPE,CAbO,QAkBOxB,OAAO,CAACc,CAAD,CAlBd,uBAkBPW,CAlBO,MAoBd,MACE,qBAAC,WAAD,kBACML,CADN,EAEE,GAAG,CAAET,CAFP,CAGE,SAAS,CAAEL,oBAAoB,CAAC,IAAD,CAAO,CAACM,CAAD,CAAP,CAHjC,CAIE,IAAI,CAAC,QAJP,CAKE,MAAM,CAAEY,CALV,CAME,IAAI,CAAER,CANR,CAOE,WAAW,CAAEC,CAPf,CAQE,KAAK,CACuB,UAA1B,QAAOJ,EAAP,CACIA,CAAc,CAACY,CAAD,CADlB,CAEIZ,CAXR,CAaE,YAAY,CAAE,uBAAM,CAClBM,CAAc,CAACJ,CAAD,CACf,CAfH,CAgBE,SAAS,GAhBX,GAmBH,CAzCsE,CAAlE"}