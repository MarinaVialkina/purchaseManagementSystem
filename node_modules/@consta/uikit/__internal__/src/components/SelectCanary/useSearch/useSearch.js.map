{"version":3,"file":"useSearch.js","names":["useMemo","useState","defaultGetItemLabel","useDebounce","getSearchFunctionDefault","comparison","item","searchValue","toLocaleLowerCase","indexOf","searchDefault","defaultLabelForNotFound","useSearch","items","search","debounceTimeOut","labelForNotFound","inputState","setInputState","setInputStateDebounce","filteredItems","filter","input","onInput","labelForEmptyItems"],"sources":["../../../../../../src/components/SelectCanary/useSearch/useSearch.ts"],"sourcesContent":["import { useMemo, useState } from 'react';\n\nimport { defaultGetItemLabel } from '##/components/SelectCanary/helpers';\nimport { useDebounce } from '##/hooks/useDebounce';\n\ntype SelectItemDefault = {\n  label: string;\n};\n\nexport type UseSearchPropSearch<ITEM> = (\n  item: ITEM,\n  searchValue: string,\n) => boolean;\n\ntype UseSearchProps<ITEM = SelectItemDefault> = {\n  items: ITEM[];\n  search?: UseSearchPropSearch<ITEM>;\n  labelForNotFound?: string;\n  debounceTimeOut?: number;\n} & (ITEM extends { label: SelectItemDefault['label'] }\n  ? {}\n  : { search: UseSearchPropSearch<ITEM> });\n\nexport const getSearchFunctionDefault = <ITEM>(\n  comparison: (item: ITEM) => string,\n) => {\n  return (item: ITEM, searchValue: string) =>\n    comparison(item)\n      .toLocaleLowerCase()\n      .indexOf(searchValue.toLocaleLowerCase()) !== -1;\n};\n\nconst searchDefault = getSearchFunctionDefault(defaultGetItemLabel);\n\nconst defaultLabelForNotFound = 'Не найдено';\n\nexport const useSearch = <ITEM = SelectItemDefault>({\n  items,\n  search = searchDefault as unknown as UseSearchPropSearch<ITEM>,\n  debounceTimeOut = 300,\n  labelForNotFound = defaultLabelForNotFound,\n}: UseSearchProps<ITEM>) => {\n  const [inputState, setInputState] = useState('');\n  const setInputStateDebounce = useDebounce(setInputState, debounceTimeOut);\n\n  const filteredItems = useMemo(() => {\n    if (!inputState) return items;\n    return items.filter((item) => search(item, inputState));\n  }, [inputState]);\n\n  return {\n    input: true,\n    onInput: setInputStateDebounce,\n    items: filteredItems,\n    labelForEmptyItems: inputState ? labelForNotFound : undefined,\n  };\n};\n"],"mappings":"iEAAA,OAASA,OAAT,CAAkBC,QAAlB,KAAkC,OAAlC,CAEA,OAASC,mBAAT,kBACA,OAASC,WAAT,kCAoBA,MAAO,IAAMC,yBAAwB,CAAG,SACtCC,CADsC,CAEnC,CACH,MAAO,UAACC,CAAD,CAAaC,CAAb,QAG2C,CAAC,CAFjD,GAAAF,CAAU,CAACC,CAAD,CAAV,CACGE,iBADH,GAEGC,OAFH,CAEWF,CAAW,CAACC,iBAAZ,EAFX,CADK,CAIR,CAPM,C,GASDE,cAAa,CAAGN,wBAAwB,CAACF,mBAAD,C,CAExCS,uBAAuB,CAAG,yD,CAEhC,MAAO,IAAMC,UAAS,CAAG,WAKG,IAJ1BC,EAI0B,GAJ1BA,KAI0B,KAH1BC,MAG0B,CAH1BA,CAG0B,YAHjBJ,aAGiB,OAF1BK,eAE0B,CAF1BA,CAE0B,YAFR,GAEQ,OAD1BC,gBAC0B,CAD1BA,CAC0B,YADPL,uBACO,KACUV,QAAQ,CAAC,EAAD,CADlB,uBACnBgB,CADmB,MACPC,CADO,MAEpBC,CAAqB,CAAGhB,WAAW,CAACe,CAAD,CAAgBH,CAAhB,CAFf,CAIpBK,CAAa,CAAGpB,OAAO,CAAC,UAAM,OAC7BiB,EAD6B,CAE3BJ,CAAK,CAACQ,MAAN,CAAa,SAACf,CAAD,QAAUQ,EAAM,CAACR,CAAD,CAAOW,CAAP,CAAhB,CAAb,CAF2B,CACVJ,CAEzB,CAH4B,CAG1B,CAACI,CAAD,CAH0B,CAJH,CAS1B,MAAO,CACLK,KAAK,GADA,CAELC,OAAO,CAAEJ,CAFJ,CAGLN,KAAK,CAAEO,CAHF,CAILI,kBAAkB,CAAEP,CAAU,CAAGD,CAAH,OAJzB,CAMR,CApBM"}