{"version":3,"file":"SelectSingle.js","names":["useAction","React","forwardRef","SelectDropdown","SelectItem","useForkRef","cnCanary","cn","useSendToAtom","withCtx","withDefault","SelectControlLayout","SelectInput","useSelect","cnSelectSingle","SelectSingleRender","props","ref","propsWithDefault","propsAtom","form","status","size","disabled","value","renderValue","isLoading","dropdownRefProp","dropdownForm","renderItem","getGroupLabel","labelForCreate","labelForEmptyItems","virtualScroll","onScrollToBottom","style","className","placeholder","view","iconClear","input","inputValue","inputDefaultValue","inputRefProp","ariaLabel","getGroupKey","getItemDisabled","getItemGroupKey","getItemKey","getItemLabel","items","onChangeProp","dropdownClassName","onFocus","onBlur","onCreateProp","onInput","multiple","groups","onDropdownOpen","ignoreOutsideClicksRefs","clearButton","selectAll","selectAllLabel","dropdownViewportRef","otherProps","renderValueDefault","ctx","get","renderItemDefault","item","active","hovered","onClick","onMouseEnter","getOptionActions","openAtom","visibleItemsAtom","focusAtom","handleInputFocus","handleInputBlur","handleToggleDropdown","inputRef","handleInputClick","handleInputChange","clearValue","optionsRefs","controlRef","dropdownRef","clearButtonAtom","highlightedIndexAtom","getItemKeyAtom","valueAtom","onChangeAll","highlightIndex","onCreate","onChange","inputValueAtom","hasItemsAtom","groupsCounterAtom","dropdownZIndexAtom","SelectSingle"],"sources":["../../../../../../src/components/SelectCanary/SelectSingle/SelectSingle.tsx"],"sourcesContent":["import { useAction } from '@reatom/npm-react';\nimport React, { forwardRef } from 'react';\n\nimport { SelectDropdown } from '##/components/SelectCanary/SelectDropdown';\nimport { SelectItem } from '##/components/SelectCanary/SelectItem';\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { cnCanary as cn } from '##/utils/bem';\nimport { useSendToAtom } from '##/utils/state';\nimport { withCtx } from '##/utils/state/withCtx';\n\nimport {\n  RenderItemProps,\n  SelectComponent,\n  SelectGroupDefault,\n  SelectItemDefault,\n  SelectPropRenderValue,\n  SelectProps,\n} from '..';\nimport { withDefault } from '../defaultProps';\nimport { SelectControlLayout } from '../SelectControlLayout';\nimport { SelectInput } from '../SelectInput';\nimport { useSelect } from '../useSelect';\n\nconst cnSelectSingle = cn('SelectSelectSingleMultiple');\n\nconst SelectSingleRender = <\n  ITEM = SelectItemDefault,\n  GROUP = SelectGroupDefault,\n>(\n  props: SelectProps<ITEM, GROUP, false>,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const propsWithDefault = withDefault(props);\n\n  const propsAtom = useSendToAtom(propsWithDefault);\n\n  const {\n    form,\n    status,\n    size,\n    disabled,\n    value,\n    renderValue,\n    isLoading,\n    'dropdownRef': dropdownRefProp,\n    dropdownForm,\n    renderItem,\n    getGroupLabel,\n    labelForCreate,\n    labelForEmptyItems,\n    virtualScroll,\n    onScrollToBottom,\n    style,\n    className,\n    placeholder,\n    view,\n    iconClear,\n    input,\n    inputValue,\n    inputDefaultValue,\n    'inputRef': inputRefProp,\n    'aria-label': ariaLabel,\n\n    // исключаем из otherProps\n    getGroupKey,\n    getItemDisabled,\n    getItemGroupKey,\n    getItemKey,\n    getItemLabel,\n    items,\n    'onChange': onChangeProp,\n    dropdownClassName,\n    onFocus,\n    onBlur,\n    'onCreate': onCreateProp,\n    onInput,\n    multiple,\n    groups,\n    onDropdownOpen,\n    ignoreOutsideClicksRefs,\n    clearButton,\n    selectAll,\n    selectAllLabel,\n    dropdownViewportRef,\n    ...otherProps\n  } = propsWithDefault;\n\n  const renderValueDefault: SelectPropRenderValue<ITEM, false> = useAction(\n    (ctx, { value }: { value: ITEM }) => ctx.get(propsAtom).getItemLabel(value),\n    [],\n  );\n\n  const renderItemDefault = useAction(\n    (\n      ctx,\n      {\n        item,\n        active,\n        hovered,\n        onClick,\n        onMouseEnter,\n        ref,\n      }: RenderItemProps<ITEM>,\n    ) => {\n      const { getItemLabel, size, dropdownForm, getItemDisabled } =\n        ctx.get(propsAtom);\n\n      return (\n        <SelectItem\n          label={getItemLabel(item)}\n          active={active}\n          hovered={hovered}\n          size={size}\n          indent={dropdownForm === 'round' ? 'increased' : 'normal'}\n          onClick={onClick}\n          onMouseEnter={onMouseEnter}\n          disabled={getItemDisabled(item)}\n          ref={ref}\n        />\n      );\n    },\n    [],\n  );\n\n  const {\n    getOptionActions,\n    openAtom,\n    visibleItemsAtom,\n    focusAtom,\n    handleInputFocus,\n    handleInputBlur,\n    handleToggleDropdown,\n    inputRef,\n    handleInputClick,\n    handleInputChange,\n    clearValue,\n    optionsRefs,\n    controlRef,\n    dropdownRef,\n    clearButtonAtom,\n    highlightedIndexAtom,\n    getItemKeyAtom,\n    valueAtom,\n    onChangeAll,\n    highlightIndex,\n    onCreate,\n    onChange,\n    inputValueAtom,\n    hasItemsAtom,\n    groupsCounterAtom,\n    dropdownZIndexAtom,\n  } = useSelect<ITEM, GROUP, false>({\n    propsAtom,\n  });\n\n  return (\n    <>\n      <SelectControlLayout\n        {...otherProps}\n        style={style}\n        className={cnSelectSingle(null, [className])}\n        form={form}\n        status={status}\n        size={size}\n        disabled={disabled}\n        separator\n        onClear={clearValue}\n        onDropdownButton={handleToggleDropdown}\n        openAtom={openAtom}\n        focusAtom={focusAtom}\n        view={view}\n        iconClear={iconClear}\n        clearButtonAtom={clearButtonAtom}\n        ref={useForkRef([ref, controlRef])}\n      >\n        <SelectInput\n          onFocus={handleInputFocus}\n          onBlur={handleInputBlur}\n          ref={useForkRef([inputRef, inputRefProp])}\n          onClick={handleInputClick}\n          onChange={input ? handleInputChange : undefined}\n          value={input ? inputValue : undefined}\n          defaultValue={input ? inputDefaultValue : undefined}\n          readOnly={input ? undefined : true}\n          disabled={disabled}\n          placeholder={placeholder}\n          aria-label={ariaLabel}\n        >\n          {value && (renderValue || renderValueDefault)({ value })}\n        </SelectInput>\n      </SelectControlLayout>\n      <SelectDropdown\n        valueAtom={valueAtom}\n        getItemKeyAtom={getItemKeyAtom}\n        openAtom={openAtom}\n        size={size}\n        controlRef={controlRef}\n        getOptionActions={getOptionActions}\n        dropdownRef={useForkRef([dropdownRef, dropdownRefProp])}\n        form={dropdownForm}\n        className={dropdownClassName}\n        renderItem={renderItem || renderItemDefault}\n        getGroupLabel={getGroupLabel}\n        visibleItemsAtom={visibleItemsAtom}\n        labelForCreate={labelForCreate}\n        isLoading={isLoading}\n        labelForEmptyItems={labelForEmptyItems}\n        itemsRefs={optionsRefs}\n        virtualScroll={virtualScroll}\n        onScrollToBottom={onScrollToBottom}\n        highlightedIndexAtom={highlightedIndexAtom}\n        highlightIndex={highlightIndex}\n        onChangeAll={onChangeAll}\n        onCreate={onCreate}\n        onChange={onChange}\n        inputValueAtom={inputValueAtom}\n        hasItemsAtom={hasItemsAtom}\n        groupsCounterAtom={groupsCounterAtom}\n        dropdownZIndexAtom={dropdownZIndexAtom}\n        selectAllLabel={selectAllLabel}\n        viewportRef={dropdownViewportRef}\n      />\n    </>\n  );\n};\n\nexport const SelectSingle = withCtx(\n  forwardRef(SelectSingleRender),\n) as SelectComponent;\n"],"mappings":"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"}