import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["form","status","size","disabled","value","renderValue","isLoading","dropdownRef","dropdownForm","renderItem","getGroupLabel","labelForCreate","labelForEmptyItems","virtualScroll","onScrollToBottom","style","className","placeholder","view","iconClear","input","inputValue","inputDefaultValue","inputRef","getGroupKey","getItemDisabled","getItemGroupKey","getItemKey","getItemLabel","items","onChange","dropdownClassName","onFocus","onBlur","onCreate","onInput","multiple","groups","onDropdownOpen","ignoreOutsideClicksRefs","clearButton","selectAll","selectAllLabel","dropdownViewportRef"];import"./SelectMultiple.css";import{useAction}from"@reatom/npm-react";import React,{forwardRef,useRef}from"react";import{FieldArrayValueItem}from"../../FieldComponents";import{SelectDropdown}from"../SelectDropdown";import{SelectItem}from"../SelectItem";import{useForkRef}from"../../../hooks/useForkRef";import{cnCanary as cn}from"../../../utils/bem";import{useSendToAtom}from"../../../utils/state";import{withCtx}from"../../../utils/state/withCtx";import{withDefault}from"../defaultProps";import{SelectControlLayout}from"../SelectControlLayout";import{SelectMultipleValue}from"../SelectMultipleValue";import{useSelect}from"../useSelect";var cnSelectMultiple=cn("SelectMultiple"),SelectMultipleRender=function(a,b){var c=withDefault(a),d=useSendToAtom(c),e=c.form,f=c.status,g=c.size,h=c.disabled,i=c.value,j=c.renderValue,k=c.isLoading,l=c.dropdownRef,m=c.dropdownForm,n=c.renderItem,o=c.getGroupLabel,p=c.labelForCreate,q=c.labelForEmptyItems,r=c.virtualScroll,s=c.onScrollToBottom,t=c.style,u=c.className,v=c.placeholder,w=c.view,x=c.iconClear,y=c.input,z=c.inputValue,A=c.inputDefaultValue,B=c.inputRef,C=c.getGroupKey,D=c.getItemDisabled,E=c.getItemGroupKey,F=c.getItemKey,G=c.getItemLabel,H=c.items,I=c.onChange,J=c.dropdownClassName,K=c.onFocus,L=c.onBlur,M=c.onCreate,N=c.onInput,O=c.multiple,P=c.groups,Q=c.onDropdownOpen,R=c.ignoreOutsideClicksRefs,S=c.clearButton,T=c.selectAll,U=c.selectAllLabel,V=c.dropdownViewportRef,W=_objectWithoutProperties(c,_excluded),X=useSelect({propsAtom:d}),Y=X.getOptionActions,Z=X.openAtom,$=X.visibleItemsAtom,_=X.focusAtom,aa=X.handleInputFocus,ba=X.handleInputBlur,ca=X.handleToggleDropdown,da=X.inputRef,ea=X.handleInputClick,fa=X.handleInputChange,ga=X.clearValue,ha=X.optionsRefs,ia=X.controlRef,ja=X.dropdownRef,ka=X.clearButtonAtom,la=X.highlightedIndexAtom,ma=X.getItemKeyAtom,na=X.valueAtom,oa=X.onChangeAll,pa=X.highlightIndex,qa=X.onCreate,ra=X.onChange,sa=X.inputValueAtom,ta=X.getHandleRemoveValue,ua=X.hasItemsAtom,va=X.groupsCounterAtom,wa=X.dropdownZIndexAtom,xa=useRef(null),ya=useAction(function(a,b){var c=b.item,d=b.active,e=b.hovered,f=b.onClick,h=b.onMouseEnter,i=b.ref;return React.createElement(SelectItem,{label:G(c),active:d,hovered:e,size:g,indent:"round"===m?"increased":"normal",onClick:f,onMouseEnter:h,disabled:D(c),ref:i,multiple:!0})},[D,g,G,m]),za=useAction(function(a,b){return(j||function renderValueDefault(a){var b=a.value,c=a.getRemove;return b.map(function(a){var b=h||D(a);return React.createElement(FieldArrayValueItem,{key:F(a),size:g,label:G(a),disabled:b,onRemove:b?void 0:c(a)})})})({value:b,getRemove:ta})},[h,D,F,g,G,j]);return React.createElement(React.Fragment,null,React.createElement(SelectControlLayout,Object.assign({},W,{style:t,className:cnSelectMultiple(null,[u]),form:e,status:f,size:g,disabled:h,separator:!0,onClear:ga,onDropdownButton:ca,openAtom:Z,focusAtom:_,view:w,iconClear:x,clearButtonAtom:ka,ref:useForkRef([b,ia])}),React.createElement(SelectMultipleValue,{propsAtom:d,onFocus:aa,onBlur:ba,onClick:ea,onChange:fa,renderValue:za,inputRef:useForkRef([da,B]),ref:xa})),React.createElement(SelectDropdown,{valueAtom:na,getItemKeyAtom:ma,openAtom:Z,size:g,controlRef:ia,getOptionActions:Y,dropdownRef:useForkRef([ja,l]),form:m,className:J,renderItem:n||ya,getGroupLabel:o,visibleItemsAtom:$,labelForCreate:p,isLoading:k,labelForEmptyItems:q,itemsRefs:ha,virtualScroll:r,onScrollToBottom:s,highlightedIndexAtom:la,highlightIndex:pa,onChangeAll:oa,onCreate:qa,onChange:ra,inputValueAtom:sa,hasItemsAtom:ua,groupsCounterAtom:va,dropdownZIndexAtom:wa,selectAllLabel:U,viewportRef:V}))};export var SelectMultiple=withCtx(forwardRef(SelectMultipleRender));
//# sourceMappingURL=SelectMultiple.js.map