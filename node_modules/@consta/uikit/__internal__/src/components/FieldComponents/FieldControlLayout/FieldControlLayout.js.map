{"version":3,"file":"FieldControlLayout.js","names":["React","forwardRef","useFlag","forkRef","useRefs","getElementWidth","useResizeObserved","cnFieldControlLayout","formGuard","getBgColor","getBorderColor","getBorderRadius","getBorderStyle","getPaddingLeft","getPaddingRight","getPaddingVertical","getSlots","getSlotsWidthStyles","renderContentSlot","node","index","slotsInnerRefs","slotsRefs","FieldControlLayout","props","ref","className","size","form","formProp","disabled","view","status","leftSide","rightSide","children","style","focused","leftSlotsRefsProp","leftSlotsRefs","rightSlotsRefsProp","rightSlotsRefs","alignSlots","otherProps","leftSlots","rightSlots","length","containerRefs","leftSlotsWidth","rightSlotsWidth","containerWidth","hovered","setHovered","on","off","map","slot"],"sources":["../../../../../../src/components/FieldComponents/FieldControlLayout/FieldControlLayout.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\n\nimport { useFlag } from '##/hooks/useFlag';\nimport { forkRef } from '##/hooks/useForkRef';\nimport { useRefs } from '##/hooks/useRefs';\nimport { getElementWidth, useResizeObserved } from '##/hooks/useResizeObserved';\n\nimport { cnFieldControlLayout } from './cnFieldControlLayout';\nimport {\n  formGuard,\n  getBgColor,\n  getBorderColor,\n  getBorderRadius,\n  getBorderStyle,\n  getPaddingLeft,\n  getPaddingRight,\n  getPaddingVertical,\n  getSlots,\n  getSlotsWidthStyles,\n} from './helpers';\nimport { FieldControlLayoutProps } from './types';\n\nconst renderContentSlot = (\n  node: React.ReactNode,\n  index: number,\n  slotsInnerRefs?: React.Ref<HTMLDivElement>[],\n  slotsRefs?: React.Ref<HTMLDivElement>[],\n) => (\n  <div\n    key={index}\n    ref={forkRef([slotsInnerRefs?.[index], slotsRefs?.[index]])}\n    className={cnFieldControlLayout('Slot')}\n  >\n    {node}\n  </div>\n);\n\nexport const FieldControlLayout = forwardRef<\n  HTMLDivElement,\n  FieldControlLayoutProps\n>((props, ref) => {\n  const {\n    className,\n    size = 'm',\n    form: formProp = 'default',\n    disabled = false,\n    view = 'default',\n    status,\n    leftSide,\n    rightSide,\n    children,\n    style,\n    focused,\n    leftSlotsRefs: leftSlotsRefsProp,\n    rightSlotsRefs: rightSlotsRefsProp,\n    alignSlots = 'top',\n    ...otherProps\n  } = props;\n  const leftSlots = getSlots(leftSide);\n  const rightSlots = getSlots(rightSide);\n  const leftSlotsRefs = useRefs<HTMLDivElement>(leftSlots.length);\n  const containerRefs = useRefs<HTMLDivElement>(1);\n  const rightSlotsRefs = useRefs<HTMLDivElement>(rightSlots.length);\n  const leftSlotsWidth = useResizeObserved(leftSlotsRefs, getElementWidth);\n  const rightSlotsWidth = useResizeObserved(rightSlotsRefs, getElementWidth);\n  const containerWidth = useResizeObserved(containerRefs, getElementWidth)[0];\n\n  // ToDo: Удалить после того как удалим из всех компонентов \"clearClear\"\n  const form = formGuard(formProp);\n\n  const [hovered, setHovered] = useFlag();\n\n  return (\n    <div\n      {...otherProps}\n      ref={ref}\n      className={cnFieldControlLayout(\n        { form, disabled, view, alignSlots, status },\n        [className],\n      )}\n      style={{\n        ...style,\n        ['--field-control-layout-border-color' as string]: getBorderColor(\n          focused,\n          hovered,\n          status,\n          disabled,\n        ),\n        ['--field-control-layout-height' as string]: `var(--control-height-${size})`,\n        ['--field-control-layout-space' as string]: `calc(var(--control-space-${size}) * 0.5)`,\n        ['--field-control-layout-text-size' as string]: `var(--control-text-size-${size})`,\n        ['--field-control-layout-text-line-height' as string]: `var(--line-height-text-m)`,\n        ['--field-control-layout-border-radius' as string]: getBorderRadius(\n          form,\n          view,\n        ),\n        ['--field-control-layout-border-style' as string]: getBorderStyle(\n          form,\n          view,\n        ),\n        ['--field-control-layout-padding-top' as string]:\n          getPaddingVertical(view),\n        ['--field-control-layout-padding-bottom' as string]:\n          getPaddingVertical(view),\n        ['--field-control-layout-padding-left' as string]: getPaddingLeft(\n          view,\n          form,\n        ),\n        ['--field-control-layout-padding-right' as string]: getPaddingRight(\n          view,\n          form,\n        ),\n        // ['--field-control-layout-padding' as string]: getPadding(form, view),\n        ['--field-control-layout-bg-color' as string]: getBgColor(\n          view,\n          disabled,\n        ),\n        ['--field-control-layout-border-width' as string]:\n          view === 'default' ? 'var(--control-border-width)' : '0px',\n        ['--field-control-layout-container-width' as string]: `${containerWidth}px`,\n        ...getSlotsWidthStyles(leftSlotsWidth, 'left'),\n        ...getSlotsWidthStyles(rightSlotsWidth, 'right'),\n      }}\n      onMouseEnter={setHovered.on}\n      onMouseLeave={setHovered.off}\n    >\n      <div ref={containerRefs[0]} className={cnFieldControlLayout('Container')}>\n        {!!leftSlots.length &&\n          leftSlots.map((slot, index) =>\n            renderContentSlot(slot, index, leftSlotsRefs, leftSlotsRefsProp),\n          )}\n        <div className={cnFieldControlLayout('Children')}>{children}</div>\n        {!!rightSlots.length &&\n          rightSlots.map((slot, index) =>\n            renderContentSlot(slot, index, rightSlotsRefs, rightSlotsRefsProp),\n          )}\n      </div>\n    </div>\n  );\n});\n"],"mappings":"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"}