import _defineProperty from"@babel/runtime/helpers/defineProperty";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["form","disabled","value","isLoading","listRef","renderItem","getGroupLabel","labelForCreate","labelForEmptyItems","virtualScroll","onScrollToBottom","style","className","placeholder","iconClear","input","inputValue","inputDefaultValue","inputRef","size","view","bordered","getGroupKey","getItemDisabled","getItemGroupKey","getItemKey","getItemLabel","items","onChange","onCreate","onInput","multiple","groups","onOpen","ignoreOutsideClicksRefs","clearButton","selectAll","selectAllLabel","autoFocus","footer","listClassName","anchorRef","iconLeft","direction","spareDirection","possibleDirections"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./FlatSelect.css";import React,{forwardRef}from"react";import{FieldInput}from"../FieldComponents";import{useForkRef}from"../../hooks/useForkRef";import{cnMixSpace}from"../../mixs/MixSpace";import{cn}from"../../utils/bem";import{useSendToAtom,withCtx}from"../../utils/state";import{withDefault}from"./defaultProps";import{FlatSelectControlLayout}from"./FlatSelectControlLayout";import{FlatSelectFooter}from"./FlatSelectFooter";import{FlatSelectList}from"./FlatSelectList";import{FlatSelectRoot}from"./FlatSelectRoot";import{useFlatSelect}from"./useFlatSelect";import{useRenderItem}from"./useRenderItem";export var cnFlatSelect=cn("FlatSelect");var FlatSelectRender=function(a,b){var c=withDefault(a),d=useSendToAtom(c),e=c.form,f=c.disabled,g=c.value,h=c.isLoading,i=c.listRef,j=c.renderItem,k=c.getGroupLabel,l=c.labelForCreate,m=c.labelForEmptyItems,n=c.virtualScroll,o=c.onScrollToBottom,p=c.style,q=c.className,r=c.placeholder,s=c.iconClear,t=c.input,u=c.inputValue,v=c.inputDefaultValue,w=c.inputRef,x=c.size,y=c.view,z=c.bordered,A=c.getGroupKey,B=c.getItemDisabled,C=c.getItemGroupKey,D=c.getItemKey,E=c.getItemLabel,F=c.items,G=c.onChange,H=c.onCreate,I=c.onInput,J=c.multiple,K=c.groups,L=c.onOpen,M=c.ignoreOutsideClicksRefs,N=c.clearButton,O=c.selectAll,P=c.selectAllLabel,Q=c.autoFocus,R=c.footer,S=c.listClassName,T=c.anchorRef,U=c.iconLeft,V=c.direction,W=c.spareDirection,X=c.possibleDirections,Y=_objectWithoutProperties(c,_excluded),Z=useFlatSelect({propsAtom:d}),$=Z.getOptionActions,_=Z.openAtom,aa=Z.visibleItemsAtom,ba=Z.inputFocusAtom,ca=Z.handleInputFocus,da=Z.handleInputBlur,ea=Z.inputRef,fa=Z.handleInputChange,ga=Z.clearValue,ha=Z.optionsRefs,ia=Z.disabledAtom,ja=Z.listRef,ka=Z.clearButtonAtom,la=Z.highlightedIndexAtom,ma=Z.getItemKeyAtom,na=Z.valueAtom,oa=Z.onChangeAll,pa=Z.onChange,qa=Z.inputValueAtom,ra=Z.hasItemsAtom,sa=Z.groupsCounterAtom,ta=Z.dropdownZIndexAtom,ua=Z.rootRef,va=useRenderItem({getItemLabel:E,getItemDisabled:B,multiple:J,disabled:f,size:x,renderItem:j}),wa=!t||T||z?"clear":y,xa=!!T||z,ya=useForkRef([ea,w]);return React.createElement(FlatSelectRoot,Object.assign({},Y,{ref:useForkRef([b,ua]),className:cnFlatSelect({view:wa,bordered:"clear"===wa?xa:void 0,form:xa?e:void 0,size:x},[q]),style:_objectSpread(_objectSpread({},p),{},_defineProperty({},"--flat-select-control-height","var(--control-height-".concat(x,")"))),anchorRef:T,openAtom:_,tabIndex:0,direction:V,spareDirection:W,possibleDirections:X}),t&&React.createElement("div",{className:cnFlatSelect("Input",{border:"clear"===wa?xa:void 0,form:xa?e:void 0},["clear"===wa?cnMixSpace({pV:"2xs",pH:"s"}):void 0])},React.createElement(FlatSelectControlLayout,{form:e,disabled:f,separator:!0,onClear:ga,focusAtom:ba,iconClear:s,leftSide:U&&React.createElement(U,{size:"s"}),clearButtonAtom:ka,size:x,view:wa,valueAtom:qa},React.createElement(FieldInput,{onFocus:ca,onBlur:da,ref:ya,onChange:fa,value:u,defaultValue:v,disabled:f,placeholder:r}))),React.createElement(FlatSelectList,{className:cnFlatSelect("List",{borderTop:"clear"!==wa||t?void 0:xa,borderHorizontal:"clear"===wa?xa:void 0,borderBottom:"clear"!==wa||R?void 0:xa,formTop:xa&&!t?e:void 0,formBottom:xa&&!R?e:void 0},[S]),view:wa,size:x,form:e,valueAtom:na,getItemKeyAtom:ma,openAtom:_,getOptionActions:$,listRef:useForkRef([ja,i]),renderItem:va,getGroupLabel:k,visibleItemsAtom:aa,labelForCreate:l,isLoading:h,labelForEmptyItems:m,itemsRefs:ha,virtualScroll:n,onScrollToBottom:o,highlightedIndexAtom:la,onChangeAll:oa,onChange:pa,inputValueAtom:qa,hasItemsAtom:ra,groupsCounterAtom:sa,dropdownZIndexAtom:ta,selectAllLabel:P,disabledAtom:ia}),R&&React.createElement(FlatSelectFooter,{view:wa,bordered:xa,form:e,footer:R}))};export var FlatSelect=withCtx(forwardRef(FlatSelectRender));
//# sourceMappingURL=FlatSelect.js.map