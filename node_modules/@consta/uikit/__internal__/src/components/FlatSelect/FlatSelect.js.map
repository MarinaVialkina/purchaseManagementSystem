{"version":3,"file":"FlatSelect.js","names":["React","forwardRef","FieldInput","useForkRef","cnMixSpace","cn","useSendToAtom","withCtx","withDefault","FlatSelectControlLayout","FlatSelectFooter","FlatSelectList","FlatSelectRoot","useFlatSelect","useRenderItem","cnFlatSelect","FlatSelectRender","p","ref","props","propsAtom","form","disabled","value","isLoading","listRefProp","listRef","renderItemProp","renderItem","getGroupLabel","labelForCreate","labelForEmptyItems","virtualScroll","onScrollToBottom","style","className","placeholder","iconClear","input","inputValue","inputDefaultValue","inputRefProp","inputRef","size","viewProp","view","borderedProp","bordered","getGroupKey","getItemDisabled","getItemGroupKey","getItemKey","getItemLabel","items","onChangeProp","onChange","onCreateProp","onCreate","onInput","multiple","groups","onOpen","ignoreOutsideClicksRefs","clearButton","selectAll","selectAllLabel","autoFocus","footer","listClassName","anchorRef","IconLeft","iconLeft","direction","spareDirection","possibleDirections","otherProps","getOptionActions","openAtom","visibleItemsAtom","inputFocusAtom","handleInputFocus","handleInputBlur","handleInputChange","clearValue","optionsRefs","disabledAtom","clearButtonAtom","highlightedIndexAtom","getItemKeyAtom","valueAtom","onChangeAll","inputValueAtom","hasItemsAtom","groupsCounterAtom","dropdownZIndexAtom","rootRef","fieldInputRef","border","pV","pH","borderTop","borderHorizontal","borderBottom","formTop","formBottom","FlatSelect"],"sources":["../../../../../src/components/FlatSelect/FlatSelect.tsx"],"sourcesContent":["import './FlatSelect.css';\n\nimport React, { forwardRef } from 'react';\n\nimport { FieldInput } from '##/components/FieldComponents';\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { cnMixSpace } from '##/mixs/MixSpace';\nimport { cn } from '##/utils/bem';\nimport { useSendToAtom, withCtx } from '##/utils/state';\n\nimport { withDefault } from './defaultProps';\nimport { FlatSelectControlLayout } from './FlatSelectControlLayout';\nimport { FlatSelectFooter } from './FlatSelectFooter';\nimport { FlatSelectList } from './FlatSelectList';\nimport { FlatSelectRoot } from './FlatSelectRoot';\nimport {\n  FlatSelectComponent,\n  FlatSelectGroupDefault,\n  FlatSelectItemDefault,\n  FlatSelectProps,\n} from './types';\nimport { useFlatSelect } from './useFlatSelect';\nimport { useRenderItem } from './useRenderItem';\n\nexport const cnFlatSelect = cn('FlatSelect');\n\nconst FlatSelectRender = (\n  p: FlatSelectProps,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const props = withDefault(p);\n  const propsAtom = useSendToAtom(props);\n\n  const {\n    form,\n    disabled,\n    value,\n    isLoading,\n    listRef: listRefProp,\n    renderItem: renderItemProp,\n    getGroupLabel,\n    labelForCreate,\n    labelForEmptyItems,\n    virtualScroll,\n    onScrollToBottom,\n    style,\n    className,\n    placeholder,\n    iconClear,\n    input,\n    inputValue,\n    inputDefaultValue,\n    inputRef: inputRefProp,\n    size,\n    view: viewProp,\n    bordered: borderedProp,\n    getGroupKey,\n    getItemDisabled,\n    getItemGroupKey,\n    getItemKey,\n    getItemLabel,\n    items,\n    onChange: onChangeProp,\n    onCreate: onCreateProp,\n    onInput,\n    multiple,\n    groups,\n    onOpen,\n    ignoreOutsideClicksRefs,\n    clearButton,\n    selectAll,\n    selectAllLabel,\n    autoFocus,\n    footer,\n    listClassName,\n    anchorRef,\n    iconLeft: IconLeft,\n    direction,\n    spareDirection,\n    possibleDirections,\n    ...otherProps\n  } = props;\n\n  const {\n    getOptionActions,\n    openAtom,\n    visibleItemsAtom,\n    inputFocusAtom,\n    handleInputFocus,\n    handleInputBlur,\n    inputRef,\n    handleInputChange,\n    clearValue,\n    optionsRefs,\n    disabledAtom,\n    listRef,\n    clearButtonAtom,\n    highlightedIndexAtom,\n    getItemKeyAtom,\n    valueAtom,\n    onChangeAll,\n    onChange,\n    inputValueAtom,\n    hasItemsAtom,\n    groupsCounterAtom,\n    dropdownZIndexAtom,\n    rootRef,\n  } = useFlatSelect<FlatSelectItemDefault, FlatSelectGroupDefault, false>({\n    propsAtom,\n  });\n\n  const renderItem = useRenderItem({\n    getItemLabel,\n    getItemDisabled,\n    multiple,\n    disabled,\n    size,\n    renderItem: renderItemProp,\n  });\n\n  const view = !input || anchorRef || borderedProp ? 'clear' : viewProp;\n  const bordered = anchorRef ? true : borderedProp;\n  const fieldInputRef = useForkRef([inputRef, inputRefProp]);\n\n  return (\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    <FlatSelectRoot\n      {...otherProps}\n      ref={useForkRef([ref, rootRef])}\n      className={cnFlatSelect(\n        {\n          view,\n          bordered: view === 'clear' ? bordered : undefined,\n          form: bordered ? form : undefined,\n          size,\n        },\n        [className],\n      )}\n      style={{\n        ...style,\n        ['--flat-select-control-height' as string]: `var(--control-height-${size})`,\n      }}\n      anchorRef={anchorRef}\n      openAtom={openAtom}\n      tabIndex={0}\n      direction={direction}\n      spareDirection={spareDirection}\n      possibleDirections={possibleDirections}\n    >\n      {input && (\n        <div\n          className={cnFlatSelect(\n            'Input',\n            {\n              border: view === 'clear' ? bordered : undefined,\n              form: bordered ? form : undefined,\n            },\n            [view === 'clear' ? cnMixSpace({ pV: '2xs', pH: 's' }) : undefined],\n          )}\n        >\n          <FlatSelectControlLayout\n            form={form}\n            disabled={disabled}\n            separator\n            onClear={clearValue}\n            focusAtom={inputFocusAtom}\n            iconClear={iconClear}\n            leftSide={IconLeft && <IconLeft size=\"s\" />}\n            clearButtonAtom={clearButtonAtom}\n            size={size}\n            view={view}\n            valueAtom={inputValueAtom}\n          >\n            <FieldInput\n              onFocus={handleInputFocus}\n              onBlur={handleInputBlur}\n              ref={fieldInputRef}\n              onChange={handleInputChange}\n              value={inputValue}\n              defaultValue={inputDefaultValue}\n              disabled={disabled}\n              placeholder={placeholder}\n            />\n          </FlatSelectControlLayout>\n        </div>\n      )}\n      <FlatSelectList\n        className={cnFlatSelect(\n          'List',\n          {\n            borderTop: view === 'clear' && !input ? bordered : undefined,\n            borderHorizontal: view === 'clear' ? bordered : undefined,\n            borderBottom: view === 'clear' && !footer ? bordered : undefined,\n            formTop: bordered && !input ? form : undefined,\n            formBottom: bordered && !footer ? form : undefined,\n          },\n          [listClassName],\n        )}\n        view={view}\n        size={size}\n        form={form}\n        valueAtom={valueAtom}\n        getItemKeyAtom={getItemKeyAtom}\n        openAtom={openAtom}\n        getOptionActions={getOptionActions}\n        listRef={useForkRef([listRef, listRefProp])}\n        renderItem={renderItem}\n        getGroupLabel={getGroupLabel}\n        visibleItemsAtom={visibleItemsAtom}\n        labelForCreate={labelForCreate}\n        isLoading={isLoading}\n        labelForEmptyItems={labelForEmptyItems}\n        itemsRefs={optionsRefs}\n        virtualScroll={virtualScroll}\n        onScrollToBottom={onScrollToBottom}\n        highlightedIndexAtom={highlightedIndexAtom}\n        onChangeAll={onChangeAll}\n        onChange={onChange}\n        inputValueAtom={inputValueAtom}\n        hasItemsAtom={hasItemsAtom}\n        groupsCounterAtom={groupsCounterAtom}\n        dropdownZIndexAtom={dropdownZIndexAtom}\n        selectAllLabel={selectAllLabel}\n        disabledAtom={disabledAtom}\n      />\n      {footer && (\n        <FlatSelectFooter\n          view={view}\n          bordered={bordered}\n          form={form}\n          footer={footer}\n        />\n      )}\n    </FlatSelectRoot>\n  );\n};\n\nexport const FlatSelect = withCtx(\n  forwardRef(FlatSelectRender),\n) as FlatSelectComponent;\n"],"mappings":"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"}