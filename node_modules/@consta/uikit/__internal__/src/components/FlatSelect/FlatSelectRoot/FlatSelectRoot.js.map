{"version":3,"file":"FlatSelectRoot.js","names":["useAtom","React","forwardRef","useRef","Transition","Popover","useForkRef","animateTimeout","cnMixPopoverAnimate","cn","cnFlatSelectRoot","FlatSelectRoot","props","ref","className","anchorRef","openAtom","direction","spareDirection","possibleDirections","viewportRef","otherProps","contentRef","contentForkedRef","withAnchor","open","animate"],"sources":["../../../../../../src/components/FlatSelect/FlatSelectRoot/FlatSelectRoot.tsx"],"sourcesContent":["import './FlatSelectRoot.css';\n\nimport { AtomMut } from '@reatom/framework';\nimport { useAtom } from '@reatom/npm-react';\nimport React, { forwardRef, useRef } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport { Direction, Popover } from '##/components/Popover';\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { animateTimeout, cnMixPopoverAnimate } from '##/mixs/MixPopoverAnimate';\nimport { cn } from '##/utils/bem';\nimport { PropsWithHTMLAttributesAndRef } from '##/utils/types/PropsWithHTMLAttributes';\n\nexport type FlatSelectRootProps = PropsWithHTMLAttributesAndRef<\n  {\n    anchorRef?: React.RefObject<HTMLElement>;\n    openAtom: AtomMut<boolean>;\n    direction?: Direction;\n    spareDirection?: Direction;\n    possibleDirections?: Direction[];\n    viewportRef?: React.RefObject<HTMLElement>;\n  },\n  HTMLDivElement\n>;\n\nexport const cnFlatSelectRoot = cn('FlatSelectRoot');\n\nexport const FlatSelectRoot: React.FC<FlatSelectRootProps> = forwardRef(\n  (props, ref) => {\n    const {\n      className,\n      anchorRef,\n      openAtom,\n      direction = 'downStartLeft',\n      spareDirection = 'downStartLeft',\n      possibleDirections = [\n        'downStartLeft',\n        'downStartRight',\n        'upStartLeft',\n        'upStartRight',\n        'leftStartDown',\n        'leftStartUp',\n      ],\n      viewportRef,\n      ...otherProps\n    } = props;\n\n    const contentRef = useRef(null);\n    const contentForkedRef = useForkRef([contentRef, ref]);\n    const withAnchor = !!anchorRef;\n    const [open] = useAtom(openAtom);\n\n    if (withAnchor) {\n      return (\n        <Transition\n          in={open}\n          unmountOnExit\n          timeout={animateTimeout}\n          nodeRef={contentRef}\n        >\n          {(animate) => (\n            <Popover\n              {...otherProps}\n              className={cnFlatSelectRoot({ withAnchor }, [\n                className,\n                cnMixPopoverAnimate({ animate }),\n              ])}\n              ref={contentForkedRef}\n              anchorRef={anchorRef}\n              equalAnchorWidth\n              offset=\"2xs\"\n              direction={direction}\n              spareDirection={spareDirection}\n              possibleDirections={possibleDirections}\n              viewportRef={viewportRef}\n            />\n          )}\n        </Transition>\n      );\n    }\n\n    return (\n      <div\n        {...otherProps}\n        className={cnFlatSelectRoot(null, [className])}\n        ref={ref}\n      />\n    );\n  },\n);\n"],"mappings":"yQAAA,6BAGA,OAASA,OAAT,KAAwB,mBAAxB,CACA,MAAOC,MAAP,EAAgBC,UAAhB,CAA4BC,MAA5B,KAA0C,OAA1C,CACA,OAASC,UAAT,KAA2B,wBAA3B,CAEA,OAAoBC,OAApB,qBACA,OAASC,UAAT,iCACA,OAASC,cAAT,CAAyBC,mBAAzB,uCACA,OAASC,EAAT,0BAeA,MAAO,IAAMC,iBAAgB,CAAGD,EAAE,CAAC,gBAAD,CAA3B,CAEP,MAAO,IAAME,eAA6C,CAAGT,UAAU,CACrE,SAACU,CAAD,CAAQC,CAAR,CAAgB,IAEZC,EAFY,CAiBVF,CAjBU,CAEZE,SAFY,CAGZC,CAHY,CAiBVH,CAjBU,CAGZG,SAHY,CAIZC,CAJY,CAiBVJ,CAjBU,CAIZI,QAJY,GAiBVJ,CAjBU,CAKZK,SALY,CAKZA,CALY,YAKA,eALA,KAiBVL,CAjBU,CAMZM,cANY,CAMZA,CANY,YAMK,eANL,KAiBVN,CAjBU,CAOZO,kBAPY,CAOZA,CAPY,YAOS,CACnB,eADmB,CAEnB,gBAFmB,CAGnB,aAHmB,CAInB,cAJmB,CAKnB,eALmB,CAMnB,aANmB,CAPT,GAeZC,CAfY,CAiBVR,CAjBU,CAeZQ,WAfY,CAgBTC,CAhBS,0BAiBVT,CAjBU,YAmBRU,CAAU,CAAGnB,MAAM,CAAC,IAAD,CAnBX,CAoBRoB,CAAgB,CAAGjB,UAAU,CAAC,CAACgB,CAAD,CAAaT,CAAb,CAAD,CApBrB,CAqBRW,CAAU,CAAG,CAAC,CAACT,CArBP,GAsBCf,OAAO,CAACgB,CAAD,CAtBR,uBAsBPS,CAtBO,YAwBVD,EAxBU,CA0BV,oBAAC,UAAD,EACE,GAAIC,CADN,CAEE,aAAa,GAFf,CAGE,OAAO,CAAElB,cAHX,CAIE,OAAO,CAAEe,CAJX,EAMG,SAACI,CAAD,QACC,qBAAC,OAAD,kBACML,CADN,EAEE,SAAS,CAAEX,gBAAgB,CAAC,CAAEc,UAAU,CAAVA,CAAF,CAAD,CAAiB,CAC1CV,CAD0C,CAE1CN,mBAAmB,CAAC,CAAEkB,OAAO,CAAPA,CAAF,CAAD,CAFuB,CAAjB,CAF7B,CAME,GAAG,CAAEH,CANP,CAOE,SAAS,CAAER,CAPb,CAQE,gBAAgB,GARlB,CASE,MAAM,CAAC,KATT,CAUE,SAAS,CAAEE,CAVb,CAWE,cAAc,CAAEC,CAXlB,CAYE,kBAAkB,CAAEC,CAZtB,CAaE,WAAW,CAAEC,CAbf,GADD,CANH,CA1BU,CAsDZ,2CACMC,CADN,EAEE,SAAS,CAAEX,gBAAgB,CAAC,IAAD,CAAO,CAACI,CAAD,CAAP,CAF7B,CAGE,GAAG,CAAED,CAHP,GAMH,CA7DoE,CAAhE"}