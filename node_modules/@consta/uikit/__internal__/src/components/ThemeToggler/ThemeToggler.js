import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["size","items","value","onChange","getItemKey","getItemLabel","getItemIcon","direction","possibleDirections","style","view"];import{AnimateIconBaseProvider}from"@consta/icons/AnimateIconBaseProvider";import{IconCheck}from"@consta/icons/IconCheck";import{withAnimateBaseHOC}from"@consta/icons/withAnimateBaseHOC";import React,{forwardRef,useMemo,useRef}from"react";import{Button}from"../Button";import{ContextMenu}from"../ContextMenu";import{usePropsHandler}from"../EventInterceptor/usePropsHandler";import{useChoiceGroup}from"../../hooks/useChoiceGroup";import{useFlag}from"../../hooks/useFlag";import{useForkRef}from"../../hooks/useForkRef";import{contextMenuSizeMap,iconSizeMap,withDefaultGetters}from"./helpers";import{themeTogglerPropSizeDefault}from"./types";export var COMPONENT_NAME="ThemeToggler";var ThemeTogglerRender=function(a,b){var c,d=useRef(null),e=useForkRef([d,b]),f=usePropsHandler(COMPONENT_NAME,withDefaultGetters(a),e),g=f.size,h=void 0===g?themeTogglerPropSizeDefault:g,i=f.items,j=f.value,k=f.onChange,l=f.getItemKey,m=f.getItemLabel,n=f.getItemIcon,o=f.direction,p=f.possibleDirections,q=f.style,r=f.view,s=void 0===r?"clear":r,t=_objectWithoutProperties(f,_excluded),u=useFlag(),v=_slicedToArray(u,2),w=v[0],x=v[1],y=useChoiceGroup({value:j,getKey:l||m,callBack:k,multiple:!1}),z=y.getOnChange,A=y.getChecked,B=iconSizeMap[h],C=contextMenuSizeMap[h],D=useMemo(function(){return withAnimateBaseHOC({icons:i.map(n),transition:260})},[i]);return 1>=i.length?null:React.createElement(React.Fragment,null,React.createElement(AnimateIconBaseProvider,{activeIndex:null!==(c=i.findIndex(function(a){return A(a)}))&&void 0!==c?c:i[0]},React.createElement(Button,Object.assign({},t,{ref:e,iconLeft:D,onClick:function onButtonClick(a){2<i.length?x.toggle():z(i[A(i[0])?1:0])(a)},onlyIcon:!0,type:"button",size:h,view:s,style:q}))),2<i.length&&React.createElement(ContextMenu,{isOpen:w,offset:"s",items:i,getItemLabel:m,getItemKey:l||m,anchorRef:d,direction:o,possibleDirections:p,getItemLeftSide:function renderIcons(a){var b=n(a);if(b)return React.createElement(b,{size:B})},getItemRightSide:function renderChecks(a){if(A(a))return React.createElement(IconCheck,{size:B})},onClickOutside:x.off,onItemClick:function onItemClick(a,b){var c=b.e;return z(a)(c)},size:C,style:"number"==typeof(null===q||void 0===q?void 0:q.zIndex)?{zIndex:q.zIndex+1}:void 0}))};export var ThemeToggler=forwardRef(ThemeTogglerRender);export*from"./types";
//# sourceMappingURL=ThemeToggler.js.map