import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["items","className","children","onlyIcon","opened","onOpen","getItemIcon","getItemLabel","getItemOnClick","onItemClick","scrollContainerRef","title"];import{IconKebab}from"@consta/icons/IconKebab";import React,{forwardRef,useCallback,useEffect,useRef}from"react";import{Button}from"../../Button";import{ContextMenu}from"../../ContextMenu";import{Text}from"../../Text";import{withTooltip}from"../../../hocs/withTooltip";import{useFlag}from"../../../hooks/useFlag";import{useForkRef}from"../../../hooks/useForkRef";import{useMutableRef}from"../../../hooks/useMutableRef";import{getItemClick}from"../../../utils/getItemClick";import{withDefaultGetters}from"./helpers";var ButtonWithTooltip=withTooltip({size:"s"})(Button),NotificationActionsRender=function(a,b){var c,d=withDefaultGetters(a),e=d.items,f=void 0===e?[]:e,g=d.className,h=d.children,i=d.onlyIcon,j=d.opened,k=void 0!==j&&j,l=d.onOpen,m=d.getItemIcon,n=d.getItemLabel,o=d.getItemOnClick,p=d.onItemClick,q=d.scrollContainerRef,r=d.title,s=_objectWithoutProperties(d,_excluded),t=useRef(null),u=useFlag(k),v=_slicedToArray(u,2),w=v[0],x=v[1],y=useCallback(function(a){a.stopPropagation(),x.toggle()},[x]),z=useMutableRef(l),A=useForkRef([t,b]),B="number"==typeof(null===(c=a.style)||void 0===c?void 0:c.zIndex)?a.style.zIndex+1:void 0;return useEffect(function(){x[k?"on":"off"]()},[k]),useEffect(function(){var a;null===(a=z.current)||void 0===a?void 0:a.call(z,w)},[w,z]),useEffect(function(){return null!==q&&void 0!==q&&q.current&&q.current.addEventListener("scroll",x.off),function(){null!==q&&void 0!==q&&q.current&&q.current.removeEventListener("scroll",x.off)}},[q]),1!==f.length||i?1===f.length&&m(f[0])&&i?React.createElement(ButtonWithTooltip,Object.assign({},s,{className:g,size:"xs",view:"clear",iconLeft:m(f[0]),onClick:getItemClick(f[0],o,p),tooltipProps:{tooltipContent:React.createElement(Text,{view:"primary",size:"xs"},n(f[0]))},ref:b})):React.createElement(React.Fragment,null,React.createElement(Button,Object.assign({},s,{className:g,size:"xs",view:"clear",iconLeft:IconKebab,ref:A,onClick:y})),React.createElement(ContextMenu,{role:"listbox",offset:"2xs",isOpen:w,size:"s",items:f,getItemLabel:n,onItemClick:p,getItemOnClick:o,getItemKey:n,getItemLeftIcon:m,anchorRef:t,onClickOutside:x.off,possibleDirections:["downStartRight","upStartRight"],direction:"downStartRight",style:{zIndex:B}})):React.createElement(Button,Object.assign({},s,{className:g,size:"xs",view:"clear",iconLeft:m(f[0]),onClick:getItemClick(f[0],o,p),label:n(f[0]),ref:b}))};export var NotificationActions=forwardRef(NotificationActionsRender);
//# sourceMappingURL=NotificationActions.js.map