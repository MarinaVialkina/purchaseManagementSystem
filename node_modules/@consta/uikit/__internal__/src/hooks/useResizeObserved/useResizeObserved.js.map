{"version":3,"file":"useResizeObserved.js","names":["useLayoutEffect","useState","useMutableRef","useResizeObserved","refs","mapper","calculateDimensionsRef","map","ref","current","dimensions","setDimensions","resizeObserver","ResizeObserver","observe","disconnect"],"sources":["../../../../../src/hooks/useResizeObserved/useResizeObserved.ts"],"sourcesContent":["import { RefObject, useLayoutEffect, useState } from 'react';\n\nimport { useMutableRef } from '##/hooks/useMutableRef';\n\nexport const useResizeObserved = <\n  ELEMENT extends HTMLElement | SVGGraphicsElement,\n  RETURN_TYPE,\n>(\n  refs: Array<RefObject<ELEMENT>>,\n  mapper: (el: ELEMENT | null) => RETURN_TYPE,\n): RETURN_TYPE[] => {\n  const calculateDimensionsRef = useMutableRef(() =>\n    refs.map((ref) => mapper(ref.current)),\n  );\n\n  const [dimensions, setDimensions] = useState<RETURN_TYPE[]>(\n    calculateDimensionsRef.current,\n  );\n\n  useLayoutEffect(() => {\n    setDimensions(calculateDimensionsRef.current);\n  }, [refs]);\n\n  useLayoutEffect(() => {\n    const resizeObserver = new ResizeObserver(() => {\n      setDimensions(calculateDimensionsRef.current);\n    });\n\n    for (const ref of refs) {\n      ref.current && resizeObserver.observe(ref.current);\n    }\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [refs]);\n\n  return dimensions;\n};\n"],"mappings":"stCAAA,OAAoBA,eAApB,CAAqCC,QAArC,KAAqD,OAArD,CAEA,OAASC,aAAT,wBAEA,MAAO,IAAMC,kBAAiB,CAAG,SAI/BC,CAJ+B,CAK/BC,CAL+B,CAMb,IACZC,EAAsB,CAAGJ,aAAa,CAAC,iBAC3CE,EAAI,CAACG,GAAL,CAAS,SAACC,CAAD,QAASH,EAAM,CAACG,CAAG,CAACC,OAAL,CAAf,CAAT,CAD2C,CAAD,CAD1B,GAKkBR,QAAQ,CAC1CK,CAAsB,CAACG,OADmB,CAL1B,uBAKXC,CALW,MAKCC,CALD,MA2BlB,MAlBAX,gBAAe,CAAC,UAAM,CACpBW,CAAa,CAACL,CAAsB,CAACG,OAAxB,CACd,CAFc,CAEZ,CAACL,CAAD,CAFY,CAkBf,CAdAJ,eAAe,CAAC,UAAM,OACdY,CAAc,CAAG,GAAIC,eAAJ,CAAmB,UAAM,CAC9CF,CAAa,CAACL,CAAsB,CAACG,OAAxB,CACd,CAFsB,CADH,8BAKFL,CALE,MAKpB,2BAAwB,IAAbI,EAAa,SACtBA,CAAG,CAACC,OAAJ,EAAeG,CAAc,CAACE,OAAf,CAAuBN,CAAG,CAACC,OAA3B,CAChB,CAPmB,+BASpB,MAAO,WAAM,CACXG,CAAc,CAACG,UAAf,EACD,CACF,CAZc,CAYZ,CAACX,CAAD,CAZY,CAcf,CAAOM,CACR,CAlCM"}