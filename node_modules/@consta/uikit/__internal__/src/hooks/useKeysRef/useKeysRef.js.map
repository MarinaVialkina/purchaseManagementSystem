{"version":3,"file":"useKeysRef.js","names":["useEffect","useMutableRef","useKeysRef","params","ref","keys","isActive","eventType","eventHandler","refs","fn","e","current","code","key","addEventListener","removeEventListener"],"sources":["../../../../../src/hooks/useKeysRef/useKeysRef.ts"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport { useMutableRef } from '##/hooks/useMutableRef';\nimport { KeyCode } from '##/utils/types/KeyCode';\n\nexport type KeyHandlers = Partial<\n  Record<KeyCode, (e: KeyboardEvent) => void>\n> & {\n  [key: string]: (e: KeyboardEvent) => void;\n};\n\ntype UseKeysProps = {\n  ref?: React.RefObject<HTMLElement>;\n  keys: KeyHandlers;\n  isActive?: boolean | (() => boolean | undefined);\n  eventHandler?: (event: KeyboardEvent) => void;\n  eventType?: 'keypress' | 'keydown' | 'keyup';\n};\n\nexport const useKeysRef = (params: UseKeysProps) => {\n  const { ref, keys, isActive, eventType = 'keydown', eventHandler } = params;\n\n  const refs = useMutableRef([keys, isActive, eventHandler] as const);\n\n  useEffect(() => {\n    const fn = (e: KeyboardEvent) => {\n      if (\n        typeof refs.current[1] === 'function'\n          ? refs.current[1]()\n          : refs.current[1]\n      ) {\n        (\n          refs.current[0][e.code as KeyCode] ||\n          refs.current[0][e.key as KeyCode]\n        )?.(e);\n      }\n      refs.current[2]?.(e);\n    };\n\n    ref?.current?.addEventListener(eventType, fn);\n\n    return () => {\n      ref?.current?.removeEventListener(eventType, fn);\n    };\n  }, [ref?.current, eventType]);\n};\n"],"mappings":"AAAA,OAAgBA,SAAhB,KAAiC,OAAjC,CAEA,OAASC,aAAT,wBAiBA,MAAO,IAAMC,WAAU,CAAG,SAACC,CAAD,CAA0B,IAC1CC,EAD0C,CACmBD,CADnB,CAC1CC,GAD0C,CACrCC,CADqC,CACmBF,CADnB,CACrCE,IADqC,CAC/BC,CAD+B,CACmBH,CADnB,CAC/BG,QAD+B,GACmBH,CADnB,CACrBI,SADqB,CACrBA,CADqB,YACT,SADS,GACEC,CADF,CACmBL,CADnB,CACEK,YADF,CAG5CC,CAAI,CAAGR,aAAa,CAAC,CAACI,CAAD,CAAOC,CAAP,CAAiBE,CAAjB,CAAD,CAHwB,CAKlDR,SAAS,CAAC,UAAM,OACRU,CAAE,CAAG,SAACC,CAAD,CAAsB,SAC/B,GAC6B,UAA3B,QAAOF,EAAI,CAACG,OAAL,CAAa,CAAb,CAAP,CACIH,CAAI,CAACG,OAAL,CAAa,CAAb,GADJ,CAEIH,CAAI,CAACG,OAAL,CAAa,CAAb,CAHN,CAIE,iBAEEH,CAAI,CAACG,OAAL,CAAa,CAAb,EAAgBD,CAAC,CAACE,IAAlB,GACAJ,CAAI,CAACG,OAAL,CAAa,CAAb,EAAgBD,CAAC,CAACG,GAAlB,CAHF,qBACA,EAGIH,CAHJ,CAID,CAV8B,UAW/B,GAAAF,CAAI,CAACG,OAAL,EAAa,CAAb,CAX+B,qBAW/B,SAAkBD,CAAlB,CACD,CAba,CAiBd,cAFAP,CAEA,WAFAA,CAEA,YAFAA,CAAG,CAAEQ,OAEL,qBAFA,EAAcG,gBAAd,CAA+BR,CAA/B,CAA0CG,CAA1C,CAEA,CAAO,UAAM,cACXN,CADW,WACXA,CADW,YACXA,CAAG,CAAEQ,OADM,qBACX,EAAcI,mBAAd,CAAkCT,CAAlC,CAA6CG,CAA7C,CACD,CACF,CApBQ,CAoBN,QAACN,CAAD,WAACA,CAAD,QAACA,CAAG,CAAEQ,OAAN,CAAeL,CAAf,CApBM,CAqBV,CA1BM"}