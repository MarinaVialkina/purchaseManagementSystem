{"version":3,"file":"TableHeader.js","names":["forkRef","useAtom","React","forwardRef","HeaderDataCell","cn","cnTableCell","cnTableHeader","DefaultRenderHeaderCell","title","TableHeader","props","ref","headersAtom","className","stickyLeftOffsetsAtom","stickyRightOffsetsAtom","stickyHeader","headerCellsRefsAtom","bordersAtom","tableRef","otherProps","headers","borders","stickyLeftOffsets","stickyRightOffsets","headerCellsRefs","map","column","index","style","position","colSpan","gridColumnEnd","rowSpan","gridRowEnd","RenderHeaderCell","renderHeaderCell","pinned","separator","isSeparator","borderLeft","borderRight","borderTop","sticky","up","top","undefined","left","right"],"sources":["../../../../../../src/components/Table/TableHeader/TableHeader.tsx"],"sourcesContent":["import './TableHeader.css';\n\nimport { forkRef } from '@consta/uikit/useForkRef';\nimport { useAtom } from '@reatom/npm-react';\nimport React, { forwardRef } from 'react';\n\nimport { HeaderDataCell } from '##/components/HeaderDataCell';\nimport { cn } from '##/utils/bem';\n\nimport { cnTableCell } from '../TableCell';\nimport { TableHeaderComponent, TableRenderHeaderCell } from '../types';\n\nexport const cnTableHeader = cn('TableHeader');\n\nconst DefaultRenderHeaderCell: TableRenderHeaderCell = ({ title }) => (\n  <HeaderDataCell>{title}</HeaderDataCell>\n);\n\nexport const TableHeader: TableHeaderComponent = forwardRef((props, ref) => {\n  const {\n    headersAtom,\n    className,\n    stickyLeftOffsetsAtom,\n    stickyRightOffsetsAtom,\n    stickyHeader,\n    headerCellsRefsAtom,\n    bordersAtom,\n    tableRef,\n    ...otherProps\n  } = props;\n\n  const [headers] = useAtom(headersAtom);\n  const [borders] = useAtom(bordersAtom);\n  const [stickyLeftOffsets] = useAtom(stickyLeftOffsetsAtom);\n  const [stickyRightOffsets] = useAtom(stickyRightOffsetsAtom);\n  const [headerCellsRefs] = useAtom(headerCellsRefsAtom);\n\n  return (\n    <div {...otherProps} className={cnTableHeader(null, [className])} ref={ref}>\n      {headers.map((column, index) => {\n        const style: React.CSSProperties = {};\n        if (column.position!.colSpan) {\n          style.gridColumnEnd = `span ${column.position!.colSpan}`;\n        }\n        if (column.position!.rowSpan) {\n          style.gridRowEnd = `span ${column.position!.rowSpan}`;\n        }\n\n        const RenderHeaderCell =\n          column.renderHeaderCell || DefaultRenderHeaderCell;\n\n        return (\n          <div\n            className={cnTableHeader('Cell', { pinned: !!column.pinned }, [\n              cnTableCell({\n                separator: column.isSeparator,\n                borderLeft: borders[index][0],\n                borderRight: borders[index][1],\n                borderTop: borders[index][2],\n                sticky: !!column.pinned || stickyHeader,\n                up: !!column.pinned,\n              }),\n            ])}\n            style={{\n              ...style,\n              top: stickyHeader\n                ? `var(--table-column-sticky-top-offset-${index})`\n                : undefined,\n              left:\n                column.pinned === 'left'\n                  ? `var(--table-column-sticky-left-offset-${stickyLeftOffsets[index]})`\n                  : undefined,\n              right:\n                column.pinned === 'right'\n                  ? `var(--table-column-sticky-right-offset-${stickyRightOffsets[index]})`\n                  : undefined,\n            }}\n            ref={forkRef([headerCellsRefs[index]])}\n            key={cnTableHeader('Cell', { index })}\n          >\n            {column.isSeparator ? null : (\n              <RenderHeaderCell\n                title={column.title}\n                index={index}\n                tableRef={tableRef}\n              />\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n});\n"],"mappings":"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"}