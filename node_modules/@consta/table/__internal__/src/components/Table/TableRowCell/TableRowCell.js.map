{"version":3,"file":"TableRowCell.js","names":["React","forwardRef","memo","DataCell","cn","isNotNil","isNumber","isString","cnTableCell","cnTableRowCell","getCellDataByAccessor","row","accessor","separator","data","toString","TableRowCellRender","props","ref","className","index","pinned","borderLeft","borderRight","borderTop","miss","RenderCell","renderCell","rowIndex","tableRef","otherProps","sticky","left","undefined","right","gridColumn","TableRowCell"],"sources":["../../../../../../src/components/Table/TableRowCell/TableRowCell.tsx"],"sourcesContent":["import './TableRowCell.css';\n\nimport { PropsWithHTMLAttributesAndRef } from '@consta/uikit/__internal__/src/utils/types/PropsWithHTMLAttributes';\nimport React, { forwardRef, memo } from 'react';\n\nimport { DataCell } from '##/components/DataCell';\nimport { cn } from '##/utils/bem';\nimport { isNotNil, isNumber, isString } from '##/utils/type-guards';\n\nimport { cnTableCell } from '../TableCell';\nimport { TableDefaultRow, TableRenderCell } from '../types';\n\ntype TableRowCellProps = PropsWithHTMLAttributesAndRef<\n  {\n    row: TableDefaultRow;\n    index: number;\n    separator?: boolean;\n    accessor?: string;\n    pinned?: 'left' | 'right';\n    borderLeft: boolean;\n    borderRight: boolean;\n    borderTop: boolean;\n    miss: number;\n    renderCell?: TableRenderCell<TableDefaultRow> | undefined;\n    rowIndex: number;\n    tableRef: React.RefObject<HTMLDivElement>;\n  },\n  HTMLDivElement\n>;\n\nconst cnTableRowCell = cn('TableRowCell');\n\nconst getCellDataByAccessor = <T,>(\n  row: T,\n  accessor?: (keyof T extends string ? string & keyof T : never) | undefined,\n  separator?: boolean,\n) => {\n  if (separator) {\n    return '';\n  }\n\n  if (!accessor) {\n    return '';\n  }\n\n  const data = row?.[accessor];\n\n  if (isString(data) || isNumber(data)) {\n    return <DataCell>{data.toString()}</DataCell>;\n  }\n\n  return '';\n};\n\nconst TableRowCellRender = (\n  props: TableRowCellProps,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const {\n    className,\n    index,\n    separator,\n    accessor,\n    pinned,\n    borderLeft,\n    borderRight,\n    borderTop,\n    miss,\n    renderCell: RenderCell,\n    row,\n    rowIndex,\n    tableRef,\n    ...otherProps\n  } = props;\n\n  return (\n    <div\n      {...otherProps}\n      ref={ref}\n      className={cnTableRowCell(\n        {\n          pinned: !!pinned,\n        },\n        [\n          cnTableCell({\n            separator,\n            borderLeft,\n            borderRight,\n            borderTop,\n            sticky: !!pinned,\n          }),\n          className,\n        ],\n      )}\n      style={{\n        left:\n          pinned === 'left'\n            ? `var(--table-column-sticky-left-offset-${index})`\n            : undefined,\n        right:\n          pinned === 'right'\n            ? `var(--table-column-sticky-right-offset-${index})`\n            : undefined,\n        gridColumn: `${index + 1} / span ${miss > 0 ? miss + 1 : 1}`,\n      }}\n    >\n      {isNotNil(RenderCell) ? (\n        <RenderCell\n          row={row}\n          rowIndex={rowIndex}\n          columnIndex={index}\n          tableRef={tableRef}\n        />\n      ) : (\n        getCellDataByAccessor(row, accessor, separator)\n      )}\n    </div>\n  );\n};\n\nexport const TableRowCell = memo(forwardRef(TableRowCellRender));\n"],"mappings":";;AAAA;AAGA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,IAA5B,QAAwC,OAAxC;AAEA,SAASC,QAAT;AACA,SAASC,EAAT;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,QAA7B;AAEA,SAASC,WAAT;AAqBA,IAAMC,cAAc,GAAGL,EAAE,CAAC,cAAD,CAAzB;;AAEA,IAAMM,qBAAqB,GAAG,SAAxBA,qBAAwB,CAC5BC,GAD4B,EAE5BC,QAF4B,EAG5BC,SAH4B,EAIzB;EACH,IAAIA,SAAJ,EAAe;IACb,OAAO,EAAP;EACD;;EAED,IAAI,CAACD,QAAL,EAAe;IACb,OAAO,EAAP;EACD;;EAED,IAAME,IAAI,GAAGH,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAGC,QAAH,CAAhB;;EAEA,IAAIL,QAAQ,CAACO,IAAD,CAAR,IAAkBR,QAAQ,CAACQ,IAAD,CAA9B,EAAsC;IACpC,OAAO,oBAAC,QAAD,QAAWA,IAAI,CAACC,QAAL,EAAX,CAAP;EACD;;EAED,OAAO,EAAP;AACD,CApBD;;AAsBA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CACzBC,KADyB,EAEzBC,GAFyB,EAGtB;EACH,IACEC,SADF,GAeIF,KAfJ,CACEE,SADF;EAAA,IAEEC,KAFF,GAeIH,KAfJ,CAEEG,KAFF;EAAA,IAGEP,SAHF,GAeII,KAfJ,CAGEJ,SAHF;EAAA,IAIED,QAJF,GAeIK,KAfJ,CAIEL,QAJF;EAAA,IAKES,MALF,GAeIJ,KAfJ,CAKEI,MALF;EAAA,IAMEC,UANF,GAeIL,KAfJ,CAMEK,UANF;EAAA,IAOEC,WAPF,GAeIN,KAfJ,CAOEM,WAPF;EAAA,IAQEC,SARF,GAeIP,KAfJ,CAQEO,SARF;EAAA,IASEC,IATF,GAeIR,KAfJ,CASEQ,IATF;EAAA,IAUcC,UAVd,GAeIT,KAfJ,CAUEU,UAVF;EAAA,IAWEhB,GAXF,GAeIM,KAfJ,CAWEN,GAXF;EAAA,IAYEiB,QAZF,GAeIX,KAfJ,CAYEW,QAZF;EAAA,IAaEC,QAbF,GAeIZ,KAfJ,CAaEY,QAbF;EAAA,IAcKC,UAdL,4BAeIb,KAfJ;;EAiBA,OACE,6CACMa,UADN;IAEE,GAAG,EAAEZ,GAFP;IAGE,SAAS,EAAET,cAAc,CACvB;MACEY,MAAM,EAAE,CAAC,CAACA;IADZ,CADuB,EAIvB,CACEb,WAAW,CAAC;MACVK,SAAS,EAATA,SADU;MAEVS,UAAU,EAAVA,UAFU;MAGVC,WAAW,EAAXA,WAHU;MAIVC,SAAS,EAATA,SAJU;MAKVO,MAAM,EAAE,CAAC,CAACV;IALA,CAAD,CADb,EAQEF,SARF,CAJuB,CAH3B;IAkBE,KAAK,EAAE;MACLa,IAAI,EACFX,MAAM,KAAK,MAAX,mDAC6CD,KAD7C,SAEIa,SAJD;MAKLC,KAAK,EACHb,MAAM,KAAK,OAAX,oDAC8CD,KAD9C,SAEIa,SARD;MASLE,UAAU,YAAKf,KAAK,GAAG,CAAb,qBAAyBK,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAA/C;IATL;EAlBT,IA8BGpB,QAAQ,CAACqB,UAAD,CAAR,GACC,oBAAC,UAAD;IACE,GAAG,EAAEf,GADP;IAEE,QAAQ,EAAEiB,QAFZ;IAGE,WAAW,EAAER,KAHf;IAIE,QAAQ,EAAES;EAJZ,EADD,GAQCnB,qBAAqB,CAACC,GAAD,EAAMC,QAAN,EAAgBC,SAAhB,CAtCzB,CADF;AA2CD,CAhED;;AAkEA,OAAO,IAAMuB,YAAY,GAAGlC,IAAI,CAACD,UAAU,CAACe,kBAAD,CAAX,CAAzB"}