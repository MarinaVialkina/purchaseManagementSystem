{"version":3,"file":"TableData.js","names":["useAtom","React","forwardRef","cn","isNotNil","TableRow","cnTableData","getRowMouseEvent","row","fn","e","undefined","getKey","getRowKey","rowIndex","key","id","TableDataRender","props","ref","className","rows","lowHeadersAtom","rowsRefsAtom","sliceAtom","zebraStriped","onRowMouseEnter","onRowMouseLeave","onRowClick","tableRef","rowHoverEffect","leftNoVisibleItemsAtom","rightNoVisibleItemsAtom","otherProps","rowsRefs","slice","map","index","rowZebraStriped","TableData"],"sources":["../../../../../../src/components/Table/TableData/TableData.tsx"],"sourcesContent":["import './TableData.css';\n\nimport { useAtom } from '@reatom/npm-react';\nimport React, { forwardRef } from 'react';\n\nimport { cn } from '##/utils/bem';\nimport { isNotNil } from '##/utils/type-guards';\n\nimport { TableRow } from '../TableRow';\nimport {\n  TableDataComponent,\n  TableDataProps,\n  TableDefaultRow,\n  TableRowMouseEvent,\n} from '../types';\n\nexport const cnTableData = cn('TableData');\n\nconst getRowMouseEvent = (\n  row: TableDefaultRow,\n  fn?: TableRowMouseEvent<TableDefaultRow>,\n) =>\n  fn\n    ? (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => fn(row, { e })\n    : undefined;\n\nconst getKey = (\n  row: TableDefaultRow,\n  getRowKey: ((row: TableDefaultRow) => string | number) | undefined,\n  rowIndex: number,\n) => {\n  const key = getRowKey?.(row);\n  if (isNotNil(key)) {\n    return key;\n  }\n  if (typeof row.id === 'string' || typeof row.id === 'number') {\n    return row.id;\n  }\n  return rowIndex;\n};\n\nconst TableDataRender = (\n  props: TableDataProps,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const {\n    className,\n    rows,\n    lowHeadersAtom,\n    rowsRefsAtom,\n    sliceAtom,\n    zebraStriped = false,\n    onRowMouseEnter,\n    onRowMouseLeave,\n    onRowClick,\n    getRowKey,\n    tableRef,\n    rowHoverEffect,\n    leftNoVisibleItemsAtom,\n    rightNoVisibleItemsAtom,\n    ...otherProps\n  } = props;\n\n  const [rowsRefs] = useAtom(rowsRefsAtom);\n  const [slice] = useAtom(sliceAtom);\n\n  return (\n    <div\n      {...otherProps}\n      ref={ref}\n      className={cnTableData({ rowHoverEffect }, [className])}\n    >\n      {rows.slice(...slice).map((row, index) => {\n        const rowIndex = index + slice[0];\n        const rowZebraStriped = zebraStriped && rowIndex % 2 !== 0;\n\n        return (\n          <TableRow\n            key={getKey(row, getRowKey, rowIndex)}\n            row={row}\n            index={rowIndex}\n            lowHeadersAtom={lowHeadersAtom}\n            zebraStriped={rowZebraStriped}\n            onMouseEnter={getRowMouseEvent(row, onRowMouseEnter)}\n            onMouseLeave={getRowMouseEvent(row, onRowMouseLeave)}\n            onClick={getRowMouseEvent(row, onRowClick)}\n            tableRef={tableRef}\n            ref={rowsRefs[rowIndex]}\n            leftNoVisibleItemsAtom={leftNoVisibleItemsAtom}\n            rightNoVisibleItemsAtom={rightNoVisibleItemsAtom}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport const TableData = forwardRef(TableDataRender) as TableDataComponent;\n"],"mappings":"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"}