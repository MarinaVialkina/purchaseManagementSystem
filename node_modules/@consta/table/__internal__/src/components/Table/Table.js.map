{"version":3,"file":"Table.js","names":["objectWithDefault","usePropAtom","useSendToAtom","withCtx","useForkRef","React","forwardRef","memo","useVirtualScrollAtom","useHeaderData","TableBody","TableData","TableHeader","MemoTableHeader","MemoTableData","TableRender","props","ref","columns","rows","stickyHeader","virtualScroll","resizable","zebraStriped","headerZIndex","onRowMouseEnter","onRowMouseLeave","onRowClick","getRowKey","rowHoverEffect","onScrollToBottom","otherProps","propsAtom","resizerTopOffsetsAtom","headerHeightAtom","resizersRefsAtom","lowHeadersAtom","stickyTopOffsetsAtom","flattenedHeadersAtom","headerCellsRefsAtom","stickyLeftOffsetsAtom","stickyRightOffsetsAtom","bordersFlattenedHeadersAtom","intersectingColumnsAtom","leftNoVisibleItemsAtom","rightNoVisibleItemsAtom","length","isActive","Array","isArray","listRefsAtom","scrollElementRef","sliceAtom","spaceTopAtom","Table"],"sources":["../../../../../src/components/Table/Table.tsx"],"sourcesContent":["import { objectWithDefault } from '@consta/uikit/__internal__/src/utils/object/objectWithDefault';\nimport { usePropAtom } from '@consta/uikit/__internal__/src/utils/state/usePickAtom';\nimport { useSendToAtom } from '@consta/uikit/__internal__/src/utils/state/useSendToAtom';\nimport { withCtx } from '@consta/uikit/__internal__/src/utils/state/withCtx';\nimport { useForkRef } from '@consta/uikit/useForkRef';\nimport React, { forwardRef, memo } from 'react';\n\nimport {\n  TableComponent,\n  TableDataComponent,\n  TableHeaderComponent,\n  TableProps,\n} from '##/components/Table/types';\nimport { useVirtualScrollAtom } from '##/hooks/useVirtualScrollAtom';\n\nimport { useHeaderData } from './helpers';\nimport { TableBody } from './TableBody';\nimport { TableData } from './TableData';\nimport { TableHeader } from './TableHeader/TableHeader';\n\nconst MemoTableHeader = memo(TableHeader) as unknown as TableHeaderComponent;\nconst MemoTableData = memo(TableData) as unknown as TableDataComponent;\n\nexport const TableRender = (\n  props: TableProps,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const {\n    columns,\n    rows,\n    stickyHeader,\n    virtualScroll,\n    resizable,\n    zebraStriped,\n    headerZIndex = 1,\n    onRowMouseEnter,\n    onRowMouseLeave,\n    onRowClick,\n    getRowKey,\n    rowHoverEffect,\n    onScrollToBottom,\n    ...otherProps\n  } = props;\n\n  const propsAtom = useSendToAtom(\n    objectWithDefault({ headerZIndex: 1 }, props),\n  );\n\n  const {\n    resizerTopOffsetsAtom,\n    headerHeightAtom,\n    resizersRefsAtom,\n    lowHeadersAtom,\n    stickyTopOffsetsAtom,\n    flattenedHeadersAtom,\n    headerCellsRefsAtom,\n    stickyLeftOffsetsAtom,\n    stickyRightOffsetsAtom,\n    bordersFlattenedHeadersAtom,\n    intersectingColumnsAtom,\n    leftNoVisibleItemsAtom,\n    rightNoVisibleItemsAtom,\n  } = useHeaderData(\n    usePropAtom(propsAtom, 'columns'),\n    usePropAtom(propsAtom, 'virtualScroll'),\n  );\n\n  const { listRefsAtom, scrollElementRef, sliceAtom, spaceTopAtom } =\n    useVirtualScrollAtom({\n      length: rows.length,\n      isActive: Array.isArray(virtualScroll) ? virtualScroll[1] : virtualScroll,\n      onScrollToBottom,\n    });\n\n  return (\n    <TableBody\n      {...otherProps}\n      topOffsetsAtom={resizerTopOffsetsAtom}\n      spaceTopAtom={spaceTopAtom}\n      ref={useForkRef([scrollElementRef, ref])}\n      headerHeightAtom={headerHeightAtom}\n      lowHeadersAtom={lowHeadersAtom}\n      resizersRefsAtom={resizersRefsAtom}\n      resizable={resizable}\n      stickyTopOffsetsAtom={stickyTopOffsetsAtom}\n      stickyHeader={stickyHeader}\n      headerZIndex={headerZIndex}\n      intersectingColumnsAtom={intersectingColumnsAtom}\n      header={\n        <MemoTableHeader\n          headersAtom={flattenedHeadersAtom}\n          headerCellsRefsAtom={headerCellsRefsAtom}\n          stickyHeader={stickyHeader}\n          stickyLeftOffsetsAtom={stickyLeftOffsetsAtom}\n          stickyRightOffsetsAtom={stickyRightOffsetsAtom}\n          bordersAtom={bordersFlattenedHeadersAtom}\n          tableRef={scrollElementRef}\n        />\n      }\n      body={\n        <MemoTableData\n          lowHeadersAtom={lowHeadersAtom}\n          rows={rows}\n          rowsRefsAtom={listRefsAtom}\n          sliceAtom={sliceAtom}\n          zebraStriped={zebraStriped}\n          onRowMouseEnter={onRowMouseEnter}\n          onRowMouseLeave={onRowMouseLeave}\n          onRowClick={onRowClick}\n          getRowKey={getRowKey}\n          tableRef={scrollElementRef}\n          rowHoverEffect={rowHoverEffect}\n          leftNoVisibleItemsAtom={leftNoVisibleItemsAtom}\n          rightNoVisibleItemsAtom={rightNoVisibleItemsAtom}\n        />\n      }\n    />\n  );\n};\n\nexport const Table = withCtx(forwardRef(TableRender)) as TableComponent;\n"],"mappings":"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"}