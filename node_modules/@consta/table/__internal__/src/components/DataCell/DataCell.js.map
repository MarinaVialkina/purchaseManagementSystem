{"version":3,"file":"DataCell.js","names":["cnMixFlex","cnMixSpace","Text","React","forwardRef","Fragment","cn","cellVerticalSpaceMap","isNumber","isString","cnDataCell","renderContentSlot","children","truncate","flex","align","renderIcon","Icon","view","renderChildren","size","pV","DataCell","props","ref","className","control","icon","level","levelProp","indicator","style","otherProps","controlsSlots","Array","isArray","iconsSlots","map","childrenSlots","item","contentSlots","Boolean","alignmentIndent","length","undefined","gap","index","justify"],"sources":["../../../../../src/components/DataCell/DataCell.tsx"],"sourcesContent":["import './DataCell.css';\n\nimport { IconComponent } from '@consta/icons/Icon';\nimport { cnMixFlex } from '@consta/uikit/MixFlex';\nimport { cnMixSpace } from '@consta/uikit/MixSpace';\nimport { Text } from '@consta/uikit/Text';\nimport React, { forwardRef, Fragment } from 'react';\n\nimport { cn } from '##/utils/bem';\nimport { cellVerticalSpaceMap } from '##/utils/maps/cellVerticalSpaceMap';\nimport { isNumber, isString } from '##/utils/type-guards';\n\nconst cnDataCell = cn('DataCell');\n\nexport type DataCellProps = {\n  control?: React.ReactNode | JSX.Element[];\n  icon?: IconComponent | IconComponent[];\n  children?: React.ReactNode | JSX.Element[];\n  level?: number;\n  view?: 'primary' | 'alert' | 'success' | 'warning';\n  size?: 'm' | 's';\n  indicator?: 'alert' | 'warning';\n  truncate?: boolean;\n} & JSX.IntrinsicElements['div'];\n\nconst renderContentSlot = (\n  children: DataCellProps['children'],\n  truncate?: boolean,\n) => (\n  <div\n    className={cnDataCell('ContentSlot', { truncate }, [\n      cnMixFlex({\n        flex: 'flex',\n        align: 'center',\n      }),\n    ])}\n  >\n    {children}\n  </div>\n);\n\nconst renderIcon = (Icon: IconComponent, view: DataCellProps['view']) =>\n  renderContentSlot(<Icon view={view} size=\"s\" />);\n\nconst renderChildren = (\n  children: DataCellProps['children'],\n  view: DataCellProps['view'],\n  size: 'm' | 's',\n  truncate: boolean,\n) => {\n  if (isString(children) || isNumber(children)) {\n    return renderContentSlot(\n      <Text\n        className={cnMixSpace({\n          pV: cellVerticalSpaceMap[size],\n        })}\n        view={view}\n        size={size}\n        truncate={truncate}\n      >\n        {children}\n      </Text>,\n      truncate,\n    );\n  }\n  return renderContentSlot(children);\n};\n\nexport const DataCell = forwardRef<HTMLDivElement, DataCellProps>(\n  (props, ref) => {\n    const {\n      className,\n      control,\n      icon,\n      children,\n      level: levelProp = 0,\n      view,\n      size = 'm',\n      indicator,\n      style,\n      truncate = false,\n      ...otherProps\n    } = props;\n    const level = levelProp < 0 ? 0 : levelProp;\n\n    const controlsSlots = control\n      ? [...(Array.isArray(control) ? control : [control])]\n      : [];\n\n    const iconsSlots = icon\n      ? [\n          ...(Array.isArray(icon)\n            ? icon.map((icon) => renderIcon(icon, view))\n            : [renderIcon(icon, view)]),\n        ]\n      : [];\n\n    const childrenSlots = children\n      ? [\n          ...(Array.isArray(children)\n            ? children.map((item) => renderChildren(item, view, size, truncate))\n            : [renderChildren(children, view, size, truncate)]),\n        ]\n      : [];\n\n    const contentSlots = [...iconsSlots, ...childrenSlots];\n\n    return (\n      <div\n        {...otherProps}\n        className={cnDataCell(\n          {\n            size,\n            indicator: Boolean(indicator),\n            alignmentIndent: level >= 1 && controlsSlots.length === 0,\n          },\n          [cnMixFlex({ flex: 'flex' }), className],\n        )}\n        style={{\n          ...style,\n          ['--table-data-cell-level' as string]: level || undefined,\n          ['--table-data-cell-indicator-color' as string]: indicator\n            ? `var(--color-bg-${indicator})`\n            : undefined,\n        }}\n        ref={ref}\n      >\n        {controlsSlots.length ? (\n          <div\n            className={cnMixFlex({ flex: 'flex', align: 'center', gap: '2xs' })}\n          >\n            {controlsSlots.map((item, index) => {\n              return (\n                <div\n                  className={cnDataCell('ControlSlot', [\n                    cnMixFlex({\n                      flex: 'flex',\n                      align: 'center',\n                      justify: 'center',\n                    }),\n                  ])}\n                  key={index}\n                >\n                  {item}\n                </div>\n              );\n            })}\n          </div>\n        ) : undefined}\n        {contentSlots.length ? (\n          <div\n            className={cnDataCell('Slots', { truncate }, [\n              cnMixFlex({ flex: 'flex', gap: '2xs' }),\n            ])}\n          >\n            {contentSlots.map((item, index) => {\n              return <Fragment key={index}>{item}</Fragment>;\n            })}\n          </div>\n        ) : undefined}\n      </div>\n    );\n  },\n);\n"],"mappings":";;;;;;;;;AAAA;AAGA,SAASA,SAAT,QAA0B,uBAA1B;AACA,SAASC,UAAT,QAA2B,wBAA3B;AACA,SAASC,IAAT,QAAqB,oBAArB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AAEA,SAASC,EAAT;AACA,SAASC,oBAAT;AACA,SAASC,QAAT,EAAmBC,QAAnB;AAEA,IAAMC,UAAU,GAAGJ,EAAE,CAAC,UAAD,CAArB;;AAaA,IAAMK,iBAAiB,GAAG,SAApBA,iBAAoB,CACxBC,QADwB,EAExBC,QAFwB;EAAA,OAIxB;IACE,SAAS,EAAEH,UAAU,CAAC,aAAD,EAAgB;MAAEG,QAAQ,EAARA;IAAF,CAAhB,EAA8B,CACjDb,SAAS,CAAC;MACRc,IAAI,EAAE,MADE;MAERC,KAAK,EAAE;IAFC,CAAD,CADwC,CAA9B;EADvB,GAQGH,QARH,CAJwB;AAAA,CAA1B;;AAgBA,IAAMI,UAAU,GAAG,SAAbA,UAAa,CAACC,IAAD,EAAsBC,IAAtB;EAAA,OACjBP,iBAAiB,CAAC,oBAAC,IAAD;IAAM,IAAI,EAAEO,IAAZ;IAAkB,IAAI,EAAC;EAAvB,EAAD,CADA;AAAA,CAAnB;;AAGA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CACrBP,QADqB,EAErBM,IAFqB,EAGrBE,IAHqB,EAIrBP,QAJqB,EAKlB;EACH,IAAIJ,QAAQ,CAACG,QAAD,CAAR,IAAsBJ,QAAQ,CAACI,QAAD,CAAlC,EAA8C;IAC5C,OAAOD,iBAAiB,CACtB,oBAAC,IAAD;MACE,SAAS,EAAEV,UAAU,CAAC;QACpBoB,EAAE,EAAEd,oBAAoB,CAACa,IAAD;MADJ,CAAD,CADvB;MAIE,IAAI,EAAEF,IAJR;MAKE,IAAI,EAAEE,IALR;MAME,QAAQ,EAAEP;IANZ,GAQGD,QARH,CADsB,EAWtBC,QAXsB,CAAxB;EAaD;;EACD,OAAOF,iBAAiB,CAACC,QAAD,CAAxB;AACD,CAtBD;;AAwBA,OAAO,IAAMU,QAAQ,GAAGlB,UAAU,CAChC,UAACmB,KAAD,EAAQC,GAAR,EAAgB;EAAA;;EACd,IACEC,SADF,GAYIF,KAZJ,CACEE,SADF;EAAA,IAEEC,OAFF,GAYIH,KAZJ,CAEEG,OAFF;EAAA,IAGEC,IAHF,GAYIJ,KAZJ,CAGEI,IAHF;EAAA,IAIEf,QAJF,GAYIW,KAZJ,CAIEX,QAJF;EAAA,mBAYIW,KAZJ,CAKEK,KALF;EAAA,IAKSC,SALT,6BAKqB,CALrB;EAAA,IAMEX,IANF,GAYIK,KAZJ,CAMEL,IANF;EAAA,kBAYIK,KAZJ,CAOEH,IAPF;EAAA,IAOEA,IAPF,4BAOS,GAPT;EAAA,IAQEU,SARF,GAYIP,KAZJ,CAQEO,SARF;EAAA,IASEC,KATF,GAYIR,KAZJ,CASEQ,KATF;EAAA,sBAYIR,KAZJ,CAUEV,QAVF;EAAA,IAUEA,QAVF,gCAUa,KAVb;EAAA,IAWKmB,UAXL,4BAYIT,KAZJ;;EAaA,IAAMK,KAAK,GAAGC,SAAS,GAAG,CAAZ,GAAgB,CAAhB,GAAoBA,SAAlC;EAEA,IAAMI,aAAa,GAAGP,OAAO,sBACpBQ,KAAK,CAACC,OAAN,CAAcT,OAAd,IAAyBA,OAAzB,GAAmC,CAACA,OAAD,CADf,IAEzB,EAFJ;EAIA,IAAMU,UAAU,GAAGT,IAAI,sBAEbO,KAAK,CAACC,OAAN,CAAcR,IAAd,IACAA,IAAI,CAACU,GAAL,CAAS,UAACV,IAAD;IAAA,OAAUX,UAAU,CAACW,IAAD,EAAOT,IAAP,CAApB;EAAA,CAAT,CADA,GAEA,CAACF,UAAU,CAACW,IAAD,EAAOT,IAAP,CAAX,CAJa,IAMnB,EANJ;EAQA,IAAMoB,aAAa,GAAG1B,QAAQ,sBAEpBsB,KAAK,CAACC,OAAN,CAAcvB,QAAd,IACAA,QAAQ,CAACyB,GAAT,CAAa,UAACE,IAAD;IAAA,OAAUpB,cAAc,CAACoB,IAAD,EAAOrB,IAAP,EAAaE,IAAb,EAAmBP,QAAnB,CAAxB;EAAA,CAAb,CADA,GAEA,CAACM,cAAc,CAACP,QAAD,EAAWM,IAAX,EAAiBE,IAAjB,EAAuBP,QAAvB,CAAf,CAJoB,IAM1B,EANJ;EAQA,IAAM2B,YAAY,gCAAOJ,UAAP,sBAAsBE,aAAtB,EAAlB;EAEA,OACE,6CACMN,UADN;IAEE,SAAS,EAAEtB,UAAU,CACnB;MACEU,IAAI,EAAJA,IADF;MAEEU,SAAS,EAAEW,OAAO,CAACX,SAAD,CAFpB;MAGEY,eAAe,EAAEd,KAAK,IAAI,CAAT,IAAcK,aAAa,CAACU,MAAd,KAAyB;IAH1D,CADmB,EAMnB,CAAC3C,SAAS,CAAC;MAAEc,IAAI,EAAE;IAAR,CAAD,CAAV,EAA8BW,SAA9B,CANmB,CAFvB;IAUE,KAAK,kCACAM,KADA,6DAEF,yBAFE,EAEoCH,KAAK,IAAIgB,SAF7C,mCAGF,mCAHE,EAG8Cd,SAAS,4BACpCA,SADoC,SAEtDc,SALD,mBAVP;IAiBE,GAAG,EAAEpB;EAjBP,IAmBGS,aAAa,CAACU,MAAd,GACC;IACE,SAAS,EAAE3C,SAAS,CAAC;MAAEc,IAAI,EAAE,MAAR;MAAgBC,KAAK,EAAE,QAAvB;MAAiC8B,GAAG,EAAE;IAAtC,CAAD;EADtB,GAGGZ,aAAa,CAACI,GAAd,CAAkB,UAACE,IAAD,EAAOO,KAAP,EAAiB;IAClC,OACE;MACE,SAAS,EAAEpC,UAAU,CAAC,aAAD,EAAgB,CACnCV,SAAS,CAAC;QACRc,IAAI,EAAE,MADE;QAERC,KAAK,EAAE,QAFC;QAGRgC,OAAO,EAAE;MAHD,CAAD,CAD0B,CAAhB,CADvB;MAQE,GAAG,EAAED;IARP,GAUGP,IAVH,CADF;EAcD,CAfA,CAHH,CADD,GAqBGK,SAxCN,EAyCGJ,YAAY,CAACG,MAAb,GACC;IACE,SAAS,EAAEjC,UAAU,CAAC,OAAD,EAAU;MAAEG,QAAQ,EAARA;IAAF,CAAV,EAAwB,CAC3Cb,SAAS,CAAC;MAAEc,IAAI,EAAE,MAAR;MAAgB+B,GAAG,EAAE;IAArB,CAAD,CADkC,CAAxB;EADvB,GAKGL,YAAY,CAACH,GAAb,CAAiB,UAACE,IAAD,EAAOO,KAAP,EAAiB;IACjC,OAAO,oBAAC,QAAD;MAAU,GAAG,EAAEA;IAAf,GAAuBP,IAAvB,CAAP;EACD,CAFA,CALH,CADD,GAUGK,SAnDN,CADF;AAuDD,CA9F+B,CAA3B"}