{"version":3,"file":"AnimateIconBase.js","names":["forwardRefWithAs","useRefs","React","Transition","cnIcon","iconPropSizeDefault","cnMixAnimateIcon","cn","cnAnimateIconBase","AnimateIconBase","props","ref","className","activeIndex","icons","directions","transition","as","size","view","style","otherProps","refs","length","SingleIcon","Tag","innerRender","map","Icon","index","key","animate"],"sources":["../../../../../src/components/AnimateIconBase/AnimateIconBase.tsx"],"sourcesContent":["import './AnimateIconBase.css';\n\nimport { forwardRefWithAs } from '@consta/uikit/__internal__/src/utils/types/PropsWithAsAttributes';\nimport { useRefs } from '@consta/uikit/useRefs';\nimport React from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport { cnIcon, iconPropSizeDefault } from '##/icons/Icon';\nimport { cnMixAnimateIcon } from '##/mixs/MixAnimateIcon/MixAnimateIcon';\nimport { cn } from '##/utils/bem';\n\nimport { AnimateIconBaseProps } from './types';\n\nconst cnAnimateIconBase = cn('AnimateIconBase');\n\nexport const AnimateIconBase = forwardRefWithAs<AnimateIconBaseProps, 'span'>(\n  (props, ref) => {\n    const {\n      className,\n      activeIndex = 0,\n      icons,\n      directions,\n      transition = 200,\n      as = 'span',\n      size = iconPropSizeDefault,\n      view,\n      style,\n      ...otherProps\n    } = props;\n    const refs = useRefs<HTMLElement>(icons.length);\n\n    const SingleIcon = icons[0];\n\n    const Tag = as as string;\n\n    const innerRender =\n      icons.length === 1 ? (\n        <SingleIcon size={size} view={view} />\n      ) : (\n        icons.map((Icon, index) => (\n          <Transition\n            in={activeIndex === index}\n            key={cnAnimateIconBase({ key: index })}\n            unmountOnExit\n            timeout={transition}\n            nodeRef={refs[index]}\n          >\n            {(animate) => (\n              <Icon\n                ref={refs[index]}\n                className={cnMixAnimateIcon({\n                  animate,\n                })}\n                size={size}\n                view={view}\n              />\n            )}\n          </Transition>\n        ))\n      );\n\n    return (\n      <Tag\n        {...otherProps}\n        className={cnIcon({ size }, [cnAnimateIconBase(), className])}\n        ref={ref}\n        style={{\n          ...style,\n          ['--animate-icon-transition' as string]: `${transition}ms`,\n          ...(typeof directions?.[activeIndex] === 'number' && {\n            ['--animate-icon-direction' as string]: `rotate(${directions[activeIndex]}deg)`,\n          }),\n        }}\n      >\n        {innerRender}\n      </Tag>\n    );\n  },\n);\n"],"mappings":";;;;;;;;AAAA;AAEA,SAASA,gBAAT,QAAiC,kEAAjC;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,wBAA3B;AAEA,SAASC,MAAT,EAAiBC,mBAAjB;AACA,SAASC,gBAAT;AACA,SAASC,EAAT;AAIA,MAAMC,iBAAiB,GAAGD,EAAE,CAAC,iBAAD,CAA5B;AAEA,OAAO,MAAME,eAAe,GAAGT,gBAAgB,CAC7C,CAACU,KAAD,EAAQC,GAAR,KAAgB;EACd,MAAM;IACJC,SADI;IAEJC,WAAW,GAAG,CAFV;IAGJC,KAHI;IAIJC,UAJI;IAKJC,UAAU,GAAG,GALT;IAMJC,EAAE,GAAG,MAND;IAOJC,IAAI,GAAGb,mBAPH;IAQJc,IARI;IASJC;EATI,IAWFV,KAXJ;EAAA,MAUKW,UAVL,4BAWIX,KAXJ;;EAYA,MAAMY,IAAI,GAAGrB,OAAO,CAAca,KAAK,CAACS,MAApB,CAApB;EAEA,MAAMC,UAAU,GAAGV,KAAK,CAAC,CAAD,CAAxB;EAEA,MAAMW,GAAG,GAAGR,EAAZ;EAEA,MAAMS,WAAW,GACfZ,KAAK,CAACS,MAAN,KAAiB,CAAjB,GACE,oBAAC,UAAD;IAAY,IAAI,EAAEL,IAAlB;IAAwB,IAAI,EAAEC;EAA9B,EADF,GAGEL,KAAK,CAACa,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,KACR,oBAAC,UAAD;IACE,EAAE,EAAEhB,WAAW,KAAKgB,KADtB;IAEE,GAAG,EAAErB,iBAAiB,CAAC;MAAEsB,GAAG,EAAED;IAAP,CAAD,CAFxB;IAGE,aAAa,MAHf;IAIE,OAAO,EAAEb,UAJX;IAKE,OAAO,EAAEM,IAAI,CAACO,KAAD;EALf,GAOIE,OAAD,IACC,oBAAC,IAAD;IACE,GAAG,EAAET,IAAI,CAACO,KAAD,CADX;IAEE,SAAS,EAAEvB,gBAAgB,CAAC;MAC1ByB;IAD0B,CAAD,CAF7B;IAKE,IAAI,EAAEb,IALR;IAME,IAAI,EAAEC;EANR,EARJ,CADF,CAJJ;EA0BA,OACE,oBAAC,GAAD,oBACME,UADN;IAEE,SAAS,EAAEjB,MAAM,CAAC;MAAEc;IAAF,CAAD,EAAW,CAACV,iBAAiB,EAAlB,EAAsBI,SAAtB,CAAX,CAFnB;IAGE,GAAG,EAAED,GAHP;IAIE,KAAK,kCACAS,KADA;MAEH,CAAC,2BAAD,GAA0C,GAAEJ,UAAW;IAFpD,GAGC,QAAOD,UAAP,aAAOA,UAAP,uBAAOA,UAAU,CAAGF,WAAH,CAAjB,MAAqC,QAArC,IAAiD;MACnD,CAAC,0BAAD,GAAyC,UAASE,UAAU,CAACF,WAAD,CAAc;IADvB,CAHlD;EAJP,IAYGa,WAZH,CADF;AAgBD,CA9D4C,CAAxC"}