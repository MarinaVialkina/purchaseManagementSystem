import _defineProperty from "@babel/runtime/helpers/defineProperty";
import _objectWithoutProperties from "@babel/runtime/helpers/objectWithoutProperties";
const _excluded = ["className", "activeIndex", "icons", "directions", "transition", "as", "size", "view", "style"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

import "./AnimateIconBase.css";
import { forwardRefWithAs } from '@consta/uikit/__internal__/src/utils/types/PropsWithAsAttributes';
import { useRefs } from '@consta/uikit/useRefs';
import React from 'react';
import { Transition } from 'react-transition-group';
import { cnIcon, iconPropSizeDefault } from "../../icons/Icon";
import { cnMixAnimateIcon } from "../../mixs/MixAnimateIcon/MixAnimateIcon";
import { cn } from "../../utils/bem";
const cnAnimateIconBase = cn('AnimateIconBase');
export const AnimateIconBase = forwardRefWithAs((props, ref) => {
  const {
    className,
    activeIndex = 0,
    icons,
    directions,
    transition = 200,
    as = 'span',
    size = iconPropSizeDefault,
    view,
    style
  } = props,
        otherProps = _objectWithoutProperties(props, _excluded);

  const refs = useRefs(icons.length);
  const SingleIcon = icons[0];
  const Tag = as;
  const innerRender = icons.length === 1 ? React.createElement(SingleIcon, {
    size: size,
    view: view
  }) : icons.map((Icon, index) => React.createElement(Transition, {
    in: activeIndex === index,
    key: cnAnimateIconBase({
      key: index
    }),
    unmountOnExit: true,
    timeout: transition,
    nodeRef: refs[index]
  }, animate => React.createElement(Icon, {
    ref: refs[index],
    className: cnMixAnimateIcon({
      animate
    }),
    size: size,
    view: view
  })));
  return React.createElement(Tag, Object.assign({}, otherProps, {
    className: cnIcon({
      size
    }, [cnAnimateIconBase(), className]),
    ref: ref,
    style: _objectSpread(_objectSpread({}, style), {}, {
      ['--animate-icon-transition']: `${transition}ms`
    }, typeof (directions === null || directions === void 0 ? void 0 : directions[activeIndex]) === 'number' && {
      ['--animate-icon-direction']: `rotate(${directions[activeIndex]}deg)`
    })
  }), innerRender);
});
//# sourceMappingURL=AnimateIconBase.js.map