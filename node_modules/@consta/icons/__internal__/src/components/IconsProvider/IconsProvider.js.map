{"version":3,"file":"IconsProvider.js","names":["React","createContext","useMemo","useState","cn","IconsProviderList","defaultContextValue","addIcon","undefined","removeIcon","cnIcons","IconsContext","IconsProvider","children","container","window","document","body","icons","setIcons","value","name","size","svg","key","prev","count","copyIcons"],"sources":["../../../../../src/components/IconsProvider/IconsProvider.tsx"],"sourcesContent":["import './IconsProvider.css';\n\nimport React, { createContext, useMemo, useState } from 'react';\n\nimport { IconProps } from '##/icons/Icon';\nimport { cn } from '##/utils/bem';\n\nimport { IconsProviderList } from './IconsProviderList/IconsProviderList';\n\nexport type Icons = Record<\n  string,\n  { count: number; svg: React.ReactNode | null }\n>;\n\ntype IconsContextAddIcon = (\n  iconName: string,\n  size: IconProps['size'],\n  svg: React.ReactNode | null,\n) => void;\n\ntype IconsContextRemoveIcon = (\n  iconName: string,\n  size: IconProps['size'],\n) => void;\n\ntype IconsContextParams = {\n  addIcon: IconsContextAddIcon | undefined;\n  removeIcon: IconsContextRemoveIcon | undefined;\n};\n\nconst defaultContextValue: IconsContextParams = {\n  addIcon: undefined,\n  removeIcon: undefined,\n};\n\nexport const cnIcons = cn('Icons');\n\nexport const IconsContext =\n  createContext<IconsContextParams>(defaultContextValue);\n\nexport const IconsProvider: React.FC<{\n  children: React.ReactNode;\n  container?: Element;\n}> = ({ children, container = window.document.body }) => {\n  const [icons, setIcons] = useState<Icons>({});\n\n  const value = useMemo(() => {\n    const addIcon: IconsContextAddIcon = (name, size = 'm', svg) => {\n      const key = `${name}_${size}`;\n      setIcons((prev) => ({\n        ...prev,\n        [key]: {\n          count: typeof prev[key] === 'object' ? prev[key].count + 1 : 1,\n          svg,\n        },\n      }));\n    };\n\n    const removeIcon: IconsContextRemoveIcon = (name, size = 'm') => {\n      const key = `${name}_${size}`;\n      setIcons((prev) => {\n        const copyIcons = { ...prev };\n        if (copyIcons[key].count === 1) {\n          delete copyIcons[key];\n        } else {\n          copyIcons[key].count -= 1;\n        }\n        return copyIcons;\n      });\n    };\n\n    return { addIcon, removeIcon };\n  }, []);\n\n  return (\n    <>\n      <IconsContext.Provider value={value}>{children}</IconsContext.Provider>\n      <IconsProviderList icons={icons} container={container} />\n    </>\n  );\n};\n"],"mappings":";;;;;;AAAA;AAEA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,OAA/B,EAAwCC,QAAxC,QAAwD,OAAxD;AAGA,SAASC,EAAT;AAEA,SAASC,iBAAT;AAuBA,MAAMC,mBAAuC,GAAG;EAC9CC,OAAO,EAAEC,SADqC;EAE9CC,UAAU,EAAED;AAFkC,CAAhD;AAKA,OAAO,MAAME,OAAO,GAAGN,EAAE,CAAC,OAAD,CAAlB;AAEP,OAAO,MAAMO,YAAY,GACvBV,aAAa,CAAqBK,mBAArB,CADR;AAGP,OAAO,MAAMM,aAGX,GAAG,CAAC;EAAEC,QAAF;EAAYC,SAAS,GAAGC,MAAM,CAACC,QAAP,CAAgBC;AAAxC,CAAD,KAAoD;EACvD,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBhB,QAAQ,CAAQ,EAAR,CAAlC;EAEA,MAAMiB,KAAK,GAAGlB,OAAO,CAAC,MAAM;IAC1B,MAAMK,OAA4B,GAAG,CAACc,IAAD,EAAOC,IAAI,GAAG,GAAd,EAAmBC,GAAnB,KAA2B;MAC9D,MAAMC,GAAG,GAAI,GAAEH,IAAK,IAAGC,IAAK,EAA5B;MACAH,QAAQ,CAAEM,IAAD,oCACJA,IADI;QAEP,CAACD,GAAD,GAAO;UACLE,KAAK,EAAE,OAAOD,IAAI,CAACD,GAAD,CAAX,KAAqB,QAArB,GAAgCC,IAAI,CAACD,GAAD,CAAJ,CAAUE,KAAV,GAAkB,CAAlD,GAAsD,CADxD;UAELH;QAFK;MAFA,EAAD,CAAR;IAOD,CATD;;IAWA,MAAMd,UAAkC,GAAG,CAACY,IAAD,EAAOC,IAAI,GAAG,GAAd,KAAsB;MAC/D,MAAME,GAAG,GAAI,GAAEH,IAAK,IAAGC,IAAK,EAA5B;MACAH,QAAQ,CAAEM,IAAD,IAAU;QACjB,MAAME,SAAS,qBAAQF,IAAR,CAAf;;QACA,IAAIE,SAAS,CAACH,GAAD,CAAT,CAAeE,KAAf,KAAyB,CAA7B,EAAgC;UAC9B,OAAOC,SAAS,CAACH,GAAD,CAAhB;QACD,CAFD,MAEO;UACLG,SAAS,CAACH,GAAD,CAAT,CAAeE,KAAf,IAAwB,CAAxB;QACD;;QACD,OAAOC,SAAP;MACD,CARO,CAAR;IASD,CAXD;;IAaA,OAAO;MAAEpB,OAAF;MAAWE;IAAX,CAAP;EACD,CA1BoB,EA0BlB,EA1BkB,CAArB;EA4BA,OACE,0CACE,oBAAC,YAAD,CAAc,QAAd;IAAuB,KAAK,EAAEW;EAA9B,GAAsCP,QAAtC,CADF,EAEE,oBAAC,iBAAD;IAAmB,KAAK,EAAEK,KAA1B;IAAiC,SAAS,EAAEJ;EAA5C,EAFF,CADF;AAMD,CAxCM"}