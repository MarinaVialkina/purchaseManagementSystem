import { forwardRefWithAs } from '@consta/uikit/__internal__/src/utils/types/PropsWithAsAttributes';
import React, { lazy, memo, Suspense } from 'react';
import { ErrorBoundary } from "../ErrorBoundary";
import { cnIcon } from "../../icons/Icon/helpers";
import { Icon } from "../../icons/Icon/Icon";
import { LazyIconFallback } from "./LazyIconFallback";
const LazySvg = memo(({
  name,
  size = 'm'
}) => {
  const Svg = lazy(() => import(`../../icons/${name}/svg`));
  return React.createElement(ErrorBoundary, {
    fallback: React.createElement(LazyIconFallback, {
      className: cnIcon('Svg'),
      size: size
    })
  }, React.createElement(Suspense, {
    fallback: React.createElement(LazyIconFallback, {
      className: cnIcon('Svg'),
      size: size,
      animate: true
    })
  }, React.createElement(Svg, {
    className: cnIcon('Svg'),
    size: size
  })));
}, (prev, next) => prev.name === next.name && prev.size === next.size);
export const LazyIcon = forwardRefWithAs((props, ref) => {
  return React.createElement(Icon, Object.assign({}, props, {
    ref: ref
  }), React.createElement(LazySvg, {
    name: props.name,
    size: props.size
  }));
});
//# sourceMappingURL=LazyIcon.js.map