{"version":3,"file":"LazyIcon.js","names":["forwardRefWithAs","React","lazy","memo","Suspense","ErrorBoundary","cnIcon","Icon","LazyIconFallback","LazySvg","name","size","Svg","prev","next","LazyIcon","props","ref"],"sources":["../../../../../src/components/LazyIcon/LazyIcon.tsx"],"sourcesContent":["import {\n  forwardRefWithAs,\n  PropsWithAsAttributes,\n} from '@consta/uikit/__internal__/src/utils/types/PropsWithAsAttributes';\nimport React, { lazy, memo, Suspense } from 'react';\n\nimport { ErrorBoundary } from '##/components/ErrorBoundary';\nimport { cnIcon, IconComponent, IconProps } from '##/icons/Icon/helpers';\nimport { Icon } from '##/icons/Icon/Icon';\n\nimport { LazyIconFallback } from './LazyIconFallback';\nimport { LazyIconComponent, LazyIconProps, LazySvgProps } from './types';\n\ntype innerIconProps = PropsWithAsAttributes<IconProps, 'span'> & {\n  name: string;\n  color?: 'mono' | 'multiple';\n};\n\nconst LazySvg: React.FC<LazySvgProps> = memo(\n  ({ name, size = 'm' }) => {\n    const Svg = lazy(\n      () => import(`../../icons/${name}/svg`),\n    ) as unknown as IconComponent;\n\n    return (\n      <ErrorBoundary\n        fallback={<LazyIconFallback className={cnIcon('Svg')} size={size} />}\n      >\n        <Suspense\n          fallback={\n            <LazyIconFallback className={cnIcon('Svg')} size={size} animate />\n          }\n        >\n          <Svg className={cnIcon('Svg')} size={size} />\n        </Suspense>\n      </ErrorBoundary>\n    );\n  },\n  (prev, next) => prev.name === next.name && prev.size === next.size,\n);\n\nexport const LazyIcon: LazyIconComponent<'span'> = forwardRefWithAs<\n  LazyIconProps,\n  'span'\n>((props, ref) => {\n  return (\n    <Icon {...(props as innerIconProps)} ref={ref}>\n      <LazySvg name={props.name} size={props.size} />\n    </Icon>\n  );\n});\n"],"mappings":"AAAA,SACEA,gBADF,QAGO,kEAHP;AAIA,OAAOC,KAAP,IAAgBC,IAAhB,EAAsBC,IAAtB,EAA4BC,QAA5B,QAA4C,OAA5C;AAEA,SAASC,aAAT;AACA,SAASC,MAAT;AACA,SAASC,IAAT;AAEA,SAASC,gBAAT;AAQA,MAAMC,OAA+B,GAAGN,IAAI,CAC1C,CAAC;EAAEO,IAAF;EAAQC,IAAI,GAAG;AAAf,CAAD,KAA0B;EACxB,MAAMC,GAAG,GAAGV,IAAI,CACd,MAAM,OAAQ,eAAcQ,IAAK,MAA3B,CADQ,CAAhB;EAIA,OACE,oBAAC,aAAD;IACE,QAAQ,EAAE,oBAAC,gBAAD;MAAkB,SAAS,EAAEJ,MAAM,CAAC,KAAD,CAAnC;MAA4C,IAAI,EAAEK;IAAlD;EADZ,GAGE,oBAAC,QAAD;IACE,QAAQ,EACN,oBAAC,gBAAD;MAAkB,SAAS,EAAEL,MAAM,CAAC,KAAD,CAAnC;MAA4C,IAAI,EAAEK,IAAlD;MAAwD,OAAO;IAA/D;EAFJ,GAKE,oBAAC,GAAD;IAAK,SAAS,EAAEL,MAAM,CAAC,KAAD,CAAtB;IAA+B,IAAI,EAAEK;EAArC,EALF,CAHF,CADF;AAaD,CAnByC,EAoB1C,CAACE,IAAD,EAAOC,IAAP,KAAgBD,IAAI,CAACH,IAAL,KAAcI,IAAI,CAACJ,IAAnB,IAA2BG,IAAI,CAACF,IAAL,KAAcG,IAAI,CAACH,IApBpB,CAA5C;AAuBA,OAAO,MAAMI,QAAmC,GAAGf,gBAAgB,CAGjE,CAACgB,KAAD,EAAQC,GAAR,KAAgB;EAChB,OACE,oBAAC,IAAD,oBAAWD,KAAX;IAAqC,GAAG,EAAEC;EAA1C,IACE,oBAAC,OAAD;IAAS,IAAI,EAAED,KAAK,CAACN,IAArB;IAA2B,IAAI,EAAEM,KAAK,CAACL;EAAvC,EADF,CADF;AAKD,CATkE,CAA5D"}