{"version":3,"file":"createSvg.js","names":["React","isValidElement","useContext","useEffect","useMemo","cnIcons","IconsContext","renderTypeDefault","createSvg","createProps","props","name","renderType","size","className","otherProps","Svg","addIcon","removeIcon","SvgElement","children","_children","svgProps"],"sources":["../../../../../src/icons/Icon/createSvg.tsx"],"sourcesContent":["import React, { isValidElement, useContext, useEffect, useMemo } from 'react';\n\nimport { cnIcons, IconsContext } from '##/components/IconsProvider';\n\nimport { CreateIconArguments, renderTypeDefault, SvgProps } from './helpers';\n\nexport const createSvg =\n  (createProps: CreateIconArguments) => (props: SvgProps) => {\n    const { name, renderType = renderTypeDefault } = createProps;\n\n    const { size = 'm', className, ...otherProps } = props;\n\n    const Svg = createProps[size];\n    const { addIcon, removeIcon } = useContext(IconsContext);\n\n    const SvgElement = useMemo(() => {\n      return renderType[size] === 'use' ? Svg({ className }) : null;\n    }, [Svg]);\n\n    const { children: _children, ...svgProps } = isValidElement(SvgElement)\n      ? SvgElement?.props || {}\n      : {};\n\n    useEffect(() => {\n      if (renderType[size] === 'use') {\n        addIcon?.(name, size, SvgElement);\n      }\n    }, [SvgElement, renderType, size]);\n\n    useEffect(() => {\n      return () => {\n        if (renderType[size] === 'use') {\n          removeIcon?.(name, size);\n        }\n      };\n    }, [Svg, renderType, size]);\n\n    if (addIcon && renderType[size] === 'use') {\n      return (\n        <svg {...otherProps} {...svgProps}>\n          <use x=\"0\" y=\"0\" xlinkHref={`#${cnIcons(`${name}_${size}`)}`} />\n        </svg>\n      );\n    }\n    return <Svg className={className} />;\n  };\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,cAAhB,EAAgCC,UAAhC,EAA4CC,SAA5C,EAAuDC,OAAvD,QAAsE,OAAtE;AAEA,SAASC,OAAT,EAAkBC,YAAlB;AAEA,SAA8BC,iBAA9B;AAEA,OAAO,MAAMC,SAAS,GACnBC,WAAD,IAAuCC,KAAD,IAAqB;EACzD,MAAM;IAAEC,IAAF;IAAQC,UAAU,GAAGL;EAArB,IAA2CE,WAAjD;;EAEA,MAAM;IAAEI,IAAI,GAAG,GAAT;IAAcC;EAAd,IAA2CJ,KAAjD;EAAA,MAAkCK,UAAlC,4BAAiDL,KAAjD;;EAEA,MAAMM,GAAG,GAAGP,WAAW,CAACI,IAAD,CAAvB;EACA,MAAM;IAAEI,OAAF;IAAWC;EAAX,IAA0BhB,UAAU,CAACI,YAAD,CAA1C;EAEA,MAAMa,UAAU,GAAGf,OAAO,CAAC,MAAM;IAC/B,OAAOQ,UAAU,CAACC,IAAD,CAAV,KAAqB,KAArB,GAA6BG,GAAG,CAAC;MAAEF;IAAF,CAAD,CAAhC,GAAkD,IAAzD;EACD,CAFyB,EAEvB,CAACE,GAAD,CAFuB,CAA1B;;EAIA,aAA6Cf,cAAc,CAACkB,UAAD,CAAd,GACzC,CAAAA,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAET,KAAZ,KAAqB,EADoB,GAEzC,EAFJ;EAAA,MAAM;IAAEU,QAAQ,EAAEC;EAAZ,CAAN;EAAA,MAAgCC,QAAhC;;EAIAnB,SAAS,CAAC,MAAM;IACd,IAAIS,UAAU,CAACC,IAAD,CAAV,KAAqB,KAAzB,EAAgC;MAC9BI,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAGN,IAAH,EAASE,IAAT,EAAeM,UAAf,CAAP;IACD;EACF,CAJQ,EAIN,CAACA,UAAD,EAAaP,UAAb,EAAyBC,IAAzB,CAJM,CAAT;EAMAV,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACX,IAAIS,UAAU,CAACC,IAAD,CAAV,KAAqB,KAAzB,EAAgC;QAC9BK,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAGP,IAAH,EAASE,IAAT,CAAV;MACD;IACF,CAJD;EAKD,CANQ,EAMN,CAACG,GAAD,EAAMJ,UAAN,EAAkBC,IAAlB,CANM,CAAT;;EAQA,IAAII,OAAO,IAAIL,UAAU,CAACC,IAAD,CAAV,KAAqB,KAApC,EAA2C;IACzC,OACE,6CAASE,UAAT,EAAyBO,QAAzB,GACE;MAAK,CAAC,EAAC,GAAP;MAAW,CAAC,EAAC,GAAb;MAAiB,SAAS,EAAG,IAAGjB,OAAO,CAAE,GAAEM,IAAK,IAAGE,IAAK,EAAjB,CAAoB;IAA3D,EADF,CADF;EAKD;;EACD,OAAO,oBAAC,GAAD;IAAK,SAAS,EAAEC;EAAhB,EAAP;AACD,CAvCI"}